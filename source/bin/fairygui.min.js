window.fgui={},window.fairygui=window.fgui,window.__extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};!function(t){var e=function(){function t(){}return t.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.enableDebug&&console.log.apply(console,e)},t.enableDebug=!0,t}();t.Debug=e}(fgui||(fgui={})),function(t){var e=window,i=!(!e.PointerEvent&&!e.MSPointerEvent),n="ontouchstart"in window&&PIXI.utils.isMobile.any,o=function(){function t(){}return t.Down=i?"pointerdown":n?"touchstart":"mousedown",t.Cancel=i?"pointercancel":n?"touchcancel":"mousecancel",t.Up=i?"pointerup":n?"touchend":"mouseup",t.Click=i?"pointertap":n?"tap":"click",t.UpOutside=i?"pointerupoutside":n?"touchendoutside":"mouseupoutside",t.Move=i?"pointermove":n?"touchmove":"mousemove",t.Over=i?"pointerover":n?null:"mouseover",t.Out=i?"pointerout":n?null:"mouseout",t.RightDown="rightdown",t.RightUp="rightup",t.RightClick="rightclick",t.RightUpOutside="rightupoutside",t.TouchBegin=t.Down,t.TouchEnd=t.Up,t}();t.InteractiveEvents=o,t.GearXMLNodeNameMap={gearDisplay:0,gearXY:1,gearSize:2,gearLook:3,gearColor:4,gearAni:5,gearText:6,gearIcon:7},t.BlendModeMap=["Normal","Add","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity","NormalNPM","AddNPM","ScreenNPM"]}(fgui||(fgui={}));var fairygui=fgui;!function(t){var e;!function(t){t[t.Common=0]="Common",t[t.Check=1]="Check",t[t.Radio=2]="Radio"}(t.ButtonMode||(t.ButtonMode={})),function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Height=2]="Height",t[t.Shrink=3]="Shrink"}(t.AutoSizeType||(t.AutoSizeType={})),function(t){t.Left="left",t.Center="center",t.Right="right"}(e=t.AlignType||(t.AlignType={})),t.AlignMap=[e.Left,e.Center,e.Right],function(t){t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom"}(t.VertAlignType||(t.VertAlignType={})),function(t){t[t.None=0]="None",t[t.Scale=1]="Scale",t[t.ScaleMatchHeight=2]="ScaleMatchHeight",t[t.ScaleMatchWidth=3]="ScaleMatchWidth",t[t.ScaleFree=4]="ScaleFree",t[t.ScaleNoBorder=5]="ScaleNoBorder"}(t.LoaderFillType||(t.LoaderFillType={})),function(t){t[t.SingleColumn=0]="SingleColumn",t[t.SingleRow=1]="SingleRow",t[t.FlowHorizontal=2]="FlowHorizontal",t[t.FlowVertical=3]="FlowVertical",t[t.Pagination=4]="Pagination"}(t.ListLayoutType||(t.ListLayoutType={})),function(t){t[t.Single=0]="Single",t[t.Multiple=1]="Multiple",t[t.Multiple_SingleClick=2]="Multiple_SingleClick",t[t.None=3]="None"}(t.ListSelectionMode||(t.ListSelectionMode={})),function(t){t[t.Visible=0]="Visible",t[t.Hidden=1]="Hidden",t[t.Scroll=2]="Scroll",t[t.Scale=3]="Scale",t[t.ScaleFree=4]="ScaleFree"}(t.OverflowType||(t.OverflowType={})),function(t){t[t.Image=0]="Image",t[t.MovieClip=1]="MovieClip",t[t.Sound=2]="Sound",t[t.Component=3]="Component",t[t.Atlas=4]="Atlas",t[t.Font=5]="Font",t[t.Swf=6]="Swf",t[t.Misc=7]="Misc",t[t.Unknown=8]="Unknown"}(t.PackageItemType||(t.PackageItemType={})),function(t){t[t.Image=0]="Image",t[t.MovieClip=1]="MovieClip",t[t.Swf=2]="Swf",t[t.Graph=3]="Graph",t[t.Loader=4]="Loader",t[t.Group=5]="Group",t[t.Text=6]="Text",t[t.RichText=7]="RichText",t[t.InputText=8]="InputText",t[t.Component=9]="Component",t[t.List=10]="List",t[t.Label=11]="Label",t[t.Button=12]="Button",t[t.ComboBox=13]="ComboBox",t[t.ProgressBar=14]="ProgressBar",t[t.Slider=15]="Slider",t[t.ScrollBar=16]="ScrollBar",t[t.Tree=17]="Tree"}(t.ObjectType||(t.ObjectType={})),function(t){t[t.Percent=0]="Percent",t[t.ValueAndMax=1]="ValueAndMax",t[t.Value=2]="Value",t[t.Max=3]="Max"}(t.ProgressTitleType||(t.ProgressTitleType={})),function(t){t[t.Default=0]="Default",t[t.Visible=1]="Visible",t[t.Auto=2]="Auto",t[t.Hidden=3]="Hidden"}(t.ScrollBarDisplayType||(t.ScrollBarDisplayType={})),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t[t.Both=2]="Both"}(t.ScrollType||(t.ScrollType={})),function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Both=3]="Both"}(t.FlipType||(t.FlipType={})),function(t){t[t.Ascent=0]="Ascent",t[t.Descent=1]="Descent",t[t.Arch=2]="Arch"}(t.ChildrenRenderOrder||(t.ChildrenRenderOrder={})),function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(t.GroupLayoutType||(t.GroupLayoutType={})),function(t){t[t.Auto=0]="Auto",t[t.Up=1]="Up",t[t.Down=2]="Down"}(t.PopupDirection||(t.PopupDirection={})),function(t){t[t.Left_Left=0]="Left_Left",t[t.Left_Center=1]="Left_Center",t[t.Left_Right=2]="Left_Right",t[t.Center_Center=3]="Center_Center",t[t.Right_Left=4]="Right_Left",t[t.Right_Center=5]="Right_Center",t[t.Right_Right=6]="Right_Right",t[t.Top_Top=7]="Top_Top",t[t.Top_Middle=8]="Top_Middle",t[t.Top_Bottom=9]="Top_Bottom",t[t.Middle_Middle=10]="Middle_Middle",t[t.Bottom_Top=11]="Bottom_Top",t[t.Bottom_Middle=12]="Bottom_Middle",t[t.Bottom_Bottom=13]="Bottom_Bottom",t[t.Width=14]="Width",t[t.Height=15]="Height",t[t.LeftExt_Left=16]="LeftExt_Left",t[t.LeftExt_Right=17]="LeftExt_Right",t[t.RightExt_Left=18]="RightExt_Left",t[t.RightExt_Right=19]="RightExt_Right",t[t.TopExt_Top=20]="TopExt_Top",t[t.TopExt_Bottom=21]="TopExt_Bottom",t[t.BottomExt_Top=22]="BottomExt_Top",t[t.BottomExt_Bottom=23]="BottomExt_Bottom",t[t.Size=24]="Size"}(t.RelationType||(t.RelationType={})),function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Radial90=3]="Radial90",t[t.Radial180=4]="Radial180",t[t.Radial360=5]="Radial360"}(t.FillMethod||(t.FillMethod={})),function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right",t[t.TopLeft=0]="TopLeft",t[t.TopRight=1]="TopRight",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(t.FillOrigin||(t.FillOrigin={})),function(t){t[t.TopLeft=0]="TopLeft",t[t.TopRight=1]="TopRight",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(t.FillOrigin90||(t.FillOrigin90={})),function(t){t[t.Text=0]="Text",t[t.Icon=1]="Icon",t[t.Color=2]="Color",t[t.OutlineColor=3]="OutlineColor",t[t.Playing=4]="Playing",t[t.Frame=5]="Frame",t[t.DeltaTime=6]="DeltaTime",t[t.TimeScale=7]="TimeScale",t[t.FontSize=8]="FontSize",t[t.Selected=9]="Selected"}(t.ObjectPropID||(t.ObjectPropID={}))}(fgui||(fgui={})),function(t){function e(t,e){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];i.length>0&&i[0]instanceof PIXI.interaction.InteractionEvent&&(i[0].gObject=e),e.emit.apply(e,__spreadArrays([t],i))}}var i=function(t){function i(){var e=t.call(this)||this;return e._proxys={},e}return __extends(i,t),i.prototype.on=function(i,n,o){return t.prototype.on.call(this,i,n,o),null!=this._displayObject&&(this._proxys[i]||(this._proxys[i]=e(i,this),this._displayObject.on(i,this._proxys[i],this))),this},i.prototype.once=function(i,n,o){return t.prototype.once.call(this,i,n,o),null!=this._displayObject&&(this._proxys[i]||(this._proxys[i]=e(i,this),this._displayObject.on(i,this._proxys[i],this))),this},i.prototype.off=function(e,i,n){return t.prototype.off.call(this,e,i,n),null!=this._displayObject&&this.listenerCount(e)<=0&&this._proxys[e]&&this._displayObject.off(e,this._proxys[e],n),this},i.prototype.addListener=function(i,n,o){return t.prototype.addListener.call(this,i,n,o),null!=this._displayObject&&(this._proxys[i]||(this._proxys[i]=e(i,this),this._displayObject.addListener(i,this._proxys[i],this))),this},i.prototype.removeListener=function(e,i,n){return t.prototype.removeListener.call(this,e,i,n),null!=this._displayObject&&this.listenerCount(e)<=0&&this._proxys[e]&&this._displayObject.off(e,this._proxys[e],n),this},i.prototype.removeAllListeners=function(e){return t.prototype.removeAllListeners.call(this,e),null!=this._displayObject&&this._displayObject.removeListener(e),this},i}(PIXI.utils.EventEmitter);t.UIEventProxy=i}(fgui||(fgui={})),function(t){var e=function(e){function i(){var n=e.call(this)||this;return n._x=0,n._y=0,n._alpha=1,n._rotation=0,n._visible=!0,n._touchable=!0,n._grayed=!1,n._draggable=!1,n._scaleX=1,n._scaleY=1,n._skewX=0,n._skewY=0,n._pivot=new PIXI.Point,n._pivotAsAnchor=!1,n._pivotOffset=new PIXI.Point,n._sortingOrder=0,n._internalVisible=!0,n._handlingController=!1,n._focusable=!1,n._pixelSnapping=!1,n._disposed=!1,n.sourceWidth=0,n.sourceHeight=0,n.initWidth=0,n.initHeight=0,n.minWidth=0,n.minHeight=0,n.maxWidth=0,n.maxHeight=0,n._width=0,n._height=0,n._rawWidth=0,n._rawHeight=0,n._sizePercentInGroup=0,n._lastColorComponents=null,n._id=""+i._gInstanceCounter++,n._name="",n.createDisplayObject(),n._relations=new t.Relations(n),n._gears=[],n}return __extends(i,e),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this.setXY(t,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this.setXY(this._x,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"xMin",{get:function(){return this._pivotAsAnchor?this._x-this._width*this._pivot.x:this._x},set:function(t){this._pivotAsAnchor?this.setXY(t+this._width*this._pivot.x,this._y):this.setXY(t,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yMin",{get:function(){return this._pivotAsAnchor?this._y-this._height*this._pivot.y:this._y},set:function(t){this._pivotAsAnchor?this.setXY(this._x,t+this._height*this._pivot.y):this.setXY(this._x,t)},enumerable:!0,configurable:!0}),i.prototype.setXY=function(t,e){this._x==t&&this._y==e||(this._x=t,this._y=e,this.handleXYChanged(),this.updateGear(1),this._parent&&(this._parent.setBoundsChangedFlag(),this._displayObject.emit("__xyChanged",this)),i.draggingObject!=this||i.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,i.sGlobalRect))},Object.defineProperty(i.prototype,"pixelSnapping",{get:function(){return this._pixelSnapping},set:function(t){this._pixelSnapping!=t&&(this._pixelSnapping=t,this.handleXYChanged())},enumerable:!0,configurable:!0}),i.prototype.center=function(e){var i;void 0===e&&(e=!1),i=null!=this._parent?this.parent:this.root,this.setXY((i.width-this.width)/2,(i.height-this.height)/2),e&&(this.addRelation(i,t.RelationType.Center_Center),this.addRelation(i,t.RelationType.Middle_Middle))},Object.defineProperty(i.prototype,"width",{get:function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width},set:function(t){this.setSize(t,this._rawHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height},set:function(t){this.setSize(this._rawWidth,t)},enumerable:!0,configurable:!0}),i.prototype.setSize=function(t,e,i){if(void 0===i&&(i=!1),this._rawWidth!=t||this._rawHeight!=e){this._rawWidth=t,this._rawHeight=e,t=Math.max(0,t),e=Math.max(0,e);var n=t-this.mapPivotWidth(1),o=e-this.mapPivotHeight(1);this._width=t,this._height=e,this.handleSizeChanged(),0==this._pivot.x&&0==this._pivot.y||(this._pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this._pivot.x*n,this.y-this._pivot.y*o),this.updatePivotOffset())),this.updateGear(2),this._parent&&(this._relations.onOwnerSizeChanged(n,o,this._pivotAsAnchor||!i),this._parent.setBoundsChangedFlag()),this._displayObject.emit("__sizeChanged",this)}},i.prototype.makeFullScreen=function(){this.setSize(t.GRoot.inst.width,t.GRoot.inst.height)},i.prototype.ensureSizeCorrect=function(){},Object.defineProperty(i.prototype,"actualWidth",{get:function(){return this.width*Math.abs(this._scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualHeight",{get:function(){return this.height*Math.abs(this._scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this.setScale(t,this._scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this.setScale(this._scaleX,t)},enumerable:!0,configurable:!0}),i.prototype.setScale=function(t,e){this._scaleX==t&&this._scaleY==e||(this._scaleX=t,this._scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},Object.defineProperty(i.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this.setSkew(t,this._skewY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this.setSkew(this._skewX,t)},enumerable:!0,configurable:!0}),i.prototype.setSkew=function(e,i){this._skewX==e&&this._skewY==i||(this._skewX=e,this._skewY=i,this._displayObject.skew.set(e*-t.utils.NumberUtil.RADIAN,i*t.utils.NumberUtil.RADIAN),this.applyPivot())},i.prototype.mapPivotWidth=function(t){return t*this._width},i.prototype.mapPivotHeight=function(t){return t*this._height},Object.defineProperty(i.prototype,"pivotX",{get:function(){return this._pivot.x},set:function(t){this.setPivot(t,this.pivotY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pivotY",{get:function(){return this._pivot.y},set:function(t){this.setPivot(this.pivotX,t)},enumerable:!0,configurable:!0}),i.prototype.setPivot=function(t,e,i){void 0===i&&(i=!1),this._pivot.x==t&&this._pivot.y==e&&this._pivotAsAnchor==i||(this._pivot.set(t,e),this._pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(i.prototype,"pivotAsAnchor",{get:function(){return this._pivotAsAnchor},enumerable:!0,configurable:!0}),i.prototype.internalSetPivot=function(t,e,i){this._pivot.set(t,e),this._pivotAsAnchor=i,i&&this.handleXYChanged()},i.prototype.updatePivotOffset=function(){if(0!=this._pivot.x||0!=this._pivot.y&&this._displayObject.transform){var t=this.mapPivotWidth(this._pivot.x),e=this.mapPivotHeight(this._pivot.y);i.sHelperPoint.set(t,e),this._displayObject.transform.updateLocalTransform();var n=this._displayObject.localTransform,o=n.apply(i.sHelperPoint,i.sHelperPoint);o.x-=n.tx,o.y-=n.ty,this._pivotOffset.set(this._pivot.x*this._width-o.x,this._pivot.y*this._height-o.y)}else this._pivotOffset.set(0,0)},i.prototype.applyPivot=function(){0==this._pivot.x&&0==this._pivot.y||(this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(i.prototype,"touchable",{get:function(){return this._touchable},set:function(e){this._touchable!=e&&(this._touchable=e,this._displayObject.interactive=this._touchable,this.updateGear(3),this instanceof t.GImage||this instanceof t.GMovieClip||!(!(this instanceof t.GTextField)||this instanceof t.GTextInput||this instanceof t.GRichTextField)||this._displayObject instanceof PIXI.Container&&(this._displayObject.interactiveChildren=e))},enumerable:!0,configurable:!0}),i.prototype.onClick=function(e,i){this.on(t.InteractiveEvents.Click,e,i)},i.prototype.offClick=function(e,i){this.off(t.InteractiveEvents.Click,e,i)},Object.defineProperty(i.prototype,"grayed",{get:function(){return this._grayed},set:function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayedChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return!this._grayed&&this._touchable},set:function(t){this.grayed=!t,this.touchable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!=e&&(this._rotation=e,this._displayObject&&(this._displayObject.rotation=t.utils.NumberUtil.angleToRadian(this.normalizeRotation)),this.applyPivot(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"normalizeRotation",{get:function(){var t=this._rotation%360;return t>180?t-=360:t<-180&&(t+=360),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t,this.updateAlpha())},enumerable:!0,configurable:!0}),i.prototype.updateAlpha=function(){this._displayObject&&(this._displayObject.alpha=this._alpha),this.updateGear(3)},Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!=t&&(this._visible=t,this._displayObject&&(this._displayObject.visible=this._visible),this._parent&&(this._parent.childStateChanged(this),this._parent.setBoundsChangedFlag()),this.emit("__visibleChanged",this._visible,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"internalVisible",{get:function(){return this._internalVisible},set:function(t){t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"internalVisible2",{get:function(){return this._visible&&(!this._group||this._group.internalVisible2)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"internalVisible3",{get:function(){return this._visible&&this._internalVisible},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"finalVisible",{get:function(){return this._visible&&this._internalVisible&&(!this._group||this._group.finalVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortingOrder",{get:function(){return this._sortingOrder},set:function(t){if(t<0&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focusable",{get:function(){return this._focusable},set:function(t){this._focusable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this.root.focus==this},enumerable:!0,configurable:!0}),i.prototype.requestFocus=function(){for(var t=this;t&&!t._focusable;)t=t.parent;null!=t&&(this.root.focus=t)},Object.defineProperty(i.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._displayObject&&this._displayObject instanceof PIXI.Sprite?t.BlendModeMap[this._displayObject.blendMode]||"None":t.BlendModeMap[0]},set:function(e){if(e&&e.length&&this._displayObject&&this._displayObject instanceof PIXI.Sprite)for(var i=0;i<t.BlendModeMap.length;i++)if(t.BlendModeMap[i].toLowerCase()===e.toLowerCase())return void(this._displayObject.blendMode=i)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filters",{get:function(){return this._displayObject.filters},set:function(t){this._displayObject.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inContainer",{get:function(){return null!=this._displayObject&&null!=this._displayObject.parent},enumerable:!0,configurable:!0}),i.isDisplayObjectOnStage=function(e){if(!e||!e.parent)return!1;for(var i=e;null!=i;){if(i==t.GRoot.inst.nativeStage)return!0;i=i.parent}return!1},Object.defineProperty(i.prototype,"onStage",{get:function(){return i.isDisplayObjectOnStage(this._displayObject)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resourceURL",{get:function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(t){this._group!=t&&(null!=this._group&&this._group.setBoundsChangedFlag(),this._group=t,null!=this._group&&this._group.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),i.prototype.getGear=function(e){var i=this._gears[e];return null==i&&(this._gears[e]=i=t.GearBase.create(this,e),this._gears[e]=i),i},i.prototype.updateGear=function(t){if(!this._underConstruct&&!this._gearLocked){var e=this._gears[t];null!=e&&null!=e.controller&&e.updateState()}},i.prototype.checkGearController=function(t,e){return null!=this._gears[t]&&this._gears[t].controller==e},i.prototype.updateGearFromRelations=function(t,e,i){null!=this._gears[t]&&this._gears[t].updateFromRelations(e,i)},i.prototype.addDisplayLock=function(){var t=this._gears[0];if(t&&t.controller){var e=t.addLock();return this.checkGearDisplay(),e}return 0},i.prototype.releaseDisplayLock=function(t){var e=this._gears[0];e&&e.controller&&(e.releaseLock(t),this.checkGearDisplay())},i.prototype.hasGearController=function(t,e){return this._gears[t]&&this._gears[t].controller==e},i.prototype.checkGearDisplay=function(){if(!this._handlingController){var t=null==this._gears[0]||this._gears[0].connected;this._gears[8]&&(t=this._gears[8].evaluate(t)),t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this),this._group&&this._group.excludeInvisibles&&this._group.setBoundsChangedFlag())}},i.prototype.checkGearVisible=function(){if(!this._handlingController){var t=this._gears[0],e=!t||t.connected;e!=this._internalVisible&&(this._internalVisible=e,this._parent&&this._parent.childStateChanged(this))}},Object.defineProperty(i.prototype,"gearXY",{get:function(){return this.getGear(1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gearSize",{get:function(){return this.getGear(2)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gearLook",{get:function(){return this.getGear(3)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relations",{get:function(){return this._relations},enumerable:!0,configurable:!0}),i.prototype.addRelation=function(t,e,i){void 0===i&&(i=!1),this._relations.add(t,e,i)},i.prototype.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e)},Object.defineProperty(i.prototype,"displayObject",{get:function(){return this._displayObject},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){},i.prototype.setDisplayObject=function(t){this._displayObject!=t&&(this._displayObject&&delete this._displayObject.$owner,this._displayObject=t,this._displayObject.$owner=this)},Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},Object.defineProperty(i.prototype,"root",{get:function(){if(this instanceof t.GRoot)return this;for(var e=this._parent;e;){if(e instanceof t.GRoot)return e;e=e.parent}return t.GRoot.inst},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asCom",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asButton",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asLabel",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asProgress",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asTextField",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asRichTextField",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asTextInput",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asLoader",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asList",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asTree",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asGraph",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asGroup",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asSlider",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asComboBox",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asImage",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asMovieClip",{get:function(){return this},enumerable:!0,configurable:!0}),i.cast=function(t){return t.$owner},Object.defineProperty(i.prototype,"text",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"treeNode",{get:function(){return this._treeNode},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this.removeFromParent(),this._relations.dispose(),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._moving,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._end,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._moving2,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._end2,this),this._displayObject.destroy()},Object.defineProperty(i.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragBounds",{get:function(){return this._dragBounds},set:function(t){this._dragBounds=t},enumerable:!0,configurable:!0}),i.prototype.startDrag=function(t){void 0===t&&(t=-1),this.onStage&&this.dragBegin()},i.prototype.stopDrag=function(){this.dragEnd()},Object.defineProperty(i.prototype,"dragging",{get:function(){return i.draggingObject==this},enumerable:!0,configurable:!0}),i.prototype.localToGlobal=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),this._pivotAsAnchor&&(t+=this._pivot.x*this._width,e+=this._pivot.y*this._height),n||(n=i.sHelperPoint),n.x=t,n.y=e,this._displayObject.toGlobal(n,n)},i.prototype.globalToLocal=function(e,n,o){return void 0===e&&(e=0),void 0===n&&(n=0),o||(o=i.sHelperPoint),o.set(e,n),o=this._displayObject.toLocal(o,t.GRoot.inst.nativeStage),this._pivotAsAnchor&&(o.x-=this._pivot.x*this._width,o.y-=this._pivot.y*this._height),o},i.prototype.localToRoot=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var o=this.localToGlobal(e,i,n);return o.x/=t.GRoot.inst.contentScaleFactor,o.y/=t.GRoot.inst.contentScaleFactor,o},i.prototype.rootToLocal=function(e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),e*=t.GRoot.inst.contentScaleFactor,i*=t.GRoot.inst.contentScaleFactor,this.globalToLocal(e,i,n)},i.prototype.localToGlobalRect=function(t,e,n,o,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),null==r&&(r=i.sDragHelperRect);var s=this.localToGlobal(t,e);return r.x=s.x,r.y=s.y,r.width=n,r.height=o,r},i.prototype.globalToLocalRect=function(t,e,n,o,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),null==r&&(r=i.sDragHelperRect);var s=this.globalToLocal(t,e);return r.x=s.x,r.y=s.y,r.width=n,r.height=o,r},i.prototype.handleControllerChanged=function(t){this._handlingController=!0;for(var e=0;e<8;e++){var i=this._gears[e];null!=i&&i.controller==t&&i.apply()}this._handlingController=!1,this.checkGearVisible()},i.prototype.switchDisplayObject=function(e){if(e!=this._displayObject){var i=this._displayObject;if(this.inContainer){var n=this._displayObject.parent.getChildIndex(this._displayObject);this._displayObject.parent.addChildAt(e,n),this._displayObject.parent.removeChild(this._displayObject)}this._displayObject=e,this._displayObject.x=i.x,this._displayObject.y=i.y,this._displayObject.rotation=i.rotation,this._displayObject.alpha=i.alpha,this._displayObject.visible=i.visible,this._displayObject.scale.x=i.scale.x,this._displayObject.scale.y=i.scale.y,t.ToolSet.setColorFilter(this._displayObject,this._grayed),this._displayObject.interactive=i.interactive,this._displayObject instanceof PIXI.Container&&(this._displayObject.interactiveChildren=i.interactive)}},i.prototype.handleXYChanged=function(){if(this._displayObject){var t=this._x,e=this._y;this._pivotAsAnchor&&(t-=this._pivot.x*this._width,e-=this._pivot.y*this._height),this._pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this._displayObject.position.set(t+this._pivotOffset.x,e+this._pivotOffset.y)}},i.prototype.handleSizeChanged=function(){},i.prototype.handleScaleChanged=function(){this._displayObject&&this._displayObject.scale.set(this._scaleX,this._scaleY)},Object.defineProperty(i.prototype,"colorFilter",{get:function(){if(this._colorFilter)return this._colorFilter;if(this._colorFilter=new PIXI.filters.ColorMatrixFilter,this._displayObject){var t=this._displayObject.filters||[];t.push(this._colorFilter),this._displayObject.filters=t}return this._colorFilter},enumerable:!0,configurable:!0}),i.prototype.updateColorComponents=function(e,n,o,r){i._colorHelper||(i._colorHelper=new t.utils.ColorMatrix);var s=i._colorHelper;s.setColor(e,100*n,100*o,180*r);var a=this.colorFilter;a.enabled=!0,a.reset(),a.matrix=s.toArray(),this._lastColorComponents||(this._lastColorComponents=[]),this._lastColorComponents.length=0,this._lastColorComponents.push(s.brightness,s.contrast,s.saturation,s.hue)},i.prototype.handleGrayedChanged=function(){if(this._displayObject){var t=this.colorFilter;t.enabled=!0,this._grayed?t.blackAndWhite(!0):this._lastColorComponents&&this._lastColorComponents.length>=4?this.updateColorComponents(this._lastColorComponents[0],this._lastColorComponents[1],this._lastColorComponents[2],this._lastColorComponents[3]):t.enabled=!1}},i.prototype.handleAlphaChanged=function(){this._displayObject&&(this._displayObject.alpha=this._alpha)},i.prototype.handleVisibleChanged=function(){this._displayObject&&(this._displayObject.visible=this.internalVisible2),this instanceof t.GGroup&&this.handleVisibleChanged()},i.prototype.getProp=function(e){switch(e){case t.ObjectPropID.Text:return this.text;case t.ObjectPropID.Icon:return this.icon;case t.ObjectPropID.Color:case t.ObjectPropID.OutlineColor:return NaN;case t.ObjectPropID.Playing:return!1;case t.ObjectPropID.Frame:case t.ObjectPropID.DeltaTime:return 0;case t.ObjectPropID.TimeScale:return 1;case t.ObjectPropID.FontSize:return 0;case t.ObjectPropID.Selected:return!1;default:return}},i.prototype.setProp=function(e,i){switch(e){case t.ObjectPropID.Text:this.text=i;break;case t.ObjectPropID.Icon:this.icon=i}},i.prototype.constructFromResource=function(){},i.prototype.setup_beforeAdd=function(e,i){var n,o;e.seek(i,0),e.skip(5),t.Debug.log("setup_beforeAdd",this.name),this._id=e.readS(),this._name=e.readS(),n=e.readInt(),o=e.readInt(),this.setXY(n,o),e.readBool()&&(this.initWidth=e.readInt(),this.initHeight=e.readInt(),this.setSize(this.initWidth,this.initHeight,!0),t.Debug.log("","*init W H",this.initWidth,this.initHeight)),e.readBool()&&(this.minWidth=e.readInt(),this.maxWidth=e.readInt(),this.minHeight=e.readInt(),this.maxHeight=e.readInt(),t.Debug.log("","*init Max W H Min W H",this.maxWidth,this.maxHeight,this.minWidth,this.minHeight)),e.readBool()&&(n=e.readFloat(),o=e.readFloat(),this.setScale(n,o),t.Debug.log("","*Scale X Y",n,o)),e.readBool()&&(n=e.readFloat(),o=e.readFloat(),this.setSkew(n,o),t.Debug.log("","*Skew X Y",n,o)),e.readBool()&&(n=e.readFloat(),o=e.readFloat(),this.setPivot(n,o,e.readBool()),t.Debug.log("","*Pivot X Y",n,o)),1!=(n=e.readFloat())&&(this.alpha=n,t.Debug.log("","*alpha ",n)),0!=(n=e.readFloat())&&(this.rotation=n,t.Debug.log("","*rotation ",n)),e.readBool()||(this.visible=!1,t.Debug.log("","*visible ",this.visible)),e.readBool()||(this.touchable=!1,t.Debug.log("","*touchable ",this.touchable)),e.readBool()&&(this.grayed=!0,t.Debug.log("","*grayed ",this.grayed));var r=e.readByte();if(this.blendMode=t.BlendModeMap[r]||"Normal",t.Debug.log("","*blendmode ",this.blendMode),1==e.readByte()&&this._displayObject){var s=e.readFloat(),a=e.readFloat(),h=e.readFloat(),l=e.readFloat();t.ToolSet.setColorFilter(this._displayObject,[s,a,h,l])}var u=e.readS();null!=u&&(this.data=u),t.Debug.log("","*data ",this.data)},i.prototype.setup_afterAdd=function(e,i){e.seek(i,1),t.Debug.log("setup_beforeAdd",this.name);var n=e.readS();null!=n&&(this.tooltips=n,t.Debug.log("","*tooltips"+n));var o=e.readShort();o>=0&&(this.group=this.parent.getChildAt(o),t.Debug.log("","*group")),e.seek(i,2);var r=e.readShort();t.Debug.log("","*Gear count ",r);for(var s=0;s<r;s++){var a=e.readShort();a+=e.position;var h=this.getGear(e.readByte());h.setup(e),t.Debug.log("","","*Gear ",h),e.position=a}},i.prototype.initDrag=function(){this._draggable?this.on(t.InteractiveEvents.Down,this._touchBegin,this):this.off(t.InteractiveEvents.Down,this._touchBegin,this)},i.prototype.dragBegin=function(){null!=i.draggingObject&&i.draggingObject.stopDrag(),i.sGlobalDragStart.x=t.GRoot.globalMouseStatus.mouseX,i.sGlobalDragStart.y=t.GRoot.globalMouseStatus.mouseY,this.localToGlobalRect(0,0,this.width,this.height,i.sGlobalRect),i.draggingObject=this,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this._moving2,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this._end2,this)},i.prototype.dragEnd=function(){i.draggingObject==this&&(t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._moving2,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._end2,this),i.draggingObject=null),i._dragBeginCancelled=!0},i.prototype.reset=function(){t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._moving,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._end,this)},i.prototype._touchBegin=function(e){null==this._touchDownPoint&&(this._touchDownPoint=new PIXI.Point),this._touchDownPoint.x=e.data.global.x,this._touchDownPoint.y=e.data.global.y,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this._moving,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this._end,this)},i.prototype._end=function(t){this.reset()},i.prototype._moving=function(e){var n=t.UIConfig.touchDragSensitivity;null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-e.data.global.x)<n&&Math.abs(this._touchDownPoint.y-e.data.global.y)<n||(this.reset(),i._dragBeginCancelled=!1,e.currentTarget=this._displayObject,this._displayObject.emit("__dragStart",e,this),i._dragBeginCancelled||this.dragBegin())},i.prototype._moving2=function(e){var n=e.data.global.x-i.sGlobalDragStart.x+i.sGlobalRect.x,o=e.data.global.y-i.sGlobalDragStart.y+i.sGlobalRect.y;if(null!=this._dragBounds){var r=t.GRoot.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,i.sDragHelperRect);n<r.x?n=r.x:n+i.sGlobalRect.width>r.right&&(n=r.right-i.sGlobalRect.width)<r.x&&(n=r.x),o<r.y?o=r.y:o+i.sGlobalRect.height>r.bottom&&(o=r.bottom-i.sGlobalRect.height)<r.y&&(o=r.y)}i.sUpdatingWhileDragging=!0,i.sHelperPoint.x=n,i.sHelperPoint.y=o;var s=this.parent.globalToLocal(n,o,i.sHelperPoint);this.setXY(Math.round(s.x),Math.round(s.y)),i.sUpdatingWhileDragging=!1,e.currentTarget=this._displayObject,this._displayObject.emit("__dragMoving",e,this)},i.prototype._end2=function(t){i.draggingObject==this&&(this.stopDrag(),t.currentTarget=this._displayObject,this._displayObject.emit("__dragEnd",t,this))},i._gInstanceCounter=0,i.XY_CHANGED="__xyChanged",i.SIZE_CHANGED="__sizeChanged",i.SIZE_DELAY_CHANGE="__sizeDelayChange",i.GEAR_STOP="gearStop",i.sGlobalDragStart=new PIXI.Point,i.sGlobalRect=new PIXI.Rectangle,i.sHelperPoint=new PIXI.Point,i.sDragHelperRect=new PIXI.Rectangle,i}(t.UIEventProxy);t.GObject=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._selectedIndex=0,t._previousIndex=0,t.changing=!1,t._pageIds=[],t._pageNames=[],t._selectedIndex=-1,t._previousIndex=-1,t}return __extends(i,e),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.emit("__stateChanged",this),this.changing=!1}},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.changing=!1}},Object.defineProperty(i.prototype,"previsousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedPage",{get:function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},set:function(t){this.selectedIndex=Math.max(0,this._pageNames.indexOf(t))},enumerable:!0,configurable:!0}),i.prototype.setSelectedPage=function(t){this.setSelectedIndex(Math.max(0,this._pageNames.indexOf(t)))},Object.defineProperty(i.prototype,"previousPage",{get:function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._pageIds.length},enumerable:!0,configurable:!0}),i.prototype.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t]},i.prototype.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length)},i.prototype.addPageAt=function(t,e){void 0===e&&(e=0);var n=""+i._nextPageId++;e==this._pageIds.length?(this._pageIds.push(n),this._pageNames.push(t)):(this._pageIds.splice(e,0,n),this._pageNames.splice(e,0,t))},i.prototype.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this))},i.prototype.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this)},i.prototype.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this.parent.applyController(this)},i.prototype.hasPage=function(t){return this._pageNames.indexOf(t)>=0},i.prototype.getPageIndexById=function(t){return this._pageIds.indexOf(t)},i.prototype.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null},i.prototype.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null},i.prototype.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t]},Object.defineProperty(i.prototype,"selectedPageId",{get:function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},set:function(t){this.selectedIndex=this._pageIds.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"oppositePageId",{set:function(t){this._pageIds.indexOf(t)>0?this.selectedIndex=0:this._pageIds.length>1&&(this.selectedIndex=1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"previousPageId",{get:function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]},enumerable:!0,configurable:!0}),i.prototype.executeActions=function(){var t=this;this._actions&&this._actions.length>0&&this._actions.forEach(function(e){e.execute(t,t.previousPageId,t.selectedPageId)})},i.prototype.setup=function(e){var i,n,o=e.position;e.seek(o,0),this.name=e.readS(),this.autoRadioGroupDepth=e.readBool(),e.seek(o,1);var r=e.readShort();for(i=0;i<r;i++)this._pageIds.push(e.readS()),this._pageNames.push(e.readS());var s=0;if(e.version>=2)switch(e.readByte()){case 1:s=e.readShort();break;case 2:-1==(s=this._pageNames.indexOf(t.UIPackage.branch))&&(s=0);break;case 3:-1==(s=this._pageNames.indexOf(t.UIPackage.getVar(e.readS())))&&(s=0)}if(e.seek(o,2),(r=e.readShort())>0)for(this._actions=this._actions||[],i=0;i<r;i++){n=e.readShort(),n+=e.position;var a=t.Action.createAction(e.readByte());a.setup(e),this._actions.push(a),e.position=n}null!=this.parent&&this._pageIds.length>0?this._selectedIndex=s:this._selectedIndex=-1},i.prototype.setupv1=function(e){var i=this;this.name=e.attributes.name,this.autoRadioGroupDepth="true"==e.attributes.autoRadioGroupDepth;var n=e.attributes.pages;if(n)for(var o=n.split(","),r=o.length,s=0;s<r;s+=2)this._pageIds.push(o[s]),this._pageNames.push(o[s+1]);var a,h,l=e.children;(l.length>0&&(this._actions=this._actions||[],l.forEach(function(e){var n=t.Action.create(e.attributes.type);n.setupv1(e),i._actions.push(n)})),n=e.attributes.transitions)&&(this._actions=this._actions||[],n.split(",").forEach(function(e){if(e&&e.length){var n=new t.PlayTransitionAction;a=e.indexOf("="),n.transitionName=e.substr(a+1),e=e.substring(0,a),a=e.indexOf("-"),(h=parseInt(e.substring(a+1)))<i._pageIds.length&&(n.toPage=[i._pageIds[h]]),"*"!=(e=e.substring(0,a))&&(h=parseInt(e))<i._pageIds.length&&(n.fromPage=[i._pageIds[h]]),n.stopOnExit=!0,i._actions.push(n)}}));this.parent&&this._pageIds.length>0?this._selectedIndex=0:this._selectedIndex=-1},i._nextPageId=0,i}(PIXI.utils.EventEmitter);t.Controller=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._sortingChildCount=0,i._childrenRenderOrder=t.ChildrenRenderOrder.Ascent,i._apexIndex=0,i._children=[],i._controllers=[],i._transitions=[],i._margin=new t.utils.Margin,i._alignOffset=new PIXI.Point,i}return __extends(i,e),i.prototype.createDisplayObject=function(){this._rootContainer=new t.UIContainer(this),this.setDisplayObject(this._rootContainer),this._container=this._rootContainer},i.prototype.dispose=function(){t.GTimer.inst.remove(this._validate,this),this.off("added",this.___added,this),this.off("removed",this.___removed,this),this._transitions.forEach(function(t){t.dispose()});for(var i=this._children.length-1;i>=0;--i){var n=this._children[i];n.parent=null,n.dispose()}this._boundsChanged=!1,this._scrollPane&&this._scrollPane.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"displayListContainer",{get:function(){return this._container},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){return this.addChildAt(t,this._children.length),t},i.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw new Error("Invalid child");var i=this._children.length;if(e>=0&&e<=i){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var n=this._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this._sortingChildCount>0&&e>n-this._sortingChildCount&&(e=n-this._sortingChildCount),e==n?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw new Error("Invalid child index")},i.prototype.getInsertPosForSortingChild=function(t){var e=this._children.length,i=0;for(i=0;i<e;i++){var n=this._children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},i.prototype.removeChild=function(t,e){void 0===e&&(e=!1);var i=this._children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},i.prototype.removeChildAt=function(t,e){if(void 0===e&&(e=!1),t>=0&&t<this.numChildren){var i=this._children[t];return i.parent=null,0!=i.sortingOrder&&this._sortingChildCount--,this._children.splice(t,1),i.inContainer&&this._container.removeChild(i.displayObject),!0===e&&i.dispose(),this.setBoundsChangedFlag(),i}throw new Error("Invalid child index")},i.prototype.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;n<=e;++n)this.removeChildAt(t,i)},i.prototype.getChildAt=function(t){if(void 0===t&&(t=0),t>=0&&t<this.numChildren)return this._children[t];throw new Error("Invalid child index")},i.prototype.getChild=function(t){for(var e=this._children.length,i=0;i<e;++i)if(this._children[i].name==t)return this._children[i];return null},i.prototype.getChildByPath=function(t){for(var e,n=t.split("."),o=n.length,r=this,s=0;s<o&&(e=r.getChild(n[s]));++s)if(s!=o-1){if(!(r instanceof i)){e=null;break}r=e}return e},i.prototype.getVisibleChild=function(t){for(var e=this._children.length,i=0;i<e;++i){var n=this._children[i];if(n.internalVisible&&n.internalVisible&&n.name==t)return n}return null},i.prototype.getChildInGroup=function(t,e){for(var i=this._children.length,n=0;n<i;++n){var o=this._children[n];if(o.group==e&&o.name==t)return o}return null},i.prototype.getChildById=function(t){for(var e=this._children.length,i=0;i<e;++i)if(this._children[i].id==t)return this._children[i];return null},i.prototype.getChildIndex=function(t){return this._children.indexOf(t)},i.prototype.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this._children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0==t.sortingOrder){var n=this._children.length;this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),this._setChildIndex(t,i,e)}},i.prototype.setChildIndexBefore=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0!=t.sortingOrder)return i;var n=this._children.length;return this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),i<e?this._setChildIndex(t,i,e-1):this._setChildIndex(t,i,e)},i.prototype._setChildIndex=function(t,e,i){void 0===i&&(i=0);var n=this._children.length;if(i>n&&(i=n),e==i)return e;if(this._children.splice(e,1),this._children.splice(i,0,t),t.inContainer){for(var o=0,r=this._container.children.length,s=0;s<i;s++){this._children[s].inContainer&&o++}o==r&&o--,this._container.setChildIndex(t.displayObject,o),this.setBoundsChangedFlag()}return i},i.prototype.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw new Error("no such child found");this.swapChildrenAt(i,n)},i.prototype.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),i.prototype.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},i.prototype.addController=function(t){this._controllers.push(t),t.parent=this,this.applyController(t)},i.prototype.getControllerAt=function(t){return this._controllers[t]},i.prototype.getController=function(t){for(var e=this._controllers.length,i=0;i<e;++i){var n=this._controllers[i];if(n.name==t)return n}return null},i.prototype.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t.parent=null,this._controllers.splice(e,1),this._children.forEach(function(e){e.handleControllerChanged(t)})},Object.defineProperty(i.prototype,"controllers",{get:function(){return this._controllers},enumerable:!0,configurable:!0}),i.prototype.childStateChanged=function(e){var i=this;if(!this._buildingDisplayList)if(e instanceof t.GGroup)this._children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);else if(e.displayObject)if(e.finalVisible){if(!e.displayObject.parent){for(var n=0,o=this._children.length,r=0;r<o;r++){var s=this._children[r];if(s==e)break;s.displayObject&&s.displayObject.parent&&n++}this._container.addChildAt(e.displayObject,n)}}else e.displayObject.parent&&this._container.removeChild(e.displayObject)},i.prototype.applyController=function(t){this._applyingController=t,this._children.forEach(function(e){e.handleControllerChanged(t)}),this._applyingController=null,t.executeActions()},i.prototype.applyAllControllers=function(){var t=this;this._controllers.forEach(function(e){t.applyController(e)},this)},i.prototype.adjustRadioGroupDepth=function(e,i){var n=-1,o=-1;this._children.forEach(function(r,s){r==e?n=s:r instanceof t.GButton&&r.relatedController==i&&s>o&&(o=s)}),n<o&&(null!=this._applyingController&&this._children[o].handleControllerChanged(this._applyingController),this.swapChildrenAt(n,o))},i.prototype.getTransitionAt=function(t){return this._transitions[t]},i.prototype.getTransition=function(t){for(var e=this._transitions.length,i=0;i<e;++i){var n=this._transitions[i];if(n.name==t)return n}return null},i.prototype.isChildInView=function(t){return null!=this._rootContainer.scrollRect?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null==this._scrollPane||this._scrollPane.isChildInView(t)},i.prototype.getFirstChildInView=function(){for(var t=this._children.length,e=0;e<t;++e){var i=this._children[e];if(this.isChildInView(i))return e}return-1},Object.defineProperty(i.prototype,"scrollPane",{get:function(){return this._scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opaque",{get:function(){return this._opaque},set:function(t){this._opaque!=t&&(this._opaque=t,this._opaque?this.updateOpaque():this._rootContainer.hitArea&&this._rootContainer.hitArea instanceof PIXI.Rectangle&&(this._rootContainer.hitArea.width=this._rootContainer.hitArea.height=0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{get:function(){return this._margin},set:function(t){this._margin.copy(t),null!=this._rootContainer.scrollRect&&(this._container.x=this._margin.left+this._alignOffset.x,this._container.y=this._margin.top+this._alignOffset.y),this.handleSizeChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"apexIndex",{get:function(){return this._apexIndex},set:function(e){this._apexIndex!=e&&(this._apexIndex=e,this._childrenRenderOrder==t.ChildrenRenderOrder.Arch&&this.buildNativeDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this._rootContainer.mask},set:function(t){t&&(t instanceof PIXI.Container&&(t.interactive=t.interactiveChildren=!1),t instanceof PIXI.Graphics&&(t.isMask=!0),this._rootContainer.mask=t)},enumerable:!0,configurable:!0}),i.prototype.updateOpaque=function(){this._rootContainer.hitArea||(this._rootContainer.hitArea=new PIXI.Rectangle);var t=this._rootContainer.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.updateScrollRect=function(){var t=this._rootContainer.scrollRect;null==t&&(t=new PIXI.Rectangle);var e=this.width-this._margin.right,i=this.height-this._margin.bottom;t.x=t.y=0,t.width=e,t.height=i,this._rootContainer.scrollRect=t},i.prototype.setupScroll=function(e){this._rootContainer==this._container&&(this._container=new PIXI.Container,this._rootContainer.addChild(this._container)),this._scrollPane=new t.ScrollPane(this),this._scrollPane.setup(e),this.setBoundsChangedFlag()},i.prototype.setupOverflow=function(e){e==t.OverflowType.Hidden?(this._rootContainer==this._container&&(this._container=new PIXI.Container,this._rootContainer.addChild(this._container)),this.updateScrollRect(),this._container.x=this._margin.left,this._container.y=this._margin.top):0==this._margin.left&&0==this._margin.top||(this._rootContainer==this._container&&(this._container=new PIXI.Container,this._rootContainer.addChild(this._container)),this._container.x=this._margin.left,this._container.y=this._margin.top),this.setBoundsChangedFlag()},i.prototype.handleSizeChanged=function(){this._scrollPane?this._scrollPane.onOwnerSizeChanged():null!=this._rootContainer.scrollRect&&this.updateScrollRect(),this._opaque&&this.updateOpaque()},i.prototype.handleGrayedChanged=function(){var t=this.getController("grayed");null!=t?t.selectedIndex=this.grayed?1:0:e.prototype.handleGrayedChanged.call(this)},i.prototype.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,t.GTimer.inst.callLater(this._validate,this)))},i.prototype._validate=function(t){this._boundsChanged&&this.updateBounds()},i.prototype.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()},i.prototype.updateBounds=function(){var t=0,e=0,i=0,n=0;if(this._children.length>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var o=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=0;this._children.forEach(function(i){i.ensureSizeCorrect(),(s=i.x)<t&&(t=s),(s=i.y)<e&&(e=s),(s=i.x+i.actualWidth)>o&&(o=s),(s=i.y+i.actualHeight)>r&&(r=s)}),i=o-t,n=r-e}this.setBounds(t,e,i,n)},i.prototype.setBounds=function(t,e,i,n){void 0===n&&(n=0),this._boundsChanged=!1,this._scrollPane&&this._scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},Object.defineProperty(i.prototype,"viewWidth",{get:function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},set:function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewHeight",{get:function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},set:function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom},enumerable:!0,configurable:!0}),i.prototype.getSnappingPosition=function(t,e,i){i||(i=new PIXI.Point);var n=this._children.length;if(n<=0)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var o=null,r=null,s=0;if(0!=e){for(;s<n;s++)if(e<(o=this._children[s]).y){if(0==s){e=0;break}e=e<(r=this._children[s-1]).y+r.actualHeight/2?r.y:o.y;break}s==n&&(e=o.y)}if(0!=t){for(s>0&&s--;s<n;s++)if(t<(o=this._children[s]).x){if(0==s){t=0;break}t=t<(r=this._children[s-1]).x+r.actualWidth/2?r.x:o.x;break}s==n&&(t=o.x)}return i.x=t,i.y=e,i},i.prototype.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var n=this._children.indexOf(t),o=this.getInsertPosForSortingChild(t);n<o?this._setChildIndex(t,n,o-1):this._setChildIndex(t,n,o)}},i.prototype.constructFromResource=function(){this.constructFromResource2(null,0)},i.prototype.constructFromResource2=function(e,i){var n,o,r,s,a,h,l,u,c=this.packageItem.getBranch();t.Debug.log("constructFromResource2"),c.decoded||(c.decoded=!0,t.TranslationHelper.translateComponent(c));var p=c.rawData;p.seek(0,0),this._underConstruct=!0,this.sourceWidth=p.readInt(),this.sourceHeight=p.readInt(),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),p.readBool()&&(this.minWidth=p.readInt(),this.maxWidth=p.readInt(),this.minHeight=p.readInt(),this.maxHeight=p.readInt()),p.readBool()&&(a=p.readFloat(),h=p.readFloat(),this.internalSetPivot(a,h,p.readBool())),p.readBool()&&(this._margin.top=p.readInt(),this._margin.bottom=p.readInt(),this._margin.left=p.readInt(),this._margin.right=p.readInt());var _=p.readByte();if(_==t.OverflowType.Scroll){var d=p.position;p.seek(0,7),this.setupScroll(p),p.position=d}else this.setupOverflow(_);p.readBool()&&p.skip(8),this._buildingDisplayList=!0,p.seek(0,1);var f,g=p.readShort();for(n=0;n<g;n++){s=p.readShort(),s+=p.position;var y=new t.Controller;this._controllers.push(y),y.parent=this,y.setup(p),p.position=s}p.seek(0,2);var m=p.readShort();for(n=0;n<m;n++){if(o=p.readShort(),r=p.position,null!=e)f=e[i+n];else{p.seek(r,0);var b,v=p.readByte(),w=p.readS(),C=p.readS(),x=null;if(null!=w)x=null!=(b=null!=C?t.UIPackage.getById(C):c.owner)?b.getItemById(w):null;null!=x?(f=t.UIObjectFactory.newObject(x)).constructFromResource():f=t.UIObjectFactory.newObject2(v)}f._underConstruct=!0,f.setup_beforeAdd(p,r),f.parent=this,this._children.push(f),p.position=r+o}for(p.seek(0,3),this.relations.setup(p,!0),p.seek(0,2),p.skip(2),n=0;n<m;n++)s=p.readShort(),s+=p.position,p.seek(p.position,3),this._children[n].relations.setup(p,!1),p.position=s;for(p.seek(0,2),p.skip(2),n=0;n<m;n++)s=p.readShort(),s+=p.position,(f=this._children[n]).setup_afterAdd(p,p.position),f._underConstruct=!1,p.position=s;p.seek(0,4),p.skip(2),this.opaque=p.readBool();var I=p.readShort();-1!=I&&(this.mask=this.getChildAt(I).displayObject,p.readBool());var S=p.readS();l=p.readInt(),u=p.readInt(),null!=S?null!=(x=c.owner.getItemById(S))&&null!=x.pixelHitTestData&&(this._rootContainer.hitArea=new t.PixelHitTest(x.pixelHitTestData,l,u)):0!=l&&-1!=u&&(this._rootContainer.hitArea=this.getChildAt(u).displayObject),p.seek(0,5);var P=p.readShort();for(n=0;n<P;n++){s=p.readShort(),s+=p.position;var T=new t.Transition(this);T.setup(p),this._transitions.push(T),p.position=s}this._transitions.length>0&&(this.on("added",this.___added,this),this.on("removed",this.___removed,this)),this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,this.buildNativeDisplayList(),this.setBoundsChangedFlag(),c.objectType!=t.ObjectType.Component&&this.constructExtension(p),this.onConstruct()},i.prototype.constructExtension=function(t){},i.prototype.onConstruct=function(){this.constructFromXML(null)},i.prototype.buildNativeDisplayList=function(){var e,i,n=this._children.length;if(0!=n)switch(this._childrenRenderOrder){case t.ChildrenRenderOrder.Ascent:for(e=0;e<n;e++)null!=(i=this._children[e]).displayObject&&i.internalVisible&&this._container.addChild(i.displayObject);break;case t.ChildrenRenderOrder.Descent:for(e=n-1;e>=0;e--)null!=(i=this._children[e]).displayObject&&i.internalVisible&&this._container.addChild(i.displayObject);break;case t.ChildrenRenderOrder.Arch:var o=t.ToolSet.clamp(this._apexIndex,0,n);for(e=0;e<o;e++)null!=(i=this._children[e]).displayObject&&i.internalVisible&&this._container.addChild(i.displayObject);for(e=n-1;e>=o;e--)null!=(i=this._children[e]).displayObject&&i.internalVisible&&this._container.addChild(i.displayObject)}},i.prototype.appendChildrenList=function(){var t=this;this._children.forEach(function(e){null!=e.displayObject&&e.finalVisible&&t._container.addChild(e.displayObject)},this)},i.prototype.constructFromXML=function(t){},i.prototype.___added=function(t){for(var e=this._transitions.length,i=0;i<e;++i)this._transitions[i].onOwnerAddedToStage()},i.prototype.___removed=function(t){for(var e=this._transitions.length,i=0;i<e;++i)this._transitions[i].onOwnerRemovedFromStage()},i}(t.GObject);t.GComponent=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._mode=t.ButtonMode.Common,i._title="",i._icon="",i._pageOption=new t.PageOption,i._changeStateOnClick=!0,i._downEffect=0,i._downEffectValue=.8,i}return __extends(i,e),i.prototype.setDisplayObject=function(t){e.prototype.setDisplayObject.call(this,t),this._displayObject.buttonMode=!0},Object.defineProperty(i.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIcon",{get:function(){return this._selectedIcon},set:function(t){this._selectedIcon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedTitle",{get:function(){return this._selectedTitle},set:function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this._titleObject)?this._titleObject.titleColor:0},set:function(e){t.isColorableTitle(this._titleObject)&&(this._titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundVolumeScale",{get:function(){return this._soundVolumeScale},set:function(t){this._soundVolumeScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return t.isColorableTitle(this._titleObject)?this._titleObject.fontSize:0},set:function(e){t.isColorableTitle(this._titleObject)&&(this._titleObject.fontSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._mode!=t.ButtonMode.Common&&this._selected!=e){if(this._selected=e,this.grayed&&this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this._selected?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this._selected?this.setState(this._over?i.SELECTED_OVER:i.DOWN):this.setState(this._over?i.OVER:i.UP),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var n=this._selected?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=n)}this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController.autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):this._mode==t.ButtonMode.Check&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode!=e&&(e==t.ButtonMode.Common&&(this.selected=!1),this._mode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relatedController",{get:function(){return this._relatedController},set:function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageOption",{get:function(){return this._pageOption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"changeStateOnClick",{get:function(){return this._changeStateOnClick},set:function(t){this._changeStateOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linkedPopup",{get:function(){return this._linkedPopup},set:function(t){this._linkedPopup=t},enumerable:!0,configurable:!0}),i.prototype.getTextField=function(){return this._titleObject instanceof t.GTextField?this._titleObject:this._titleObject instanceof t.GLabel?this._titleObject.getTextField():this._titleObject instanceof i?this._titleObject.getTextField():null},i.prototype.addStateListener=function(t,e){this.on("__stateChanged",t,e)},i.prototype.removeStateListener=function(t,e){this.off("__stateChanged",t,e)},i.prototype.fireClick=function(e){void 0===e&&(e=!0),e&&this._mode==t.ButtonMode.Common&&(this.setState(i.OVER),t.GTimer.inst.add(100,1,this.setState,this,i.DOWN),t.GTimer.inst.add(200,1,this.setState,this,i.UP)),this._click(null)},i.prototype.setState=function(e){if(this._buttonController&&(this._buttonController.selectedPage=e),1==this._downEffect)if(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED){var n=255*this._downEffectValue,o=(n<<16)+(n<<8)+n;this._children.forEach(function(e){t.isColorGear(e)&&(e.color=o)})}else this._children.forEach(function(e){t.isColorGear(e)&&(e.color=16777215)});else 2==this._downEffect&&(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED?this.setScale(this._downEffectValue,this._downEffectValue):this.setScale(1,1))},i.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._relatedController==t&&(this.selected=this._pageOption.id==t.selectedPageId)},i.prototype.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this.grayed?this._selected&&this._buttonController.hasPage(i.SELECTED_DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this._selected?this.setState(i.DOWN):this.setState(i.UP):e.prototype.handleGrayedChanged.call(this)},i.prototype.constructExtension=function(e){e.seek(0,6),this._mode=e.readByte();var n=e.readS();n&&(this._sound=n),this._soundVolumeScale=e.readFloat(),this._downEffect=e.readByte(),this._downEffectValue=e.readFloat(),2==this._downEffect&&this.setPivot(.5,.5,this.pivotAsAnchor),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),null!=this._titleObject&&(this._title=this._titleObject.text),null!=this._iconObject&&(this._icon=this._iconObject.icon),this._mode==t.ButtonMode.Common&&this.setState(i.UP),this.on(t.InteractiveEvents.Over,this._rollover,this),this.on(t.InteractiveEvents.Out,this._rollout,this),this.on(t.InteractiveEvents.Down,this._mousedown,this),this.on(t.InteractiveEvents.Click,this._click,this),t.Debug.log("button",this.title,this.width,this.height)},i.prototype.setup_afterAdd=function(t,i){var n,o;(e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6))&&(t.readByte()==this.packageItem.objectType&&(null!=(n=t.readS())&&(this.title=n),null!=(n=t.readS())&&(this.selectedTitle=n),null!=(n=t.readS())&&(this.icon=n),null!=(n=t.readS())&&(this.selectedIcon=n),t.readBool()&&(this.titleColor=t.readColor()),0!=(o=t.readInt())&&(this.titleFontSize=o),(o=t.readShort())>=0&&(this._relatedController=this.parent.getControllerAt(o)),this._relatedPageId=t.readS(),null!=(n=t.readS())&&(this._sound=n),t.readBool()&&(this._soundVolumeScale=t.readFloat()),this.selected=t.readBool()))},i.prototype._rollover=function(t){this._buttonController&&this._buttonController.hasPage(i.OVER)&&(this._over=!0,this._down||this.setState(this._selected?i.SELECTED_OVER:i.OVER))},i.prototype._rollout=function(t){this._buttonController&&this._buttonController.hasPage(i.OVER)&&(this._over=!1,this._down||this.setState(this._selected?i.DOWN:i.UP))},i.prototype._mousedown=function(e){this._down=!0,t.GRoot.inst.on(t.InteractiveEvents.Up,this._mouseup,this),this._mode==t.ButtonMode.Common&&(this.grayed&&this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DOWN)),null!=this._linkedPopup&&(this._linkedPopup instanceof t.Window?this._linkedPopup.toggleVisible():this.root.togglePopup(this._linkedPopup,this))},i.prototype._mouseup=function(e){this._down&&(t.GRoot.inst.off(t.InteractiveEvents.Up,this._mouseup,this),this._down=!1,this._mode==t.ButtonMode.Common&&(this.grayed&&this._buttonController&&this._buttonController.hasPage(i.DISABLED)?this.setState(i.DISABLED):this._over?this.setState(i.OVER):this.setState(i.UP)))},i.prototype._click=function(e){this._changeStateOnClick&&(this._mode==t.ButtonMode.Check?(this.selected=!this._selected,this.emit("__stateChanged",this,e)):this._mode==t.ButtonMode.Radio&&(this._selected||(this.selected=!0,this.emit("__stateChanged",this,e))))},i.prototype.dispose=function(){t.GTimer.inst.remove(this.setState,this),t.GRoot.inst.off(t.InteractiveEvents.Up,this._mouseup,this),e.prototype.dispose.call(this)},i.UP="up",i.DOWN="down",i.OVER="over",i.SELECTED_OVER="selectedOver",i.DISABLED="disabled",i.SELECTED_DISABLED="selectedDisabled",i}(t.GComponent);t.GButton=e}(fgui||(fgui={})),function(t){t.isColorableTitle=function(t){return t&&"titleColor"in t&&"fontSize"in t}}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._visibleItemCount=0,i._selectedIndex=0,i._popupDirection=t.PopupDirection.Down,i._visibleItemCount=t.UIConfig.defaultComboBoxVisibleItemCount,i._itemsUpdated=!0,i._selectedIndex=-1,i._items=[],i._values=[],i}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this._titleObject?this._titleObject.text:null},set:function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._iconObject?this._iconObject.icon:null},set:function(t){this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this._titleObject)?this._titleObject.titleColor:0},set:function(e){t.isColorableTitle(this._titleObject)&&(this._titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleItemCount",{get:function(){return this._visibleItemCount},set:function(t){this._visibleItemCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupDirection",{get:function(){return this._popupDirection},set:function(t){this._popupDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(t){t?this._items=t.concat():this._items.length=0,this._items.length>0?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1),this._itemsUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icons",{get:function(){return this._icons},set:function(t){this._icons=t,null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){t?this._values=t.concat():this._values.length=0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.selectedIndex>=0&&this.selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._values[this._selectedIndex]},set:function(t){this.selectedIndex=this._values.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionController",{get:function(){return this._selectionController},set:function(t){this._selectionController=t},enumerable:!0,configurable:!0}),i.prototype.getTextField=function(){return this._titleObject instanceof t.GTextField?this._titleObject:this._titleObject instanceof t.GLabel?this._titleObject.getTextField():this._titleObject instanceof t.GButton?this._titleObject.getTextField():null},i.prototype.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},i.prototype.getProp=function(i){switch(i){case t.ObjectPropID.Color:return this.titleColor;case t.ObjectPropID.OutlineColor:var n=this.getTextField();return n?n.strokeColor:0;case t.ObjectPropID.FontSize:return(n=this.getTextField())?n.fontSize:0;default:return e.prototype.getProp.call(this,i)}},i.prototype.setProp=function(i,n){switch(i){case t.ObjectPropID.Color:this.titleColor=n;break;case t.ObjectPropID.OutlineColor:var o=this.getTextField();o&&(o.strokeColor=n);break;case t.ObjectPropID.FontSize:(o=this.getTextField())&&(o.fontSize=n);break;default:e.prototype.setProp.call(this,i,n)}},i.prototype.constructExtension=function(e){var i;if(this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),i=e.readS()){if(this.dropdown=t.UIPackage.createObjectFromURL(i),!this.dropdown)return void console.error("下拉框必须为元件");if(this.dropdown.name="this.dropdown",this._list=this.dropdown.getChild("list").asList,null==this._list)return void console.error(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");this._list.on("__itemClick",this.__clickItem,this),this._list.addRelation(this.dropdown,t.RelationType.Width),this._list.removeRelation(this.dropdown,t.RelationType.Height),this.dropdown.addRelation(this._list,t.RelationType.Height),this.dropdown.removeRelation(this._list,t.RelationType.Width),this.dropdown.displayObject.on("removed",this.__popupWinClosed,this)}PIXI.utils.isMobile.any||(this.on(t.InteractiveEvents.Over,this.__rollover,this),this.on(t.InteractiveEvents.Out,this.__rollout,this)),this.on(t.InteractiveEvents.Down,this.__mousedown,this)},i.prototype.dispose=function(){t.GTimer.inst.remove(this.delayedClickItem,this),this._list.off("__itemClick",this.__clickItem,this),this.dropdown.off("removed",this.__popupWinClosed,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._mouseup,this),this.__popupWinClosed(null),this.dropdown&&(this.dropdown.dispose(),this.dropdown=null),e.prototype.dispose.call(this)},i.prototype.setup_afterAdd=function(t,i){if(e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType){var n,o,r,s,a=t.readShort();for(n=0;n<a;n++)r=t.readShort(),r+=t.position,this._items[n]=t.readS(),this._values[n]=t.readS(),null!=(s=t.readS())&&(null==this._icons&&(this._icons=new Array),this._icons[n]=s),t.position=r;null!=(s=t.readS())?(this.text=s,this._selectedIndex=this._items.indexOf(s)):this._items.length>0?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1,null!=(s=t.readS())&&(this.icon=s),t.readBool()&&(this.titleColor=t.readColor()),(o=t.readInt())>0&&(this._visibleItemCount=o),this._popupDirection=t.readByte(),(o=t.readShort())>=0&&(this._selectionController=this.parent.getControllerAt(o))}},i.prototype.showDropdown=function(){var e=this;this._itemsUpdated&&(this._itemsUpdated=!1,this._list.removeChildrenToPool(),this._items.forEach(function(t,i){var n=e._list.addItemFromPool();n.name=i<e._values.length?e._values[i]:"",n.text=e._items[i],n.icon=null!=e._icons&&i<e._icons.length?e._icons[i]:null},this),this._list.resizeToFit(this._visibleItemCount)),this._list.selectedIndex=-1,this.dropdown.width=this.width,this.root.togglePopup(this.dropdown,this,this._popupDirection),this.dropdown.parent&&this.setState(t.GButton.DOWN)},i.prototype.__popupWinClosed=function(e){this._over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)},i.prototype.__clickItem=function(e,i){t.GTimer.inst.add(100,1,this.__clickItem2,this,this._list.getChildIndex(i))},i.prototype.__clickItem2=function(e){this.dropdown.parent instanceof t.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=-1,this.selectedIndex=e,this._selectedIndex>=0?this.text=this._items[this._selectedIndex]:this.text="",this.emit("__stateChanged",this)},i.prototype.delayedClickItem=function(e){this.dropdown.parent instanceof t.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=e,this._selectedIndex>=0?this.text=this._items[this._selectedIndex]:this.text="",this.emit("__stateChanged",this)},i.prototype.__rollover=function(e){this._over=!0,this._down||this.dropdown&&this.dropdown.parent||this.setState(t.GButton.OVER)},i.prototype.__rollout=function(e){this._over=!1,this._down||this.dropdown&&this.dropdown.parent||this.setState(t.GButton.UP)},i.prototype.__mousedown=function(e){e.stopPropagation(),t.GRoot.inst.checkPopups(e.target),this._down=!0,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this._mouseup,this),this.dropdown&&this.showDropdown()},i.prototype._mouseup=function(e){this._down&&(this._down=!1,t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._mouseup,this),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)))},i}(t.GComponent);t.GComboBox=e}(fgui||(fgui={})),function(t){var e;!function(t){t[t.Empty=0]="Empty",t[t.Rect=1]="Rect",t[t.Ellipse=2]="Ellipse",t[t.Path=3]="Path",t[t.Polygon=4]="Polygon"}(e=t.eGraphType||(t.eGraphType={}));var i=function(i){function n(){var t=i.call(this)||this;return t._type=e.Empty,t._lineSize=0,t._lineColor=0,t._fillColor=0,t._lineSize=1,t._lineAlpha=1,t._fillAlpha=1,t._fillColor=16777215,t}return __extends(n,i),Object.defineProperty(n.prototype,"graphics",{get:function(){return this._displayObject},enumerable:!0,configurable:!0}),n.prototype.drawRect=function(t,e,i,n,o,r){return void 0===r&&(r=null),this._type=1,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=o,this._corner=r,this.updateGraph()},n.prototype.drawEllipse=function(t,e,i,n,o){return this._type=2,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=o,this._corner=null,this.updateGraph()},Object.defineProperty(n.prototype,"color",{get:function(){return this._fillColor},set:function(t){this._fillColor=t,0!=this._type&&this.updateGraph()},enumerable:!0,configurable:!0}),n.prototype.updateGraph=function(){var i=this.graphics;if(!i)return this;i.interactive=this.touchable,i.clear();var n=this.width,o=this.height;if(0!=n&&0!=o){if(0==this._lineSize?i.lineStyle(0,0,0):i.lineStyle(this._lineSize,this._lineColor,this._lineAlpha),i.beginFill(this._fillColor,this._fillAlpha),this._type==e.Rect)this._cornerRadius&&this._cornerRadius.length>=1?i.drawRoundedRect(0,0,n,o,2*this._cornerRadius[0]):i.drawRect(0,0,n,o);else if(this._type==e.Ellipse){var r=.5*n,s=.5*o;n==o?i.drawCircle(r,r,r):i.drawEllipse(r,s,r,s)}else if(this._type==e.Path)t.ToolSet.fillPath(i,this._polygonPoints,0,0);else if(this._type==e.Polygon){this._polygonPoints||(this._polygonPoints=[]);var a=Math.min(this._width,this._height)/2;this._polygonPoints.length=0;for(var h,l=this._startAngle*Math.PI/180,u=2*Math.PI/this._sides,c=0;c<this._sides;c++){this._distances?(h=this._distances[c],isNaN(h)&&(h=1)):h=1;var p=a+a*h*Math.cos(l),_=a+a*h*Math.sin(l);this._polygonPoints.push(p,_),l+=u}t.ToolSet.fillPath(i,this._polygonPoints,0,0)}return i.endFill(),this}},n.prototype.replaceMe=function(t){if(!this._parent)throw new Error("parent not set");t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0)},n.prototype.addBeforeMe=function(t){if(null==this._parent)throw new Error("parent not set");var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e)},n.prototype.addAfterMe=function(t){if(null==this._parent)throw new Error("parent not set");var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e)},n.prototype.setNativeObject=function(t){this._type=e.Empty;var i=this._displayObject;i.interactive=this.touchable,i.clear(),i.removeChildren(),i.addChild(t)},n.prototype.createDisplayObject=function(){this._displayObject=new t.UISprite(this)},n.prototype.getProp=function(e){return e==t.ObjectPropID.Color?this.color:i.prototype.getProp.call(this,e)},n.prototype.setProp=function(e,n){e==t.ObjectPropID.Color?this.color=n:i.prototype.setProp.call(this,e,n)},n.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this._type!=e.Empty&&this.updateGraph()},n.prototype.setup_beforeAdd=function(t,n){if(i.prototype.setup_beforeAdd.call(this,t,n),t.seek(n,5),this._type=t.readByte(),this._type!=e.Empty){var o,r;this._lineSize=t.readInt();var s=t.readColor(!0);if(this._lineColor=16777215&s,this._lineAlpha=(s>>24&255)/255,s=t.readColor(!0),this._fillColor=16777215&s,this._fillAlpha=(s>>24&255)/255,t.readBool())for(this._cornerRadius=new Array(4),o=0;o<4;o++)this._cornerRadius[o]=t.readFloat();if(3==this._type)for(r=t.readShort(),this._polygonPoints=[],this._polygonPoints.length=r,o=0;o<r;o++)this._polygonPoints[o]=t.readFloat();else if(4==this._type&&(this._sides=t.readShort(),this._startAngle=t.readFloat(),(r=t.readShort())>0))for(this._distances=[],o=0;o<r;o++)this._distances[o]=t.readFloat();this.updateGraph()}},n}(t.GObject);t.GGraph=i}(fgui||(fgui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._layout=0,t._lineGap=0,t._columnGap=0,t._mainGridIndex=-1,t._mainGridMinSize=50,t._mainChildIndex=-1,t._totalSize=0,t._numChildren=0,t._updating=0,t}return __extends(i,e),i.prototype.dispose=function(){this._boundsChanged=!1,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineGap",{get:function(){return this._lineGap},set:function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnGap",{get:function(){return this._columnGap},set:function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"excludeInvisibles",{get:function(){return this._excludeInvisibles},set:function(t){this._excludeInvisibles!=t&&(this._excludeInvisibles=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSizeDisabled",{get:function(){return this._autoSizeDisabled},set:function(t){this._autoSizeDisabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainGridMinSize",{get:function(){return this._mainGridMinSize},set:function(t){this._mainGridMinSize!=t&&(this._mainGridMinSize=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainGridIndex",{get:function(){return this._mainGridIndex},set:function(t){this._mainGridIndex!=t&&(this._mainGridIndex=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),i.prototype.setBoundsChangedFlag=function(e){void 0===e&&(e=!1),0==this._updating&&null!=this._parent&&(e||(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,this._layout!=t.GroupLayoutType.None&&t.GTimer.inst.callLater(this.ensureBoundsCorrect,this)))},i.prototype.ensureSizeCorrect=function(){null!=this._parent&&this._boundsChanged&&0!=this._layout&&(this._boundsChanged=!1,this._autoSizeDisabled?this.resizeChildren(0,0):(this.handleLayout(),this.updateBounds()))},i.prototype.ensureBoundsCorrect=function(){null!=this._parent&&this._boundsChanged&&(this._boundsChanged=!1,0==this._layout?this.updateBounds():this._autoSizeDisabled?this.resizeChildren(0,0):(this.handleLayout(),this.updateBounds()))},i.prototype.updateBounds=function(){t.GTimer.inst.remove(this.ensureBoundsCorrect,this);var e,i,n,o=this._parent.numChildren,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=!0;for(e=0;e<o;e++)(i=this._parent.getChildAt(e)).group!=this||this._excludeInvisibles&&!i.internalVisible3||((n=i.xMin)<r&&(r=n),(n=i.yMin)<s&&(s=n),(n=i.xMin+i.width)>a&&(a=n),(n=i.yMin+i.height)>h&&(h=n),l=!1);var u=0,c=0;l||(this._updating|=1,this.setXY(r,s),this._updating&=2,u=a-r,c=h-s),0==(2&this._updating)?(this._updating|=2,this.setSize(u,c),this._updating&=1):(this._updating&=1,this.resizeChildren(this._width-u,this._height-c))},i.prototype.handleLayout=function(){var e,i,n;if(this._updating|=1,this._layout==t.GroupLayoutType.Horizontal){var o=this.x;for(n=this._parent.numChildren,i=0;i<n;i++)(e=this._parent.getChildAt(i)).group==this&&(this._excludeInvisibles&&!e.internalVisible3||(e.xMin=o,0!=e.width&&(o+=e.width+this._columnGap)))}else if(this._layout==t.GroupLayoutType.Vertical){var r=this.y;for(n=this._parent.numChildren,i=0;i<n;i++)(e=this._parent.getChildAt(i)).group==this&&(this._excludeInvisibles&&!e.internalVisible3||(e.yMin=r,0!=e.height&&(r+=e.height+this._lineGap)))}this._updating&=2},i.prototype.moveChildren=function(t,e){if(0==(1&this._updating)&&null!=this._parent){this._updating|=1;var i,n,o=this._parent.numChildren;for(i=0;i<o;i++)(n=this._parent.getChildAt(i)).group==this&&n.setXY(n.x+t,n.y+e);this._updating&=2}},i.prototype.resizeChildren=function(e,i){if(this._layout!=t.GroupLayoutType.None&&0==(2&this._updating)&&null!=this._parent)if(this._updating|=2,!this._boundsChanged||(this._boundsChanged=!1,this._autoSizeDisabled)){var n,o,r=this._parent.numChildren;if(!this._percentReady){this._percentReady=!0,this._numChildren=0,this._totalSize=0,this._mainChildIndex=-1;var s=0;for(n=0;n<r;n++)(o=this._parent.getChildAt(n)).group==this&&(this._excludeInvisibles&&!o.internalVisible3||(s==this._mainGridIndex&&(this._mainChildIndex=n),this._numChildren++,1==this._layout?this._totalSize+=o.width:this._totalSize+=o.height),s++);for(-1!=this._mainChildIndex&&(1==this._layout?(o=this._parent.getChildAt(this._mainChildIndex),this._totalSize+=this._mainGridMinSize-o.width,o._sizePercentInGroup=this._mainGridMinSize/this._totalSize):(o=this._parent.getChildAt(this._mainChildIndex),this._totalSize+=this._mainGridMinSize-o.height,o._sizePercentInGroup=this._mainGridMinSize/this._totalSize)),n=0;n<r;n++)(o=this._parent.getChildAt(n)).group==this&&n!=this._mainChildIndex&&(this._totalSize>0?o._sizePercentInGroup=(1==this._layout?o.width:o.height)/this._totalSize:o._sizePercentInGroup=0)}var a=0,h=1,l=!1;if(1==this._layout){a=this.width-(this._numChildren-1)*this._columnGap,-1!=this._mainChildIndex&&a>=this._totalSize&&((o=this._parent.getChildAt(this._mainChildIndex)).setSize(a-(this._totalSize-this._mainGridMinSize),o._rawHeight+i,!0),a-=o.width,h-=o._sizePercentInGroup,l=!0);var u=this.x;for(n=0;n<r;n++)(o=this._parent.getChildAt(n)).group==this&&(!this._excludeInvisibles||o.internalVisible3?(l&&n==this._mainChildIndex||(o.setSize(Math.round(o._sizePercentInGroup/h*a),o._rawHeight+i,!0),h-=o._sizePercentInGroup,a-=o.width),o.xMin=u,0!=o.width&&(u+=o.width+this._columnGap)):o.setSize(o._rawWidth,o._rawHeight+i,!0))}else{a=this.height-(this._numChildren-1)*this._lineGap,-1!=this._mainChildIndex&&a>=this._totalSize&&((o=this._parent.getChildAt(this._mainChildIndex)).setSize(o._rawWidth+e,a-(this._totalSize-this._mainGridMinSize),!0),a-=o.height,h-=o._sizePercentInGroup,l=!0);var c=this.y;for(n=0;n<r;n++)(o=this._parent.getChildAt(n)).group==this&&(!this._excludeInvisibles||o.internalVisible3?(l&&n==this._mainChildIndex||(o.setSize(o._rawWidth+e,Math.round(o._sizePercentInGroup/h*a),!0),h-=o._sizePercentInGroup,a-=o.height),o.yMin=c,0!=o.height&&(c+=o.height+this._lineGap)):o.setSize(o._rawWidth+e,o._rawHeight,!0))}this._updating&=1}else this.updateBounds()},i.prototype.handleAlphaChanged=function(){if(!this._underConstruct)for(var t=this._parent.numChildren,e=0;e<t;e++){var i=this._parent.getChildAt(e);i.group==this&&(i.alpha=this.alpha)}},i.prototype.handleVisibleChanged=function(){if(this._parent)for(var t=this._parent.numChildren,e=0;e<t;e++){var i=this._parent.getChildAt(e);i.group==this&&i.handleVisibleChanged()}},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,5),this._layout=t.readByte(),this._lineGap=t.readInt(),this._columnGap=t.readInt(),t.version>=2&&(this._excludeInvisibles=t.readBool(),this._autoSizeDisabled=t.readBool(),this._mainChildIndex=t.readInt())},i.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),this.visible||this.handleVisibleChanged()},i.prototype.createDisplayObject=function(){var e=new t.UIContainer(this);e.interactive=!1,this.setDisplayObject(e)},i.prototype.setXY=function(t,i){if(this._x!=t||this._y!=i){var n=t-this._x,o=i-this._y;e.prototype.setXY.call(this,t,i),this.moveChildren(n,o)}},i.prototype.updateAlpha=function(){if(e.prototype.updateAlpha.call(this),!this._inProgressBuilding){var t,i,n=this._parent.numChildren;for(t=0;t<n;t++)(i=this._parent.getChildAt(t)).group==this&&(i.alpha=this.alpha)}},i}(t.GObject);t.GGroup=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._flip=t.FlipType.None,i}return __extends(i,e),Object.defineProperty(i.prototype,"touchable",{get:function(){return!1},set:function(t){this._touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._content.tint},set:function(t){this.color!=t&&(this.updateGear(4),this._content.tint=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flip",{get:function(){return this._flip},set:function(e){if(this._flip!=e){this._flip=e;var i=!1,n=!1;this._flip!=t.FlipType.Horizontal&&this._flip!=t.FlipType.Both||(i=!0),this._flip!=t.FlipType.Vertical&&this._flip!=t.FlipType.Both||(n=!0),this._content.flipX=i,this._content.flipX=n}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMethod",{get:function(){return this._content.fillMethod},set:function(t){this._content.fillMethod=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillAmount",{get:function(){return this._content.fillAmount},set:function(t){this._content.fillAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._content.texture},set:function(e){t.Debug.log("set gimage texture",e.width,e.height),null!=e?(this.sourceWidth=e.orig.width,this.sourceHeight=e.orig.height):(this.sourceWidth=0,this.sourceHeight=0),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this._content.scale9Grid=null,this._content.fillMethod=0,this._content.texture=e},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this._content=new t.UIImage(this),this.setDisplayObject(this._content)},i.prototype.dispose=function(){this._content.destroy(),e.prototype.dispose.call(this)},i.prototype.constructFromResource=function(){var e=this.packageItem.getBranch();this.sourceWidth=e.width,this.sourceHeight=e.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this._content.initDisp(e),this.setSize(this.sourceWidth,this.sourceHeight),t.Debug.log("constructFromResource GImage",this._flip)},i.prototype.handleXYChanged=function(){e.prototype.handleXYChanged.call(this),this._flip!=t.FlipType.None&&(-1==this._content.scale.x&&(this._content.x+=this.width),-1==this._content.scale.y&&(this._content.y+=this.height))},i.prototype.handleSizeChanged=function(){this._content.width=this.width,this._content.height=this.height},i.prototype.getProp=function(i){return i==t.ObjectPropID.Color?this.color:e.prototype.getProp.call(this,i)},i.prototype.setProp=function(i,n){i==t.ObjectPropID.Color?this.color=n:e.prototype.setProp.call(this,i,n)},i.prototype.setup_beforeAdd=function(i,n){e.prototype.setup_beforeAdd.call(this,i,n),i.seek(n,5),i.readBool()&&(this.color=i.readColor()),this.flip=i.readByte(),this._content.fillMethod=i.readByte(),this._content.fillMethod!=t.FillMethod.None&&(this._content.fillOrigin=i.readByte(),this._content.fillClockwise=i.readBool(),this._content.fillAmount=i.readFloat()),t.Debug.log("GImage",this._content.fillMethod,this._content.fillOrigin,this._content.fillClockwise,this._content.fillAmount)},i}(t.GObject);t.GImage=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return null!=this._iconObject?this._iconObject.icon:null},set:function(t){null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._titleObject?this._titleObject.text:null},set:function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this._titleObject)?this._titleObject.titleColor:0},set:function(e){t.isColorableTitle(this._titleObject)&&(this._titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return t.isColorableTitle(this._titleObject)?this._titleObject.fontSize:0},set:function(e){t.isColorableTitle(this._titleObject)&&(this._titleObject.fontSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleFontSize",{set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return!!(this._titleObject&&this._titleObject instanceof t.GTextInput)&&this._titleObject.editable},set:function(t){this._titleObject&&(this._titleObject.editable=t)},enumerable:!0,configurable:!0}),i.prototype.getTextField=function(){return this._titleObject instanceof t.GTextField?this._titleObject:this._titleObject instanceof i?this._titleObject.getTextField():this._titleObject instanceof t.GButton?this._titleObject.getTextField():null},i.prototype.getProp=function(i){switch(i){case t.ObjectPropID.Color:return this.titleColor;case t.ObjectPropID.OutlineColor:var n=this.getTextField();return n?n.strokeColor:0;case t.ObjectPropID.FontSize:return this.titleFontSize;default:return e.prototype.getProp.call(this,i)}},i.prototype.setProp=function(i,n){switch(i){case t.ObjectPropID.Color:this.titleColor=n;break;case t.ObjectPropID.OutlineColor:var o=this.getTextField();o&&(o.strokeColor=n);break;case t.ObjectPropID.FontSize:this.titleFontSize=n;break;default:e.prototype.setProp.call(this,i,n)}},i.prototype.constructExtension=function(t){this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon")},i.prototype.setup_afterAdd=function(t,i){if(e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType){var n;null!=(n=t.readS())&&(this.title=n),null!=(n=t.readS())&&(this.icon=n),t.readBool()&&(this.titleColor=t.readColor());var o=t.readInt();if(0!=o&&(this.titleFontSize=o),t.readBool()){var r=this.getTextField();null!=r?(null!=(n=t.readS())&&(r.promptText=n),null!=(n=t.readS())&&(r.restrict=n),0!=(o=t.readInt())&&(r.maxLength=o),o=t.readInt(),t.readBool()&&(r.password=!0)):t.skip(13)}}},i}(t.GComponent);t.GLabel=e}(fgui||(fgui={})),function(t){var e=function(e){function n(){var i=e.call(this)||this;return i.scrollItemToViewOnClick=!0,i.foldInvisibleItems=!1,i._lineCount=0,i._columnCount=0,i._lineGap=0,i._columnGap=0,i._lastSelectedIndex=0,i._numItems=0,i._realNumItems=0,i._firstIndex=0,i._curLineItemCount=0,i._curLineItemCount2=0,i._virtualListChanged=0,i.itemInfoVer=0,i._trackBounds=!0,i._pool=new t.GObjectPool,i._layout=t.ListLayoutType.SingleColumn,i._autoResizeItem=!0,i._lastSelectedIndex=-1,i._selectionMode=t.ListSelectionMode.Single,i.opaque=!0,i._align=t.AlignType.Left,i._verticalAlign=t.VertAlignType.Top,i._container=new PIXI.Container,i._rootContainer.addChild(i._container),i}return __extends(n,e),n.prototype.dispose=function(){this._pool.clear(),e.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineCount",{get:function(){return this._lineCount},set:function(t){this._lineCount!=t&&(this._lineCount=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},set:function(t){this._columnCount!=t&&(this._columnCount=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineGap",{get:function(){return this._lineGap},set:function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnGap",{get:function(){return this._columnGap},set:function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"virtualItemSize",{get:function(){return this._itemSize},set:function(t){this._virtual&&(null==this._itemSize&&(this._itemSize=new PIXI.Point),this._itemSize.copyFrom(t),this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultItem",{get:function(){return this._defaultItem},set:function(t){this._defaultItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoResizeItem",{get:function(){return this._autoResizeItem},set:function(t){this._autoResizeItem!=t&&(this._autoResizeItem=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){this._selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionController",{get:function(){return this._selectionController},set:function(t){this._selectionController=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemPool",{get:function(){return this._pool},enumerable:!0,configurable:!0}),n.prototype.getFromPool=function(t){void 0===t&&(t=null),t||(t=this._defaultItem);var e=this._pool.getObject(t);return null!=e&&(e.visible=!0),e},n.prototype.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this._pool.returnObject(t)},n.prototype.addChildAt=function(i,n){if(void 0===n&&(n=0),e.prototype.addChildAt.call(this,i,n),i instanceof t.GButton){var o=i;o.selected=!1,o.changeStateOnClick=!1}return i.on(t.InteractiveEvents.Click,this.__clickItem,this),i},n.prototype.addItem=function(e){return void 0===e&&(e=null),e||(e=this._defaultItem),this.addChild(t.UIPackage.createObjectFromURL(e))},n.prototype.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},n.prototype.removeChildAt=function(i,n){void 0===n&&(n=!1);var o=e.prototype.removeChildAt.call(this,i,n);return o.off(t.InteractiveEvents.Click,this.__clickItem,this),o},n.prototype.removeChildToPoolAt=function(t){void 0===t&&(t=0);var i=e.prototype.removeChildAt.call(this,t);this.returnToPool(i)},n.prototype.removeChildToPool=function(t){e.prototype.removeChild.call(this,t),this.returnToPool(t)},n.prototype.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this._children.length)&&(e=this._children.length-1);for(var i=t;i<=e;++i)this.removeChildToPoolAt(t)},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){var e;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];if(i.obj instanceof t.GButton&&i.obj.selected||null==i.obj&&i.selected)return this._loop?e%this._numItems:e}else{var n=this._children.length;for(e=0;e<n;e++){var o=this._children[e].asButton;if(null!=o&&o.selected)return e}}return-1},set:function(e){e>=0&&e<this.numItems?(this._selectionMode!=t.ListSelectionMode.Single&&this.clearSelection(),this.addSelection(e)):this.clearSelection()},enumerable:!0,configurable:!0}),n.prototype.getSelection=function(e){var i;if(e||(e=new Array),this._virtual)for(i=0;i<this._realNumItems;i++){var n=this._virtualItems[i];if(n.obj instanceof t.GButton&&n.obj.selected||null==n.obj&&n.selected){var o=i;if(this._loop&&(o=i%this._numItems,-1!=e.indexOf(o)))continue;e.push(o)}}else{var r=this._children.length;for(i=0;i<r;i++){var s=this._children[i].asButton;null!=s&&s.selected&&e.push(i)}}return e},n.prototype.addSelection=function(e,i){if(void 0===i&&(i=!1),this._selectionMode!=t.ListSelectionMode.None){this.checkVirtualList(),this._selectionMode==t.ListSelectionMode.Single&&this.clearSelection(),i&&this.scrollToView(e),this._lastSelectedIndex=e;var n=null;if(this._virtual){var o=this._virtualItems[e];null!=o.obj&&(n=o.obj.asButton),o.selected=!0}else n=this.getChildAt(e).asButton;null==n||n.selected||(n.selected=!0,this.updateSelectionController(e))}},n.prototype.removeSelection=function(e){if(this._selectionMode!=t.ListSelectionMode.None){var i=null;if(this._virtual){var n=this._virtualItems[e];null!=n.obj&&(i=n.obj.asButton),n.selected=!1}else i=this.getChildAt(e).asButton;null!=i&&(i.selected=!1)}},n.prototype.clearSelection=function(){var e;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];i.obj instanceof t.GButton&&(i.obj.selected=!1),i.selected=!1}else{var n=this._children.length;for(e=0;e<n;e++){var o=this._children[e].asButton;null!=o&&(o.selected=!1)}}},n.prototype.clearSelectionExcept=function(e){var i;if(this._virtual)for(i=0;i<this._realNumItems;i++){var n=this._virtualItems[i];n.obj!=e&&(n.obj instanceof t.GButton&&(n.obj.selected=!1),n.selected=!1)}else{var o=this._children.length;for(i=0;i<o;i++){var r=this._children[i].asButton;null!=r&&r!=e&&(r.selected=!1)}}},n.prototype.selectAll=function(){this.checkVirtualList();var e,i=-1;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj instanceof t.GButton&&!n.obj.selected&&(n.obj.selected=!0,i=e),n.selected=!0}else{var o=this._children.length;for(e=0;e<o;e++){var r=this._children[e].asButton;null==r||r.selected||(r.selected=!0,i=e)}}-1!=i&&this.updateSelectionController(i)},n.prototype.selectNone=function(){this.clearSelection()},n.prototype.selectReverse=function(){this.checkVirtualList();var e,i=-1;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj instanceof t.GButton&&(n.obj.selected=!n.obj.selected,n.obj.selected&&(i=e)),n.selected=!n.selected}else{var o=this._children.length;for(e=0;e<o;e++){var r=this._children[e].asButton;null!=r&&(r.selected=!r.selected,r.selected&&(i=e))}}-1!=i&&this.updateSelectionController(i)},n.prototype.handleArrowKey=function(e){void 0===e&&(e=0);var i=this.selectedIndex;if(-1!=i)switch(e){case 1:if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowVertical)--i>=0&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination){for(var n=this._children[i],o=0,r=i-1;r>=0;r--){var s=this._children[r];if(s.y!=n.y){n=s;break}o++}for(;r>=0;r--)if((s=this._children[r]).y!=n.y){this.clearSelection(),this.addSelection(r+o+1,!0);break}}break;case 3:if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination)++i<this._children.length&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowVertical){n=this._children[i],o=0;var a=this._children.length;for(r=i+1;r<a;r++){if((s=this._children[r]).x!=n.x){n=s;break}o++}for(;r<a;r++)if((s=this._children[r]).x!=n.x){this.clearSelection(),this.addSelection(r-o-1,!0);break}}break;case 5:if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowVertical)++i<this._children.length&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination){for(n=this._children[i],o=0,a=this._children.length,r=i+1;r<a;r++){if((s=this._children[r]).y!=n.y){n=s;break}o++}for(;r<a;r++)if((s=this._children[r]).y!=n.y){this.clearSelection(),this.addSelection(r-o-1,!0);break}}break;case 7:if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.Pagination)--i>=0&&(this.clearSelection(),this.addSelection(i,!0));else if(this._layout==t.ListLayoutType.FlowVertical){for(n=this._children[i],o=0,r=i-1;r>=0;r--){if((s=this._children[r]).x!=n.x){n=s;break}o++}for(;r>=0;r--)if((s=this._children[r]).x!=n.x){this.clearSelection(),this.addSelection(r+o+1,!0);break}}}},n.prototype.__clickItem=function(e){if(null==this._scrollPane||!this._scrollPane.isDragging){var i=t.GObject.cast(e.currentTarget);i&&(this.setSelectionOnEvent(i),this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(i,!0),this.emit("__itemClick",e,i))}},n.prototype.setSelectionOnEvent=function(e){if(e instanceof t.GButton&&this._selectionMode!=t.ListSelectionMode.None){var i=!1,n=e,o=this.childIndexToItemIndex(this.getChildIndex(e));if(this._selectionMode==t.ListSelectionMode.Single)n.selected||(this.clearSelectionExcept(n),n.selected=!0);else if(t.GRoot.shiftKeyDown){if(!n.selected)if(-1!=this._lastSelectedIndex){var r,s=Math.min(this._lastSelectedIndex,o),a=Math.max(this._lastSelectedIndex,o);if(a=Math.min(a,this.numItems-1),this._virtual)for(r=s;r<=a;r++){var h=this._virtualItems[r];h.obj instanceof t.GButton&&(h.obj.selected=!0),h.selected=!0}else for(r=s;r<=a;r++){var l=this.getChildAt(r).asButton;null!=l&&(l.selected=!0)}i=!0}else n.selected=!0}else t.GRoot.ctrlKeyDown||this._selectionMode==t.ListSelectionMode.Multiple_SingleClick?n.selected=!n.selected:n.selected?this.clearSelectionExcept(n):(this.clearSelectionExcept(n),n.selected=!0);i||(this._lastSelectedIndex=o),n.selected&&this.updateSelectionController(o)}},n.prototype.resizeToFit=function(e,i){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=0),this.ensureBoundsCorrect();var n=this.numItems;if(e>n&&(e=n),this._virtual){var o=Math.ceil(e/this._curLineItemCount);this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?this.viewHeight=o*this._itemSize.y+Math.max(0,o-1)*this._lineGap:this.viewWidth=o*this._itemSize.x+Math.max(0,o-1)*this._columnGap}else if(0==e)this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?this.viewHeight=i:this.viewWidth=i;else{for(var r=e-1,s=null;r>=0&&(s=this.getChildAt(r),this.foldInvisibleItems&&!s.visible);)r--;if(r<0)this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?this.viewHeight=i:this.viewWidth=i;else{var a=0;this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?((a=s.y+s.height)<i&&(a=i),this.viewHeight=a):((a=s.x+s.width)<i&&(a=i),this.viewWidth=a)}}},n.prototype.getMaxItemWidth=function(){for(var t=this._children.length,e=0,i=0;i<t;i++){var n=this.getChildAt(i);n.width>e&&(e=n.width)}return e},n.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)},n.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._selectionController==t&&(this.selectedIndex=t.selectedIndex)},n.prototype.updateSelectionController=function(t){if(null!=this._selectionController&&!this._selectionController.changing&&t<this._selectionController.pageCount){var e=this._selectionController;this._selectionController=null,e.selectedIndex=t,this._selectionController=e}},n.prototype.getSnappingPosition=function(i,o,r){var s,a;return this._virtual?(r||(r=new PIXI.Point),this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?(s=o,n.pos_param=o,a=this.getIndexOnPos1(!1),o=n.pos_param,a<this._virtualItems.length&&s-o>this._virtualItems[a].height/2&&a<this._realNumItems&&(o+=this._virtualItems[a].height+this._lineGap)):this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical?(s=i,n.pos_param=i,a=this.getIndexOnPos2(!1),i=n.pos_param,a<this._virtualItems.length&&s-i>this._virtualItems[a].width/2&&a<this._realNumItems&&(i+=this._virtualItems[a].width+this._columnGap)):(s=i,n.pos_param=i,a=this.getIndexOnPos3(!1),i=n.pos_param,a<this._virtualItems.length&&s-i>this._virtualItems[a].width/2&&a<this._realNumItems&&(i+=this._virtualItems[a].width+this._columnGap)),r.x=i,r.y=o,r):e.prototype.getSnappingPosition.call(this,i,o,r)},n.prototype.scrollToView=function(e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),this._virtual){if(0==this._numItems)return;if(this.checkVirtualList(),e>=this._virtualItems.length)throw"Invalid child index: "+e+">"+this._virtualItems.length;var o;this._loop&&(e=Math.floor(this._firstIndex/this._numItems)*this._numItems+e);var r,s=this._virtualItems[e],a=0;if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal){for(r=this._curLineItemCount-1;r<e;r+=this._curLineItemCount)a+=this._virtualItems[r].height+this._lineGap;o=new PIXI.Rectangle(0,a,this._itemSize.x,s.height)}else if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical){for(r=this._curLineItemCount-1;r<e;r+=this._curLineItemCount)a+=this._virtualItems[r].width+this._columnGap;o=new PIXI.Rectangle(a,0,s.width,this._itemSize.y)}else{var h=e/(this._curLineItemCount*this._curLineItemCount2);o=new PIXI.Rectangle(h*this.viewWidth+e%this._curLineItemCount*(s.width+this._columnGap),e/this._curLineItemCount%this._curLineItemCount2*(s.height+this._lineGap),s.width,s.height)}n=!0,null!=this._scrollPane&&this._scrollPane.scrollToView(o,i,n)}else{var l=this.getChildAt(e);null!=l&&(null!=this._scrollPane?this._scrollPane.scrollToView(l,i,n):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(l,i,n))}},n.prototype.getFirstChildInView=function(){return this.childIndexToItemIndex(e.prototype.getFirstChildInView.call(this))},n.prototype.childIndexToItemIndex=function(e){if(!this._virtual)return e;if(this._layout==t.ListLayoutType.Pagination){for(var i=this._firstIndex;i<this._realNumItems;i++)if(null!=this._virtualItems[i].obj&&--e<0)return i;return e}return e+=this._firstIndex,this._loop&&this._numItems>0&&(e%=this._numItems),e},n.prototype.itemIndexToChildIndex=function(e){if(!this._virtual)return e;if(this._layout==t.ListLayoutType.Pagination)return this.getChildIndex(this._virtualItems[e].obj);if(this._loop&&this._numItems>0){var i=this._firstIndex%this._numItems;e>=i?e-=i:e=this._numItems-i+e}else e-=this._firstIndex;return e},n.prototype.setVirtual=function(){this._setVirtual(!1)},n.prototype.setVirtualAndLoop=function(){this._setVirtual(!0)},n.prototype._setVirtual=function(e){if(!this._virtual){if(null==this._scrollPane)throw"Virtual list must be scrollable!";if(e){if(this._layout==t.ListLayoutType.FlowHorizontal||this._layout==t.ListLayoutType.FlowVertical)throw"Loop list is not supported for FlowHorizontal or FlowVertical layout!";this._scrollPane.bouncebackEffect=!1}if(this._virtual=!0,this._loop=e,this._virtualItems=new Array,this.removeChildrenToPool(),null==this._itemSize){this._itemSize=new PIXI.Point;var i=this.getFromPool(null);if(null==i)throw"Virtual List must have a default list item resource.";this._itemSize.x=i.width,this._itemSize.y=i.height,this.returnToPool(i)}this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal?(this._scrollPane.scrollStep=this._itemSize.y,this._loop&&(this._scrollPane._loop=2)):(this._scrollPane.scrollStep=this._itemSize.x,this._loop&&(this._scrollPane._loop=1)),this._scrollPane.on(t.ScrollPane.SCROLL,this.__scrolled,this),this.setVirtualListChangedFlag(!0)}},Object.defineProperty(n.prototype,"numItems",{get:function(){return this._virtual?this._numItems:this._children.length},set:function(e){if(this._virtual){if(null==this.itemRenderer)throw"Set itemRenderer first!";this._numItems=e,this._loop?this._realNumItems=6*this._numItems:this._realNumItems=this._numItems;var n=this._virtualItems.length;if(this._realNumItems>n)for(s=n;s<this._realNumItems;s++){var o=new i;o.width=this._itemSize.x,o.height=this._itemSize.y,this._virtualItems.push(o)}else for(s=this._realNumItems;s<n;s++)this._virtualItems[s].selected=!1;0!=this._virtualListChanged&&t.GTimer.inst.remove(this._refreshVirtualList,this),this._refreshVirtualList()}else{var r=this._children.length;if(e>r)for(var s=r;s<e;s++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.call(this.callbackThisObj,s));else this.removeChildrenToPool(e,r);if(null!=this.itemRenderer)for(s=0;s<e;s++)this.itemRenderer.call(this.callbackThisObj,s,this.getChildAt(s))}},enumerable:!0,configurable:!0}),n.prototype.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},n.prototype.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),t.GTimer.inst.remove(this._refreshVirtualList,this))},n.prototype.setVirtualListChangedFlag=function(e){void 0===e&&(e=!1),e?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1),t.GTimer.inst.callLater(this._refreshVirtualList,this)},n.prototype._refreshVirtualList=function(){var e=2==this._virtualListChanged;this._virtualListChanged=0,this._eventLocked=!0,e&&(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.SingleRow?this._curLineItemCount=1:this._layout==t.ListLayoutType.FlowHorizontal?this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):this._layout==t.ListLayoutType.FlowVertical?this._lineCount>0?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):(this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)),this._lineCount>0?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount2<=0&&(this._curLineItemCount2=1))));var i=0,n=0;if(this._realNumItems>0){var o,r=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,s=Math.min(this._curLineItemCount,this._realNumItems);if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal){for(o=0;o<r;o+=this._curLineItemCount)i+=this._virtualItems[o].height+this._lineGap;if(i>0&&(i-=this._lineGap),this._autoResizeItem)n=this._scrollPane.viewWidth;else{for(o=0;o<s;o++)n+=this._virtualItems[o].width+this._columnGap;n>0&&(n-=this._columnGap)}}else if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical){for(o=0;o<r;o+=this._curLineItemCount)n+=this._virtualItems[o].width+this._columnGap;if(n>0&&(n-=this._columnGap),this._autoResizeItem)i=this._scrollPane.viewHeight;else{for(o=0;o<s;o++)i+=this._virtualItems[o].height+this._lineGap;i>0&&(i-=this._lineGap)}}else{n=Math.ceil(r/(this._curLineItemCount*this._curLineItemCount2))*this.viewWidth,i=this.viewHeight}}this.handleAlign(n,i),this._scrollPane.setContentSize(n,i),this._eventLocked=!1,this.handleScroll(!0)},n.prototype.__scrolled=function(t){this.handleScroll(!1)},n.prototype.getIndexOnPos1=function(t){if(this._realNumItems<this._curLineItemCount)return n.pos_param=0,0;var e,i,o;if(this.numChildren>0&&!t){if((i=this.getChildAt(0).y)>n.pos_param){for(e=this._firstIndex-this._curLineItemCount;e>=0;e-=this._curLineItemCount)if((i-=this._virtualItems[e].height+this._lineGap)<=n.pos_param)return n.pos_param=i,e;return n.pos_param=0,0}for(e=this._firstIndex;e<this._realNumItems;e+=this._curLineItemCount){if((o=i+this._virtualItems[e].height+this._lineGap)>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount}for(i=0,e=0;e<this._realNumItems;e+=this._curLineItemCount){if((o=i+this._virtualItems[e].height+this._lineGap)>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount},n.prototype.getIndexOnPos2=function(t){if(this._realNumItems<this._curLineItemCount)return n.pos_param=0,0;var e,i,o;if(this.numChildren>0&&!t){if((i=this.getChildAt(0).x)>n.pos_param){for(e=this._firstIndex-this._curLineItemCount;e>=0;e-=this._curLineItemCount)if((i-=this._virtualItems[e].width+this._columnGap)<=n.pos_param)return n.pos_param=i,e;return n.pos_param=0,0}for(e=this._firstIndex;e<this._realNumItems;e+=this._curLineItemCount){if((o=i+this._virtualItems[e].width+this._columnGap)>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount}for(i=0,e=0;e<this._realNumItems;e+=this._curLineItemCount){if((o=i+this._virtualItems[e].width+this._columnGap)>n.pos_param)return n.pos_param=i,e;i=o}return n.pos_param=i,this._realNumItems-this._curLineItemCount},n.prototype.getIndexOnPos3=function(t){if(this._realNumItems<this._curLineItemCount)return n.pos_param=0,0;var e,i,o=this.viewWidth,r=Math.floor(n.pos_param/o),s=r*(this._curLineItemCount*this._curLineItemCount2),a=r*o;for(e=0;e<this._curLineItemCount;e++){if((i=a+this._virtualItems[s+e].width+this._columnGap)>n.pos_param)return n.pos_param=a,s+e;a=i}return n.pos_param=a,s+this._curLineItemCount-1},n.prototype.handleScroll=function(e){if(!this._eventLocked){if(this._layout==t.ListLayoutType.SingleColumn||this._layout==t.ListLayoutType.FlowHorizontal){for(var i=0;this.handleScroll1(e);)if(e=!1,++i>20){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder1()}else if(this._layout==t.ListLayoutType.SingleRow||this._layout==t.ListLayoutType.FlowVertical){for(i=0;this.handleScroll2(e);)if(e=!1,++i>20){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder2()}else this.handleScroll3(e);this._boundsChanged=!1}},n.prototype.handleScroll1=function(e){var i=this._scrollPane.scrollingPosY,o=i+this._scrollPane.viewHeight,r=o==this._scrollPane.contentHeight;n.pos_param=i;var s=this.getIndexOnPos1(e);if(i=n.pos_param,s==this._firstIndex&&!e)return!1;var a=this._firstIndex;this._firstIndex=s;var h,l,u,c,p,_=s,d=a>s,f=this.numChildren,g=a+f-1,y=d?g:a,m=0,b=i,v=0,w=0,C=this.defaultItem,x=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;_<this._realNumItems&&(r||b<o);){if((null==(l=this._virtualItems[_]).obj||e)&&(null!=this.itemProvider&&(null==(C=this.itemProvider.call(this.callbackThisObj,_%this._numItems))&&(C=this._defaultItem),C=t.UIPackage.normalizeURL(C)),null!=l.obj&&l.obj.resourceURL!=C&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(d){for(p=y;p>=a;p--)if(null!=(u=this._virtualItems[p]).obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,p==y&&y--;break}}else for(p=y;p<=g;p++)if(null!=(u=this._virtualItems[p]).obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,p==y&&y++;break}null!=l.obj?this.setChildIndex(l.obj,d?_-s:this.numChildren):(l.obj=this._pool.getObject(C),d?this.addChildAt(l.obj,_-s):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=l.selected),h=!0}else h=e;h&&(this._autoResizeItem&&(this._layout==t.ListLayoutType.SingleColumn||this._columnCount>0)&&l.obj.setSize(x,l.obj.height,!0),this.itemRenderer.call(this.callbackThisObj,_%this._numItems,l.obj),_%this._curLineItemCount==0&&(v+=Math.ceil(l.obj.height)-l.height,_==s&&a>s&&(w=Math.ceil(l.obj.height)-l.height)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=this.itemInfoVer,l.obj.setXY(m,b),_==s&&(o+=l.height),m+=l.width+this._columnGap,_%this._curLineItemCount==this._curLineItemCount-1&&(m=0,b+=l.height+this._lineGap),_++}for(c=0;c<f;c++)(l=this._virtualItems[a+c]).updateFlag!=this.itemInfoVer&&null!=l.obj&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null);for(f=this._children.length,c=0;c<f;c++){var I=this._virtualItems[s+c].obj;this._children[c]!=I&&this.setChildIndex(I,c)}return 0==v&&0==w||this._scrollPane.changeContentSizeOnScrolling(0,v,0,w),_>0&&this.numChildren>0&&this._container.y<=0&&this.getChildAt(0).y>-this._container.y},n.prototype.handleScroll2=function(e){var i=this._scrollPane.scrollingPosX,o=i+this._scrollPane.viewWidth,r=i==this._scrollPane.contentWidth;n.pos_param=i;var s=this.getIndexOnPos2(e);if(i=n.pos_param,s==this._firstIndex&&!e)return!1;var a=this._firstIndex;this._firstIndex=s;var h,l,u,c,p,_=s,d=a>s,f=this.numChildren,g=a+f-1,y=d?g:a,m=i,b=0,v=0,w=0,C=this.defaultItem,x=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;_<this._realNumItems&&(r||m<o);){if((null==(l=this._virtualItems[_]).obj||e)&&(null!=this.itemProvider&&(null==(C=this.itemProvider.call(this.callbackThisObj,_%this._numItems))&&(C=this._defaultItem),C=t.UIPackage.normalizeURL(C)),null!=l.obj&&l.obj.resourceURL!=C&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(d){for(p=y;p>=a;p--)if(null!=(u=this._virtualItems[p]).obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,p==y&&y--;break}}else for(p=y;p<=g;p++)if(null!=(u=this._virtualItems[p]).obj&&u.updateFlag!=this.itemInfoVer&&u.obj.resourceURL==C){u.obj instanceof t.GButton&&(u.selected=u.obj.selected),l.obj=u.obj,u.obj=null,p==y&&y++;break}null!=l.obj?this.setChildIndex(l.obj,d?_-s:this.numChildren):(l.obj=this._pool.getObject(C),d?this.addChildAt(l.obj,_-s):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=l.selected),h=!0}else h=e;h&&(this._autoResizeItem&&(this._layout==t.ListLayoutType.SingleRow||this._lineCount>0)&&l.obj.setSize(l.obj.width,x,!0),this.itemRenderer.call(this.callbackThisObj,_%this._numItems,l.obj),_%this._curLineItemCount==0&&(v+=Math.ceil(l.obj.width)-l.width,_==s&&a>s&&(w=Math.ceil(l.obj.width)-l.width)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=this.itemInfoVer,l.obj.setXY(m,b),_==s&&(o+=l.width),b+=l.height+this._lineGap,_%this._curLineItemCount==this._curLineItemCount-1&&(b=0,m+=l.width+this._columnGap),_++}for(c=0;c<f;c++)(l=this._virtualItems[a+c]).updateFlag!=this.itemInfoVer&&null!=l.obj&&(l.obj instanceof t.GButton&&(l.selected=l.obj.selected),this.removeChildToPool(l.obj),l.obj=null);for(f=this._children.length,c=0;c<f;c++){var I=this._virtualItems[s+c].obj;this._children[c]!=I&&this.setChildIndex(I,c)}return 0==v&&0==w||this._scrollPane.changeContentSizeOnScrolling(v,0,w,0),_>0&&this.numChildren>0&&this._container.x<=0&&this.getChildAt(0).x>-this._container.x},n.prototype.handleScroll3=function(e){var i=this._scrollPane.scrollingPosX;n.pos_param=i;var o=this.getIndexOnPos3(e);if(i=n.pos_param,o!=this._firstIndex||e){var r=this._firstIndex;this._firstIndex=o;var s,a,h,l,u,c=r,p=this._virtualItems.length,_=this._curLineItemCount*this._curLineItemCount2,d=o%this._curLineItemCount,f=this.viewWidth,g=Math.floor(o/_)*_,y=g+2*_,m=this._defaultItem,b=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,v=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;for(this.itemInfoVer++,a=g;a<y;a++)if(!(a>=this._realNumItems)){if(u=a%this._curLineItemCount,a-g<_){if(u<d)continue}else if(u>d)continue;(h=this._virtualItems[a]).updateFlag=this.itemInfoVer}var w=null,C=0;for(a=g;a<y;a++)if(!(a>=this._realNumItems)&&(h=this._virtualItems[a]).updateFlag==this.itemInfoVer){if(null==h.obj){for(;c<p;){if(null!=(l=this._virtualItems[c]).obj&&l.updateFlag!=this.itemInfoVer){l.obj instanceof t.GButton&&(l.selected=l.obj.selected),h.obj=l.obj,l.obj=null;break}c++}-1==C&&(C=this.getChildIndex(w)+1),null==h.obj?(null!=this.itemProvider&&(null==(m=this.itemProvider.call(this.callbackThisObj,a%this._numItems))&&(m=this._defaultItem),m=t.UIPackage.normalizeURL(m)),h.obj=this._pool.getObject(m),this.addChildAt(h.obj,C)):C=this.setChildIndexBefore(h.obj,C),C++,h.obj instanceof t.GButton&&(h.obj.selected=h.selected),s=!0}else s=e,C=-1,w=h.obj;s&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?h.obj.setSize(b,v,!0):this._curLineItemCount==this._columnCount?h.obj.setSize(b,h.obj.height,!0):this._curLineItemCount2==this._lineCount&&h.obj.setSize(h.obj.width,v,!0)),this.itemRenderer.call(this.callbackThisObj,a%this._numItems,h.obj),h.width=Math.ceil(h.obj.width),h.height=Math.ceil(h.obj.height))}var x=g/_*f,I=x,S=0,P=0;for(a=g;a<y;a++)a>=this._realNumItems||((h=this._virtualItems[a]).updateFlag==this.itemInfoVer&&h.obj.setXY(I,S),h.height>P&&(P=h.height),a%this._curLineItemCount==this._curLineItemCount-1?(I=x,S+=P+this._lineGap,P=0,a==g+_-1&&(I=x+=f,S=0)):I+=h.width+this._columnGap);for(a=c;a<p;a++)(h=this._virtualItems[a]).updateFlag!=this.itemInfoVer&&null!=h.obj&&(h.obj instanceof t.GButton&&(h.selected=h.obj.selected),this.removeChildToPool(h.obj),h.obj=null)}},n.prototype.handleArchOrder1=function(){if(this._childrenRenderOrder==t.ChildrenRenderOrder.Arch){for(var e=this._scrollPane.posY+this.viewHeight/2,i=Number.POSITIVE_INFINITY,n=0,o=0,r=this.numChildren,s=0;s<r;s++){var a=this.getChildAt(s);this.foldInvisibleItems&&!a.visible||(n=Math.abs(e-a.y-a.height/2))<i&&(i=n,o=s)}this.apexIndex=o}},n.prototype.handleArchOrder2=function(){if(this._childrenRenderOrder==t.ChildrenRenderOrder.Arch){for(var e=this._scrollPane.posX+this.viewWidth/2,i=Number.POSITIVE_INFINITY,n=0,o=0,r=this.numChildren,s=0;s<r;s++){var a=this.getChildAt(s);this.foldInvisibleItems&&!a.visible||(n=Math.abs(e-a.x-a.width/2))<i&&(i=n,o=s)}this.apexIndex=o}},n.prototype.handleAlign=function(e,i){var n=0,o=0;i<this.viewHeight&&(this._verticalAlign==t.VertAlignType.Middle?o=Math.floor((this.viewHeight-i)/2):this._verticalAlign==t.VertAlignType.Bottom&&(o=this.viewHeight-i)),e<this.viewWidth&&(this._align==t.AlignType.Center?n=Math.floor((this.viewWidth-e)/2):this._align==t.AlignType.Right&&(n=this.viewWidth-e)),n==this._alignOffset.x&&o==this._alignOffset.y||(this._alignOffset.set(n,o),null!=this._scrollPane?this._scrollPane.adjustMaskContainer():(this._container.x=this._margin.left+this._alignOffset.x,this._container.y=this._margin.top+this._alignOffset.y))},n.prototype.updateBounds=function(){if(!this._virtual){var e,i,n=0,o=0,r=0,s=0,a=0,h=0,l=0,u=0,c=0,p=this._children.length,_=this.viewWidth,d=this.viewHeight,f=0,g=0,y=0;if(this._layout==t.ListLayoutType.SingleColumn){for(e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(0!=o&&(o+=this._lineGap),i.y=o,this._autoResizeItem&&i.setSize(_,i.height,!0),o+=Math.ceil(i.height),i.width>r&&(r=i.width));if((h=o)<=d&&this._autoResizeItem&&this._scrollPane&&this._scrollPane._displayInDemand&&this._scrollPane.vtScrollBar)for(_+=this._scrollPane.vtScrollBar.width,e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(i.setSize(_,i.height,!0),i.width>r&&(r=i.width));a=Math.ceil(r)}else if(this._layout==t.ListLayoutType.SingleRow){for(e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(0!=n&&(n+=this._columnGap),i.x=n,this._autoResizeItem&&i.setSize(i.width,d,!0),n+=Math.ceil(i.width),i.height>s&&(s=i.height));if((a=n)<=_&&this._autoResizeItem&&this._scrollPane&&this._scrollPane._displayInDemand&&this._scrollPane.hzScrollBar)for(d+=this._scrollPane.hzScrollBar.height,e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(i.setSize(i.width,d,!0),i.height>s&&(s=i.height));h=Math.ceil(s)}else if(this._layout==t.ListLayoutType.FlowHorizontal)if(this._autoResizeItem&&this._columnCount>0){for(e=0;e<p;e++)if(i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(f+=i.sourceWidth,++l==this._columnCount||e==p-1)){for(y=(_-f-(l-1)*this._columnGap)/f,n=0,l=g;l<=e;l++)i=this.getChildAt(l),this.foldInvisibleItems&&!i.visible||(i.setXY(n,o),l<e?(i.setSize(i.sourceWidth+Math.round(i.sourceWidth*y),i.height,!0),n+=Math.ceil(i.width)+this._columnGap):i.setSize(_-n,i.height,!0),i.height>s&&(s=i.height));o+=Math.ceil(s)+this._lineGap,s=0,l=0,g=e+1,f=0}h=o+Math.ceil(s),a=_}else{for(e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(0!=n&&(n+=this._columnGap),(0!=this._columnCount&&l>=this._columnCount||0==this._columnCount&&n+i.width>_&&0!=s)&&(n=0,o+=Math.ceil(s)+this._lineGap,s=0,l=0),i.setXY(n,o),(n+=Math.ceil(i.width))>r&&(r=n),i.height>s&&(s=i.height),l++);h=o+Math.ceil(s),a=Math.ceil(r)}else if(this._layout==t.ListLayoutType.FlowVertical)if(this._autoResizeItem&&this._lineCount>0){for(e=0;e<p;e++)if(i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(f+=i.sourceHeight,++l==this._lineCount||e==p-1)){for(y=(d-f-(l-1)*this._lineGap)/f,o=0,l=g;l<=e;l++)i=this.getChildAt(l),this.foldInvisibleItems&&!i.visible||(i.setXY(n,o),l<e?(i.setSize(i.width,i.sourceHeight+Math.round(i.sourceHeight*y),!0),o+=Math.ceil(i.height)+this._lineGap):i.setSize(i.width,d-o,!0),i.width>r&&(r=i.width));n+=Math.ceil(r)+this._columnGap,r=0,l=0,g=e+1,f=0}a=n+Math.ceil(r),h=d}else{for(e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(0!=o&&(o+=this._lineGap),(0!=this._lineCount&&l>=this._lineCount||0==this._lineCount&&o+i.height>d&&0!=r)&&(o=0,n+=Math.ceil(r)+this._columnGap,r=0,l=0),i.setXY(n,o),(o+=Math.ceil(i.height))>s&&(s=o),i.width>r&&(r=i.width),l++);a=n+Math.ceil(r),h=Math.ceil(s)}else{var m;if(this._autoResizeItem&&this._lineCount>0&&(m=Math.floor((d-(this._lineCount-1)*this._lineGap)/this._lineCount)),this._autoResizeItem&&this._columnCount>0){for(e=0;e<p;e++)if(i=this.getChildAt(e),(!this.foldInvisibleItems||i.visible)&&(0==l&&(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&o+(this._lineCount>0?m:i.height)>d)&&(u++,o=0,c=0),f+=i.sourceWidth,++l==this._columnCount||e==p-1)){for(y=(_-f-(l-1)*this._columnGap)/f,n=0,l=g;l<=e;l++)i=this.getChildAt(l),this.foldInvisibleItems&&!i.visible||(i.setXY(u*_+n,o),l<e?(i.setSize(i.sourceWidth+Math.round(i.sourceWidth*y),this._lineCount>0?m:i.height,!0),n+=Math.ceil(i.width)+this._columnGap):i.setSize(_-n,this._lineCount>0?m:i.height,!0),i.height>s&&(s=i.height));o+=Math.ceil(s)+this._lineGap,s=0,l=0,g=e+1,f=0,c++}}else for(e=0;e<p;e++)i=this.getChildAt(e),this.foldInvisibleItems&&!i.visible||(0!=n&&(n+=this._columnGap),this._autoResizeItem&&this._lineCount>0&&i.setSize(i.width,m,!0),(0!=this._columnCount&&l>=this._columnCount||0==this._columnCount&&n+i.width>_&&0!=s)&&(n=0,o+=Math.ceil(s)+this._lineGap,s=0,l=0,c++,(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&o+i.height>d&&0!=r)&&(u++,o=0,c=0)),i.setXY(u*_+n,o),(n+=Math.ceil(i.width))>r&&(r=n),i.height>s&&(s=i.height),l++);h=u>0?d:o+Math.ceil(s),a=(u+1)*_}this.handleAlign(a,h),this.setBounds(0,0,a,h)}},n.prototype.setup_beforeAdd=function(i,n){e.prototype.setup_beforeAdd.call(this,i,n),i.seek(n,5),this._layout=i.readByte(),this._selectionMode=i.readByte(),this._align=t.AlignMap[i.readByte()]||t.AlignType.Center,this._verticalAlign=i.readByte(),this._lineGap=i.readShort(),this._columnGap=i.readShort(),this._lineCount=i.readShort(),this._columnCount=i.readShort(),this._autoResizeItem=i.readBool(),this._childrenRenderOrder=i.readByte(),this._apexIndex=i.readShort(),i.readBool()&&(this._margin.top=i.readInt(),this._margin.bottom=i.readInt(),this._margin.left=i.readInt(),this._margin.right=i.readInt());var o=i.readByte();if(o==t.OverflowType.Scroll){var r=i.position;i.seek(n,7),this.setupScroll(i),i.position=r}else this.setupOverflow(o);i.readBool()&&i.skip(8),i.version>=2&&(this.scrollItemToViewOnClick=i.readBool(),this.foldInvisibleItems=i.readBool()),i.seek(n,8),this._defaultItem=i.readS(),this.readItems(i)},n.prototype.readItems=function(t){var e,i,n,o;for(e=t.readShort(),i=0;i<e;i++)if(n=t.readShort(),n+=t.position,null!=(o=t.readS())||(o=this.defaultItem)){var r=this.getFromPool(o);null!=r&&(this.addChild(r),this.setupItem(t,r)),t.position=n}else t.position=n},n.prototype.setupItem=function(e,i){var n,o,r;if(null!=(n=e.readS())&&(i.text=n),null!=(n=e.readS())&&i instanceof t.GButton&&(i.selectedTitle=n),null!=(n=e.readS())&&(i.icon=n),null!=(n=e.readS())&&i instanceof t.GButton&&(i.selectedIcon=n),null!=(n=e.readS())&&(i.name=n),i instanceof t.GComponent){for(o=e.readShort(),r=0;r<o;r++){var s=i.getController(e.readS());n=e.readS(),null!=s&&(s.selectedPageId=n)}if(e.version>=2)for(o=e.readShort(),r=0;r<o;r++){var a=e.readS(),h=e.readShort(),l=e.readS(),u=i.getChildByPath(a);u&&u.setProp(h,l)}}},n.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6);var n=t.readShort();-1!=n&&(this._selectionController=this.parent.getControllerAt(n))},n}(t.GComponent);t.GList=e;var i=function(){return function(){this.width=0,this.height=0,this.updateFlag=0,this.selected=!1}}()}(fgui||(fgui={})),function(t){var e=function(){function e(){this._count=0,this._pool={}}return e.prototype.clear=function(){for(var t in this._pool)for(var e=this._pool[t],i=e.length,n=0;n<i;n++)e[n].dispose();this._pool={},this._count=0},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.getObject=function(e){if(null==(e=t.UIPackage.normalizeURL(e)))return null;var i=this._pool[e];return null!=i&&i.length?(this._count--,i.shift()):t.UIPackage.createObjectFromURL(e)},e.prototype.returnObject=function(t){var e=t.resourceURL;if(e){var i=this._pool[e];null==i&&(i=new Array,this._pool[e]=i),this._count++,i.push(t)}},e}();t.GObjectPool=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._frame=0,i._color=0,i._contentSourceWidth=0,i._contentSourceHeight=0,i._contentWidth=0,i._contentHeight=0,i._loadingTexture=null,i._playing=!0,i._url="",i._fill=t.LoaderFillType.None,i._align=t.AlignType.Left,i._verticalAlign=t.VertAlignType.Top,i._showErrorSign=!0,i._color=16777215,i}return __extends(i,e),i.prototype.createDisplayObject=function(){this._container=new t.UIContainer(this),this._container.hitArea=new PIXI.Rectangle,this.setDisplayObject(this._container),this._container.interactiveChildren=!1,this._content=new t.MovieClip(this),this._container.addChild(this._content)},i.prototype.dispose=function(){this.clearContent(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"url",{get:function(){return this._url},set:function(t){this._url!=t&&(this._url=t,this.loadContent(),this.updateGear(7))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill!=t&&(this._fill=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSize",{get:function(){return this._autoSize},set:function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},set:function(e){this._playing!=e&&(this._playing=e,this._content instanceof t.MovieClip&&(this._content.playing=e),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame!=e&&(this._frame=e,this._content instanceof t.MovieClip&&(this._content.currentFrame=e),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),i.prototype.applyColor=function(){this._content&&(this._content.tint=this._color)},Object.defineProperty(i.prototype,"showErrorSign",{get:function(){return this._showErrorSign},set:function(t){this._showErrorSign=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._content instanceof t.UIImage?this._content.texture:null},set:function(e){this.url=null,this.switchToMovieMode(!1),this._content instanceof t.UIImage&&(this._content.texture=e),e?(this._contentSourceWidth=e.orig.width,this._contentSourceHeight=e.orig.height):this._contentSourceWidth=this._contentHeight=0,this.updateLayout()},enumerable:!0,configurable:!0}),i.prototype.loadContent=function(){this.clearContent(),this._url&&(t.utils.StringUtil.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())},i.prototype.loadFromPackage=function(e){if(this._contentItem=t.UIPackage.getItemByURL(e),this._contentItem)if(this._contentItem.load(),this._contentItem.type==t.PackageItemType.Image)null==this._contentItem.texture?this.setErrorState():(this.switchToMovieMode(!1),this._content.initDisp(this._contentItem),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout());else if(this._contentItem.type==t.PackageItemType.MovieClip){this.switchToMovieMode(!0),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height;var i=this._content;i.interval=this._contentItem.interval,i.swing=this._contentItem.swing,i.repeatDelay=this._contentItem.repeatDelay,i.frames=this._contentItem.frames,i.width=this._contentSourceWidth,i.height=this._contentSourceHeight,this.updateLayout()}else this.setErrorState();else this.setErrorState()},i.prototype.switchToMovieMode=function(e){this._container.removeChildren(),e?this._content instanceof t.MovieClip||(this._content=new t.MovieClip(this)):this._content instanceof t.UIImage||(this._content=new t.UIImage(null)),this._container.addChild(this._content)},i.prototype.loadExternal=function(){var t=this,e=PIXI.Texture.from(this._url,!0);this._loadingTexture=e,e.once("update",function(){e.width&&e.height?t._loadResCompleted(e):t._loadResCompleted(null)})},i.prototype.freeExternal=function(t){PIXI.Texture.removeFromCache(t),t.destroy(null!=t.baseTexture)},i.prototype._loadResCompleted=function(t){t?this.onExternalLoadSuccess(t):(this.onExternalLoadFailed(),this._loadingTexture.removeAllListeners(),this.freeExternal(this._loadingTexture),this._loadingTexture=null),this._loadingTexture=null},i.prototype.onExternalLoadSuccess=function(e){this._container.removeChildren(),this._content&&this._content instanceof t.UIImage?this._container.addChild(this._content):(this._content=new t.UIImage(null),this._content.initDisp(),this._container.addChild(this._content)),e.frame=new PIXI.Rectangle(0,0,e.baseTexture.width,e.baseTexture.height),this._content.texture=e,this._contentSourceWidth=e.width,this._contentSourceHeight=e.height,this.updateLayout()},i.prototype.onExternalLoadFailed=function(){this.setErrorState()},i.prototype.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&t.UIConfig.loaderErrorSign&&(this._errorSign=i._errorSignPool.getObject(t.UIConfig.loaderErrorSign)),this._errorSign&&(this._errorSign.width=this.width,this._errorSign.height=this.height,this._container.addChild(this._errorSign.displayObject)))},i.prototype.clearErrorState=function(){this._errorSign&&(this._container.removeChild(this._errorSign.displayObject),i._errorSignPool.returnObject(this._errorSign),this._errorSign=null)},i.prototype.updateLayout=function(){if(null!=this._content)if(this._content.position.set(0,0),this._content.scale.set(1,1),this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,this._autoSize)this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1;else{var e=1,i=1;this._fill!=t.LoaderFillType.None&&(e=this.width/this._contentSourceWidth,i=this.height/this._contentSourceHeight,1==e&&1==i||(this._fill==t.LoaderFillType.ScaleMatchHeight?e=i:this._fill==t.LoaderFillType.ScaleMatchWidth?i=e:this._fill==t.LoaderFillType.Scale?e>i?e=i:i=e:this._fill==t.LoaderFillType.ScaleNoBorder&&(e>i?i=e:e=i),this._contentWidth=this._contentSourceWidth*e,this._contentHeight=this._contentSourceHeight*i)),this._content instanceof t.UIImage?(this._content.width=this._contentWidth,this._content.height=this._contentHeight):this._content.scale.set(e,i),this._align==t.AlignType.Center?this._content.x=Math.floor((this.width-this._contentWidth)/2):this._align==t.AlignType.Right&&(this._content.x=this.width-this._contentWidth),this._verticalAlign==t.VertAlignType.Middle?this._content.y=Math.floor((this.height-this._contentHeight)/2):this._verticalAlign==t.VertAlignType.Bottom&&(this._content.y=this.height-this._contentHeight)}else this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1)},i.prototype.clearContent=function(){this.clearErrorState(),this._content&&this._content.parent&&this._container.removeChild(this._content),this._loadingTexture&&(this._loadingTexture.removeAllListeners(),this.freeExternal(this._loadingTexture),this._loadingTexture=null),null==this._contentItem&&this._content instanceof t.UIImage&&this.freeExternal(this._content.texture),this._content&&this._content.destroy(),this._content=null,this._contentItem=null},i.prototype.handleSizeChanged=function(){this._updatingLayout||this.updateLayout();var t=this._container.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.setup_beforeAdd=function(i,n){e.prototype.setup_beforeAdd.call(this,i,n),i.seek(n,5),this._url=i.readS();var o=i.readByte();this._align=t.AlignMap[o]||t.AlignType.Center,this._verticalAlign=i.readByte(),this._fill=i.readByte(),this._shrinkOnly=i.readBool(),this._autoSize=i.readBool(),this._showErrorSign=i.readBool(),this._content.playing=i.readBool();var r=i.readInt();this._content instanceof t.GMovieClip&&(this._content.frame=r),i.readBool()&&(this.color=i.readColor()),this._content.fillMethod=i.readByte(),0!=this._content.fillMethod&&(this._content.fillOrigin=i.readByte(),this._content.fillClockwise=i.readBool(),this._content.fillAmount=i.readFloat()),this._url&&this.loadContent()},i._errorSignPool=new t.GObjectPool,i}(t.GObject);t.GLoader=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.mapPivotWidth=function(t){return t*this.sourceWidth},i.prototype.mapPivotHeight=function(t){return t*this.sourceHeight},i.prototype.handleSizeChanged=function(){null!=this._displayObject&&0!=this.sourceWidth&&0!=this.sourceHeight&&this._displayObject.scale.set(this._width/this.sourceWidth*this._scaleX,this._height/this.sourceHeight*this._scaleY)},i.prototype.handleScaleChanged=function(){null!=this._displayObject&&this._displayObject.scale.set(this._width/this.sourceWidth*this._scaleX,this._height/this.sourceHeight*this._scaleY)},Object.defineProperty(i.prototype,"touchable",{get:function(){return!1},set:function(t){this._touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._movieClip.tint},set:function(t){this._movieClip.tint=t},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this._movieClip=new t.MovieClip(this),this.setDisplayObject(this._movieClip)},Object.defineProperty(i.prototype,"playing",{get:function(){return this._movieClip.playing},set:function(t){this._movieClip.playing!=t&&(this._movieClip.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._movieClip.currentFrame},set:function(t){this._movieClip.currentFrame!=t&&(this._movieClip.currentFrame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),i.prototype.setPlaySettings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._movieClip.setPlaySettings.apply(this._movieClip,t)},i.prototype.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this._movieClip.interval=this.packageItem.interval,this._movieClip.swing=this.packageItem.swing,this._movieClip.repeatDelay=this.packageItem.repeatDelay,this._movieClip.frames=this.packageItem.frames,this._movieClip.x=0,this._movieClip.y=0,this._movieClip.width=this.sourceWidth,this._movieClip.height=this.sourceHeight},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,5),t.readBool()&&(this.color=t.readColor()),t.readByte(),this._movieClip.currentFrame=t.readInt(),this._movieClip.playing=t.readBool()},i}(t.GObject);t.GMovieClip=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._min=0,i._max=0,i._value=0,i._barMaxWidth=0,i._barMaxHeight=0,i._barMaxWidthDelta=0,i._barMaxHeightDelta=0,i._barStartX=0,i._barStartY=0,i._titleType=t.ProgressTitleType.Percent,i._value=50,i._max=100,i}return __extends(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this._titleType},set:function(t){this._titleType!=t&&(this._titleType=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(t){this._min!=t&&(this._min=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&(t.GTween.kill(this,!1,this.update),this._value=e,this.update(this._value))},enumerable:!0,configurable:!0}),i.prototype.tweenValue=function(e,i){var n,o=t.GTween.getTween(this,this.update);return null!=o?(n=o.value.x,o.kill()):n=this._value,this._value=e,t.GTween.to(n,this._value,i).setTarget(this,this.update).setEase(t.EaseType.Linear)},i.prototype.update=function(e){var i=t.ToolSet.clamp01((e-this._min)/(this._max-this._min));if(this._titleObject)switch(this._titleType){case t.ProgressTitleType.Percent:this._titleObject.text=Math.floor(100*i)+"%";break;case t.ProgressTitleType.ValueAndMax:this._titleObject.text=Math.floor(e)+"/"+Math.floor(this._max);break;case t.ProgressTitleType.Value:this._titleObject.text=""+Math.floor(e);break;case t.ProgressTitleType.Max:this._titleObject.text=""+Math.floor(this._max)}var n=this.width-this._barMaxWidthDelta,o=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH instanceof t.GImage&&this._barObjectH.fillMethod!=t.FillMethod.None?this._barObjectH.fillAmount=1-i:(this._barObjectH.width=Math.floor(n*i),this._barObjectH.x=this._barStartX+(n-this._barObjectH.width))),this._barObjectV&&(this._barObjectV instanceof t.GImage&&this._barObjectV.fillMethod!=t.FillMethod.None?this._barObjectV.fillAmount=1-i:(this._barObjectV.height=Math.floor(o*i),this._barObjectV.y=this._barStartY+(o-this._barObjectV.height)))):(this._barObjectH&&(this._barObjectH instanceof t.GImage&&this._barObjectH.fillMethod!=t.FillMethod.None?this._barObjectH.fillAmount=i:this._barObjectH.width=Math.floor(n*i)),this._barObjectV&&(this._barObjectV instanceof t.GImage&&this._barObjectV.fillMethod!=t.FillMethod.None?this._barObjectV.fillAmount=i:this._barObjectV.height=Math.floor(o*i))),this._aniObject&&this._aniObject.setProp(t.ObjectPropID.Frame,Math.floor(100*i))},i.prototype.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update(this._value)},i.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType?(this._value=t.readInt(),this._max=t.readInt(),t.version>=2&&(this._min=t.readInt()),this.update(this._value)):this.update(this._value)},i}(t.GComponent);t.GProgressBar=e}(fgui||(fgui={})),function(t){var e=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.y=0}return t.get=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.recycle=function(e){t.pool.push(e)},t.recycleMany=function(e){e&&e.length&&e.forEach(function(e){t.pool.push(e)},this),e.length=0},t.pool=[],t}();t.LineInfo=e;var i=function(i){function n(){var e=i.call(this)||this;return e._verticalAlign=t.VertAlignType.Top,e._offset=new PIXI.Point,e._singleLine=!0,e._text="",e._textWidth=0,e._textHeight=0,e._style=new PIXI.TextStyle({fontSize:12,fontFamily:t.UIConfig.defaultFont,align:t.AlignType.Left,leading:3,fill:0}),e._verticalAlign=t.VertAlignType.Top,e._text="",e._autoSize=t.AutoSizeType.Both,e._widthAutoSize=!0,e._heightAutoSize=!0,e._bitmapPool=[],e.touchable=!1,e}return __extends(n,i),n.prototype.createDisplayObject=function(){this._textField=new t.UITextField(this),this.setDisplayObject(this._textField)},n.prototype.switchBitmapMode=function(e){e&&this.displayObject==this._textField?(null==this._btContainer&&(this._btContainer=new t.UIContainer(this)),this.switchDisplayObject(this._btContainer)):e||this.displayObject!=this._btContainer||this.switchDisplayObject(this._textField)},n.prototype.dispose=function(){t.GTimer.inst.remove(this.__render,this),this._bitmapFont=null,this._bitmapPool.length=0,this._bitmapPool=null,this._style=null,i.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"text",{get:function(){return this.getText()},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),n.prototype.setText=function(e){t.Debug.log("setText .........."),null==e&&(e=""),this._text!=e&&(this._text=e,this.updateGear(6),this.parent&&this.parent._inProgressBuilding?this.renderNow():this.render())},n.prototype.getText=function(){return this._text},Object.defineProperty(n.prototype,"color",{get:function(){return this.getColor()},set:function(t){this.setColor(t)},enumerable:!0,configurable:!0}),n.prototype.getColor=function(){return this._color},n.prototype.setColor=function(t){this._color!=t&&(this._color=t,this.updateGear(4),this._style.fill=this._color,this.render())},Object.defineProperty(n.prototype,"titleColor",{get:function(){return this.getColor()},set:function(t){this.setColor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._style.lineHeight>0?this._style.lineHeight:this._fontProperties?this._fontProperties.fontSize+this._style.strokeThickness+this._style.leading:+this._style.fontSize+this._style.strokeThickness},set:function(t){this._style.lineHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this._font||t.UIConfig.defaultFont},set:function(e){this._font!=e&&(this._font=e,this._font&&t.utils.StringUtil.startsWith(this._font,"ui://")?this._bitmapFont=t.UIPackage.getBitmapFontByURL(this._font):this._style.fontFamily=this._font||t.UIConfig.defaultFont,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return+this._style.fontSize},set:function(t){t<=0||this._style.fontSize!=t&&(this._style.fontSize=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this._style.align},set:function(t){this._style.align!=t&&(this._style.align=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this._inProgressBuilding||this.layoutAlign())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._style.leading},set:function(t){this._style.leading!=t&&(this._style.leading=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._style.letterSpacing},set:function(t){this._style.letterSpacing!=t&&(this._style.letterSpacing=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"underline",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return"bold"==this._style.fontWeight},set:function(t){var e=!0===t?"bold":"normal";this._style.fontWeight!=e&&(this._style.fontWeight=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weight",{get:function(){return this._style.fontWeight},set:function(t){this._style.fontWeight!=t&&(this._style.fontWeight=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"variant",{get:function(){return this._style.fontVariant},set:function(t){this._style.fontVariant!=t&&(this._style.fontVariant=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return"italic"==this._style.fontStyle},set:function(t){var e=!0===t?"italic":"normal";this._style.fontStyle!=e&&(this._style.fontStyle=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multipleLine",{get:function(){return!this._singleLine},set:function(t){t=!t,this._singleLine!=t&&(this._singleLine=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return+this._style.strokeThickness},set:function(t){this._style.strokeThickness!=t&&(this._style.strokeThickness=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this._style.stroke},set:function(t){this._style.stroke!=t&&(this._style.stroke=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoSize",{get:function(){return this._autoSize},set:function(e){this._autoSize!=e&&(this._autoSize=e,this._widthAutoSize=e==t.AutoSizeType.Both||e==t.AutoSizeType.Shrink,this._heightAutoSize=e==t.AutoSizeType.Both||e==t.AutoSizeType.Height,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this._textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this._textHeight},enumerable:!0,configurable:!0}),n.prototype.ensureSizeCorrect=function(){this._parent&&!this._parent._inProgressBuilding&&this._sizeDirty&&this._requireRender&&this.renderNow()},n.prototype.render=function(){this._requireRender||(this._requireRender=!0,t.GTimer.inst.callLater(this.__render,this)),this._sizeDirty||!this._widthAutoSize&&!this._heightAutoSize||(this._sizeDirty=!0,this.emit("__sizeDelayChange",this))},n.prototype.applyStyle=function(){for(var t in this._style)this._textField.style[t]=this._style[t]},n.prototype.__render=function(){this._requireRender&&this.renderNow()},n.prototype.renderNow=function(e){if(void 0===e&&(e=!0),this._requireRender=!1,this._sizeDirty=!1,null==this._bitmapFont){this.switchBitmapMode(!1),this.applyStyle(),this._textField.updateMinHeight();var i=!this._widthAutoSize&&this.multipleLine;this._textField.width=this._textField.style.wordWrapWidth=i||this.autoSize==t.AutoSizeType.None?Math.ceil(this.width):1e4,this._textField.style.wordWrap=i,this._textField.style.breakWords=i,this._textField.text=this._text,this._fontProperties=PIXI.TextMetrics.measureFont(this._style.toFontString()),this._textWidth=Math.ceil(this._textField.textWidth),this._textWidth>0&&(this._textWidth+=2*n.GUTTER_X),this._textHeight=Math.ceil(this._textField.textHeight),this._textHeight>0&&(this._textHeight+=2*n.GUTTER_Y);var o=this.width,r=this.height;this.autoSize==t.AutoSizeType.Shrink?this.shrinkTextField():(this._textField.scale.set(1,1),this._widthAutoSize&&(o=this._textWidth,this._textField.width=o),this._heightAutoSize?(r=this._textHeight,this._textField.height!=this._textHeight&&(this._textField.height=this._textHeight)):(r=this.height,this._textHeight>r&&(this._textHeight=r))),e&&(this._updatingSize=!0,t.Debug.log("set size ",o,r,this.width,this.height),this.setSize(o,r),this._updatingSize=!1),this.layoutAlign()}else this.renderWithBitmapFont(e)},n.prototype.renderWithBitmapFont=function(i){var o=this;this.switchBitmapMode(!0),this._btContainer.children.forEach(function(t,e){o._bitmapPool.push(o._btContainer.getChildAt(e))},this),this._btContainer.removeChildren(),this._lines?e.recycleMany(this._lines):this._lines=[];var r,s,a=this.letterSpacing,h=this.leading-1,l=this.width-2*n.GUTTER_X,u=0,c=0,p=0,_=0,d=0,f=0,g=0,y=0,m=0,b="",v=n.GUTTER_Y,w=!this._widthAutoSize&&this.multipleLine,C=this._bitmapFont.resizable?this.fontSize/this._bitmapFont.size:1;this._textWidth=0,this._textHeight=0;for(var x=this.text.length,I=0;I<x;++I){var S=this._text.charAt(I),P=S.charCodeAt(I);if("\n"!=S)if(P>256||P<=32?(f>0&&(y=u),f=0):(0==f&&(g=u),f++)," "==S?(_=Math.ceil(this.fontSize/2),d=Math.ceil(this.fontSize)):(s=this._bitmapFont.glyphs[S])?(_=Math.ceil(s.advance*C),d=Math.ceil(s.lineHeight*C)):" "==S?(_=Math.ceil(this._bitmapFont.size*C/2),d=Math.ceil(this._bitmapFont.size*C)):(_=0,d=0),d>p&&(p=d),d>c&&(c=d),0!=u&&(u+=a),u+=_,!w||u<=l)b+=S;else{if((r=e.get()).height=c,r.textHeight=p,0==b.length)r.text=S;else if(f>0&&y>0){var T=(b+=S).length-f;r.text=t.utils.StringUtil.trimRight(b.substr(0,T)),r.width=y,b=b.substr(T+1),u-=g}else r.text=b,r.width=u-(_+a),b=S,u=_,c=d,p=d;r.y=v,v+=r.height+h,r.width>this._textWidth&&(this._textWidth=r.width),f=0,g=0,y=0,this._lines.push(r)}else b+=S,(r=e.get()).width=u,0==p&&(0==m&&(m=Math.ceil(this.fontSize*C)),0==c&&(c=m),p=c),r.height=c,m=c,r.textHeight=p,r.text=b,r.y=v,v+=r.height+h,r.width>this._textWidth&&(this._textWidth=r.width),this._lines.push(r),b="",u=0,c=0,p=0,f=0,g=0,y=0}(b.length>0||this._lines.length>0&&t.utils.StringUtil.endsWith(this._lines[this._lines.length-1].text,"\n"))&&((r=e.get()).width=u,0==c&&(c=m),0==p&&(p=c),r.height=c,r.textHeight=p,r.text=b,r.y=v,r.width>this._textWidth&&(this._textWidth=r.width),this._lines.push(r)),this._textWidth>0&&(this._textWidth+=2*n.GUTTER_X),0==this._lines.length?this._textHeight=0:(r=this._lines[this._lines.length-1],this._textHeight=r.y+r.height+n.GUTTER_Y);var O,j=0;O=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width,j=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height,i&&(this._updatingSize=!0,this.setSize(O,j),this._updatingSize=!1),0!=O&&0!=j&&(l=this.width-2*n.GUTTER_X,this._lines.forEach(function(e){var i=n.GUTTER_X,r=0,h=0;r=o.align==t.AlignType.Center?(l-e.width)/2:o.align==t.AlignType.Right?l-e.width:0,x=e.text.length;for(var u=0;u<x;u++){var c=e.text.charAt(u);if(null!=(s=o._bitmapFont.glyphs[c])){h=(e.height+e.textHeight)/2-Math.ceil(s.lineHeight*C);var p=void 0;(p=o._bitmapPool.length?o._bitmapPool.pop():new PIXI.Sprite).x=i+r+Math.ceil(s.offsetX*C),p.y=e.y+h+Math.ceil(s.offsetY*C),p.texture=s.texture,p.scale.set(C,C),p.tint=16777215,!0===o._bitmapFont.colorable&&"number"==typeof o._color&&(p.tint=o._color),o._btContainer.addChild(p),i+=a+Math.ceil(s.advance*C)}else i+=" "==c?a+Math.ceil(o._bitmapFont.size*C/2):a}}))},n.prototype.localToGlobal=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),t-=this._offset.x,e-=this._offset.y,i.prototype.localToGlobal.call(this,t,e,n)},n.prototype.globalToLocal=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var o=i.prototype.globalToLocal.call(this,t,e,n);return o.x-=this._offset.x,o.y-=this._offset.y,o},n.prototype.handleSizeChanged=function(){this._updatingSize||(null!=this._bitmapFont?this._widthAutoSize||this.render():this._inProgressBuilding?(this._textField.width=this.width,this._textField.height=this.height):this._autoSize==t.AutoSizeType.Shrink?this.shrinkTextField():this._widthAutoSize||(this._heightAutoSize?this._textField.width=this.width:(this._textField.width=this.width,this._textField.height=this.height)),this.layoutAlign())},n.prototype.shrinkTextField=function(){var t=Math.min(1,this.width/this._textWidth);this._textField.scale.set(t,t)},n.prototype.layoutAlign=function(){var e=this._textWidth,i=this._textHeight;if(this.autoSize==t.AutoSizeType.Shrink&&(e*=this.displayObject.scale.x,i*=this.displayObject.scale.y),this._verticalAlign==t.VertAlignType.Top||0==i)this._offset.y=n.GUTTER_Y;else{var o=Math.max(0,this.height-i);this._verticalAlign==t.VertAlignType.Middle?this._offset.y=.5*o:this._verticalAlign==t.VertAlignType.Bottom&&(this._offset.y=o)}var r=0;switch(this._style.align){case"center":r=.5*(this.width-e);break;case"right":r=this.width-e}this._offset.x=r,this.updatePosition()},n.prototype.updatePosition=function(){this.displayObject.position.set(Math.floor(this.x+this._offset.x),Math.floor(this.y+this._offset.y))},n.prototype.handleXYChanged=function(){i.prototype.handleXYChanged.call(this),this._displayObject&&this.updatePosition()},n.prototype.setup_beforeAdd=function(e,n){i.prototype.setup_beforeAdd.call(this,e,n),e.seek(n,5),this._font=e.readS(),this._style.fontSize=e.readShort(),this.color=e.readColor(),this.align=t.AlignMap[e.readByte()],console.log("text align",this.align),this.verticalAlign=e.readByte(),this._style.leading=e.readShort(),this._style.letterSpacing=e.readShort(),this.ubbEnabled=e.readBool(),this._autoSize=e.readByte(),this._widthAutoSize=this._autoSize==t.AutoSizeType.Both,this._heightAutoSize=this._autoSize==t.AutoSizeType.Both||this._autoSize==t.AutoSizeType.Height,this.underline=e.readBool(),this.italic=e.readBool(),this.bold=e.readBool(),this.multiline=!e.readBool(),e.readBool()&&(this.strokeColor=e.readColor(),this.stroke=e.readFloat()+1),e.readBool()&&e.skip(12),e.readBool()&&(this._templateVars={}),t.Debug.log("setup_beforeAdd",this.width,this.height)},n.prototype.setup_afterAdd=function(t,e){i.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6);var n=t.readS();null!=n&&(this.text=n),this._sizeDirty=!1,this._textField.init(),console.log("setup_afterAdd",this.x,this.y,this.width,this.height)},n.GUTTER_X=2,n.GUTTER_Y=2,n}(t.GObject);t.GTextField=i}(fgui||(fgui={})),function(t){var e=function(){return function(){}}();t.TextBlock=e;var i=function(t){function e(){var e=t.call(this)||this;return e._textField.interactive=!0,e._textField.interactiveChildren=!1,e.on("__linkClick",e._clickLink,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"ubbEnabled",{get:function(){return this._ubbEnabled},set:function(t){this._ubbEnabled!=t&&(this._ubbEnabled=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFlow",{set:function(t){this._textFlow=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{set:function(t){this._text=t,null==this._text&&(this._text=""),this._textField.width=this.width,this.updateGear(6),this.render()},enumerable:!0,configurable:!0}),e.prototype._clickLink=function(t){this.emit("__linkClick",t.text,this)},e.prototype.dispose=function(){this.off("__linkClick",this._clickLink,this),t.prototype.dispose.call(this)},e.prototype.updateTextFieldText=function(){},e}(t.GTextField);t.GRichTextField=i}(fgui||(fgui={})),function(t){var e=function(){return function(){this.touchDown=!1,this.mouseX=0,this.mouseY=0}}();t.GRootMouseStatus=e;var i=function(i){function n(){var e=i.call(this)||this;return null==n._inst&&(n._inst=e),e.opaque=!1,e._popupStack=[],e._justClosedPopups=[],e._uid=n.uniqueID++,t.utils.DOMEventManager.inst.on("__mouseWheel",e.dispatchMouseWheel,e),e}return __extends(n,i),Object.defineProperty(n,"inst",{get:function(){return null==n._inst&&new n,n._inst},enumerable:!0,configurable:!0}),Object.defineProperty(n,"globalMouseStatus",{get:function(){return n._gmStatus},enumerable:!0,configurable:!0}),n.prototype.attachTo=function(e,i){t.GTimer.inst.setTicker(e.ticker),t.TweenManager._ticker=e.ticker,this._uiStage&&(this._uiStage.off("__sizeChanged",this._winResize,this),this._uiStage.nativeStage.off(t.InteractiveEvents.Down,this._stageDown,this),this._uiStage.nativeStage.off(t.InteractiveEvents.Up,this._stageUp,this),this._uiStage.nativeStage.off(t.InteractiveEvents.Move,this._stageMove,this),this._uiStage.nativeStage.removeChild(this._displayObject),this._uiStage.dispose()),this._uiStage=new t.UIStage(e,i),this._uiStage.on("__sizeChanged",this._winResize,this),this._uiStage.nativeStage.on(t.InteractiveEvents.Down,this._stageDown,this),this._uiStage.nativeStage.on(t.InteractiveEvents.Up,this._stageUp,this),this._uiStage.nativeStage.on(t.InteractiveEvents.Move,this._stageMove,this),this._uiStage.nativeStage.addChild(this._displayObject),this._winResize(this._uiStage),this._modalLayer||(this._modalLayer=new t.GGraph,this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,0,0,t.UIConfig.modalLayerColor,t.UIConfig.modalLayerAlpha),this._modalLayer.addRelation(this,t.RelationType.Size))},Object.defineProperty(n.prototype,"uniqueID",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stageWidth",{get:function(){return this._uiStage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stageHeight",{get:function(){return this._uiStage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentScaleFactor",{get:function(){return this._uiStage.resolution},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"applicationContext",{get:function(){return this._uiStage.applicationContext},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nativeStage",{get:function(){return this._uiStage.nativeStage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orientation",{get:function(){return this._uiStage.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stageWrapper",{get:function(){return this._uiStage},enumerable:!0,configurable:!0}),n.prototype.dispatchMouseWheel=function(t){var e=this.getObjectUnderPoint(n.globalMouseStatus.mouseX,n.globalMouseStatus.mouseY);if(null!=e)for(;e.parent&&e.parent!=this;)e.emit("__mouseWheel",t),e=e.parent},n.prototype.getObjectUnderPoint=function(e,i){n.sHelperPoint.set(e,i);var o=this._uiStage.applicationContext.renderer.plugins.interaction.hitTest(n.sHelperPoint,this.nativeStage);return t.GObject.cast(o)},n.prototype.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},n.prototype.hideWindow=function(t){t.hide()},n.prototype.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},n.prototype.bringToFront=function(e){var i;for(i=null==this._modalLayer.parent||e.modal?this.numChildren-1:this.getChildIndex(this._modalLayer)-1;i>=0;i--){var n=this.getChildAt(i);if(n==e)return;if(n instanceof t.Window)break}i>=0&&this.setChildIndex(e,i)},n.prototype.showModalWait=function(e){void 0===e&&(e=null),null!=t.UIConfig.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.globalModalWaiting),this._modalWaitPane.addRelation(this,t.RelationType.Size)),this._modalWaitPane.setSize(this.width,this.height),this.addChild(this._modalWaitPane),this._modalWaitPane.text=e)},n.prototype.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)},n.prototype.closeAllExceptModals=function(){this._children.slice().forEach(function(e){e instanceof t.Window&&!e.modal&&e.hide()},this)},n.prototype.closeAllWindows=function(){this._children.slice().forEach(function(e){e instanceof t.Window&&e.hide()},this)},n.prototype.getTopWindow=function(){for(var e=this.numChildren-1;e>=0;e--){var i=this.getChildAt(e);if(i instanceof t.Window)return i}return null},Object.defineProperty(n.prototype,"hasModalWindow",{get:function(){return null!=this._modalLayer.parent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"modalWaiting",{get:function(){return this._modalWaitPane&&this._modalWaitPane.inContainer},enumerable:!0,configurable:!0}),n.prototype.showPopup=function(e,i,o){if(void 0===i&&(i=null),void 0===o&&(o=t.PopupDirection.Auto),this._popupStack.length>0){var r=this._popupStack.indexOf(e);if(-1!=r)for(var s=this._popupStack.length-1;s>=r;s--)this.removeChild(this._popupStack.pop())}var a;this._popupStack.push(e),this.addChild(e),this.adjustModalLayer();var h,l,u=0,c=0;i?(a=i.localToRoot(),u=i.width,c=i.height):a=this.globalToLocal(n._gmStatus.mouseX,n._gmStatus.mouseY),(h=a.x)+e.width>this.width&&(h=h+u-e.width),l=a.y+c,(o==t.PopupDirection.Auto&&l+e.height>this.height||o==t.PopupDirection.Up)&&(l=a.y-e.height-1)<0&&(l=0,h+=.5*u),e.x=h,e.y=l},n.prototype.togglePopup=function(t,e,i){void 0===e&&(e=null),-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},n.prototype.hidePopup=function(t){var e;if(void 0===t&&(t=null),null!=t){var i=this._popupStack.indexOf(t);if(-1!=i)for(e=this._popupStack.length-1;e>=i;e--)this.closePopup(this._popupStack.pop())}else{for(e=this._popupStack.length-1;e>=0;e--)this.closePopup(this._popupStack[e]);this._popupStack.length=0}},Object.defineProperty(n.prototype,"hasAnyPopup",{get:function(){return 0!=this._popupStack.length},enumerable:!0,configurable:!0}),n.prototype.closePopup=function(e){null!=e.parent&&(e instanceof t.Window?e.hide():this.removeChild(e))},n.prototype.showTooltips=function(e){if(null==this._defaultTooltipWin){var i=t.UIConfig.tooltipsWin;if(!i)return void console.error("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=t.UIPackage.createObjectFromURL(i)}this._defaultTooltipWin.text=e,this.showTooltipsWin(this._defaultTooltipWin)},n.prototype.playOneShotSound=function(t,e){void 0===e&&(e=1)},n.prototype.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this._tooltipWin=t;var i=0,o=0;null==e?(i=n._gmStatus.mouseX+10,o=n._gmStatus.mouseY+20):(i=e.x,o=e.y);var r=this.globalToLocal(i,o);i=r.x,o=r.y,i+this._tooltipWin.width>this.width&&(i=i-this._tooltipWin.width-1)<0&&(i=10),o+this._tooltipWin.height>this.height&&(o=o-this._tooltipWin.height-1,i-this._tooltipWin.width-1>0&&(i=i-this._tooltipWin.width-1),o<0&&(o=10)),this._tooltipWin.x=i,this._tooltipWin.y=o,this.addChild(this._tooltipWin)},n.prototype.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)},Object.defineProperty(n.prototype,"focus",{get:function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject},set:function(t){if(t&&(!t.focusable||!t.onStage))throw new Error("Invalid target to focus");this.setFocus(t)},enumerable:!0,configurable:!0}),n.prototype.setFocus=function(t){this._focusedObject!=t&&(this._focusedObject=t,this.emit("__focusChanged",this))},n.prototype.adjustModalLayer=function(){var e=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,e-1);for(var i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n instanceof t.Window&&n.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,i):this.setChildIndexBefore(this._modalLayer,i))}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)},n.prototype._stageDown=function(e){n._gmStatus.mouseX=e.data.global.x,n._gmStatus.mouseY=e.data.global.y,n._gmStatus.touchDown=!0;for(var i=e.target;i&&i!=this.nativeStage;){if(t.isUIObject(i)){var o=i.UIOwner;if(o.touchable&&o.focusable){this.setFocus(o);break}}i=i.parent}null!=this._tooltipWin&&this.hideTooltips(),this.checkPopups(e.target)},n.prototype.checkPopups=function(e){if(!this._checkingPopups&&(this._checkingPopups=!0,this._justClosedPopups.length=0,this._popupStack.length>0)){for(var i=e;i&&i!=this.nativeStage;){if(t.isUIObject(i)){var n=this._popupStack.indexOf(i.UIOwner);if(-1!=n){for(var o=void 0,r=this._popupStack.length-1;r>n;r--)o=this._popupStack.pop(),this.closePopup(o),this._justClosedPopups.push(o);return}}i=i.parent}var s=void 0;for(r=this._popupStack.length-1;r>=0;r--)s=this._popupStack[r],this.closePopup(s),this._justClosedPopups.push(s);this._popupStack.length=0}},n.prototype._stageMove=function(t){n._gmStatus.mouseX=t.data.global.x,n._gmStatus.mouseY=t.data.global.y},n.prototype._stageUp=function(t){n._gmStatus.touchDown=!1,this._checkingPopups=!1},n.prototype._winResize=function(t){this.setSize(t.stageWidth,t.stageHeight)},n.contentScaleLevel=0,n.uniqueID=0,n.contentScaleFactor=1,n._gmStatus=new e,n}(t.GComponent);t.GRoot=i}(fgui||(fgui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._dragOffset=new PIXI.Point,t._scrollPerc=0,t}return __extends(i,e),i.prototype.setScrollPane=function(t,e){this._target=t,this._vertical=e},Object.defineProperty(i.prototype,"displayPerc",{set:function(t){this._grip&&(this._vertical?(this._fixedGripSize||(this._grip.height=t*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=t*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollPerc",{get:function(){return this._scrollPerc},set:function(t){this._grip&&(this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minSize",{get:function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)},enumerable:!0,configurable:!0}),i.prototype._gripMouseDown=function(e){if(this._bar){e.stopPropagation(),this._dragOffset=e.data.getLocalPosition(this.displayObject,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y;var i=t.GRoot.inst.nativeStage;i.on(t.InteractiveEvents.Move,this._gripDragging,this),i.on(t.InteractiveEvents.Up,this._gripDraggingEnd,this)}},i.prototype._gripDragging=function(t){var e=t.data.getLocalPosition(this.displayObject,i.sScrollbarHelperPoint);if(this._vertical){var n=e.y-this._dragOffset.y;this._target.setPercY((n-this._bar.y)/(this._bar.height-this._grip.height),!1)}else{var o=e.x-this._dragOffset.x;this._target.setPercX((o-this._bar.x)/(this._bar.width-this._grip.width),!1)}},i.prototype._gripDraggingEnd=function(e){var i=t.GRoot.inst.nativeStage;i.off(t.InteractiveEvents.Move,this._gripDragging,this),i.off(t.InteractiveEvents.Up,this._gripDraggingEnd,this)},i.prototype._arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft()},i.prototype._arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight()},i.prototype._barMouseDown=function(t){var e=t.data.getLocalPosition(this._grip.displayObject,i.sScrollbarHelperPoint);this._vertical?e.y<0?this._target.scrollUp(4):this._target.scrollDown(4):e.x<0?this._target.scrollLeft(4):this._target.scrollRight(4)},i.prototype.dispose=function(){this.off(t.InteractiveEvents.Down,this._barMouseDown,this),this._arrowButton1&&this._arrowButton1.off(t.InteractiveEvents.Down,this._arrowButton1Click,this),this._arrowButton2&&this._arrowButton2.off(t.InteractiveEvents.Down,this._arrowButton2Click,this),this._grip.off(t.InteractiveEvents.Down,this._gripMouseDown,this),this._gripDraggingEnd(null),e.prototype.dispose.call(this)},i.sScrollbarHelperPoint=new PIXI.Point,i}(t.GComponent);t.GScrollBar=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._min=0,i._max=0,i._value=0,i._barMaxWidth=0,i._barMaxHeight=0,i._barMaxWidthDelta=0,i._barMaxHeightDelta=0,i._titleType=t.ProgressTitleType.Percent,i._value=50,i._max=100,i._clickPos=new PIXI.Point,i}return __extends(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this._titleType},set:function(t){this._titleType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.update())},enumerable:!0,configurable:!0}),i.prototype.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t)},i.prototype.updateWidthPercent=function(e){if(this._titleObject)switch(this._titleType){case t.ProgressTitleType.Percent:this._titleObject.text=Math.round(100*e)+"%";break;case t.ProgressTitleType.ValueAndMax:this._titleObject.text=this._value+"/"+this._max;break;case t.ProgressTitleType.Value:this._titleObject.text=""+this._value;break;case t.ProgressTitleType.Max:this._titleObject.text=""+this._max}this._barObjectH&&(this._barObjectH.width=(this.width-this._barMaxWidthDelta)*e),this._barObjectV&&(this._barObjectV.height=(this.height-this._barMaxHeightDelta)*e),this._aniObject instanceof t.GMovieClip&&(this._aniObject.frame=Math.round(100*e))},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._inProgressBuilding||this.update()},i.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),t.seek(i,6)&&t.readByte()==this.packageItem.objectType?(this._value=t.readInt(),this._max=t.readInt(),t.version>=2&&(this._min=t.readInt()),this.update()):this.update()},i.prototype._gripMouseDown=function(e){this._clickPos=this.globalToLocal(e.data.global.x,e.data.global.y),this._clickPercent=this._value/this._max,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this._gripMouseMove,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this._gripMouseUp,this)},i.prototype._gripMouseMove=function(t){var e,n=this.globalToLocal(t.data.global.x,t.data.global.y,i.sSilderHelperPoint),o=n.x-this._clickPos.x,r=n.y-this._clickPos.y;(e=this._barObjectH?this._clickPercent+o/this._barMaxWidth:this._clickPercent+r/this._barMaxHeight)>1?e=1:e<0&&(e=0);var s=Math.round(this._max*e);s!=this._value&&(this._value=s,this.emit("__stateChanged",this)),this.updateWidthPercent(e)},i.prototype._gripMouseUp=function(e){var i=this._value/this._max;this.updateWidthPercent(i),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._gripMouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._gripMouseUp,this)},i.prototype.dispose=function(){this._gripObject&&this._gripObject.off(t.InteractiveEvents.Down,this._gripMouseDown,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._gripMouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._gripMouseUp,this),e.prototype.dispose.call(this)},i.sSilderHelperPoint=new PIXI.Point,i}(t.GComponent);t.GSlider=e}(fgui||(fgui={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._util=null,t._isTyping=!1,t.focusable=!0,t.editable=!0,t.type="text",t.on("removed",t.removed,t),t.on("added",t.added,t),t._util.initialize(),t}return __extends(i,e),i.prototype.createDisplayObject=function(){e.prototype.createDisplayObject.call(this),this._displayObject.hitArea=new PIXI.Rectangle},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this);var t=this._displayObject.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.removed=function(t){this._util&&this._util.destroy()},i.prototype.added=function(t){this._util&&this._util.initialize()},i.prototype.requestFocus=function(){this.root.focus=this,this._util._onFocus()},Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._editable?(this._util||(this._util=new t.utils.InputDelegate(this)),this._util.initialize()):this._util&&this._util.destroy(),this.touchable=this._editable)},enumerable:!0,configurable:!0}),i.prototype.changeToPassText=function(t){for(var e="",i=0,n=t.length;i<n;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e},i.prototype.getText=function(){return this._util.text},i.prototype.setText=function(t){null==t&&(t=""),this._text!=t&&(this._util.text=t,e.prototype.setText.call(this,t))},i.prototype.setColor=function(t){e.prototype.setColor.call(this,t),this._util.setColor(t)},Object.defineProperty(i.prototype,"promptText",{get:function(){return this._util._getProperty("placeholder")},set:function(t){null==t&&(t=""),this._util._setProperty("placeholder",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLength",{get:function(){return parseInt(this._util._getProperty("maxlength"))||0},set:function(t){this._util._setProperty("maxlength",String(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restrict",{get:function(){return this._util._restrict},set:function(t){this._util._restrict=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"password",{get:function(){return"password"==this.type},set:function(t){this.type="password"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._util.type},set:function(t){this._util.type=t},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.off("removed",this.removed,this),this.off("added",this.added,this),this._util.destroy(),this._util=null},i.prototype.renderNow=function(t){void 0===t&&(t=!0),this._requireRender=!1,this._sizeDirty=!1,this._util._updateProperties(),this._isTyping&&this.decorateInputbox();var i=this._text;"password"==this.type&&(this._text=this.changeToPassText(this._text)),e.prototype.renderNow.call(this,t),this._text=i},i.prototype.decorateInputbox=function(){},i.prototype.setup_beforeAdd=function(i,n){e.prototype.setup_beforeAdd.call(this,i,n),i.seek(n,4);var o=i.readS();null!=o&&(this.promptText=o),null!=(o=i.readS())&&(this.restrict=o);var r=i.readInt();0!=r&&(this.maxLength=r),r=i.readInt(),i.readBool()&&(this.password=!0),t.Debug.log(this.password,this.promptText),this.updateVertAlign()},i.prototype.updateVertAlign=function(){},i.prototype.setup_afterAdd=function(t,i){e.prototype.setup_afterAdd.call(this,t,i),this._textField.text="dddddddddddddddddd",(!this._text||this._text.length<=0)&&this.promptText&&(this._textField.text=this.promptText,this.password=!1)},i}(t.GTextField);t.GTextInput=e}(fgui||(fgui={})),function(t){var e=function(){function t(){this._enumIdx=0,this._enumCount=0,this._curTime=Date.now(),this._lastTime=0,this._items=[],this._itemPool=[]}return Object.defineProperty(t.prototype,"_enumI",{get:function(){return this._enumIdx},set:function(t){this._enumIdx=t},enumerable:!0,configurable:!0}),t.prototype.getItem=function(){return this._itemPool.length?this._itemPool.pop():new i},t.prototype.findItem=function(t,e){for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];if(o.callback==t&&o.thisObj==e)return o}return null},t.prototype.add=function(t,e,i,n,o){var r=this.findItem(i,n);r||((r=this.getItem()).callback=i,r.thisObj=n,this._items.push(r)),r.delay=t,r.counter=0,r.repeat=e,r.param=o,r.end=!1},t.prototype.addLoop=function(t,e,i,n){this.add(t,0,e,i,n)},t.prototype.callLater=function(t,e,i){this.add(1,1,t,e,i)},t.prototype.callDelay=function(t,e,i,n){this.add(t,1,e,i,n)},t.prototype.callBy24Fps=function(e,i,n){void 0===n&&(n=null),this.add(t.FPS24,0,e,i,n)},t.prototype.exists=function(t,e){return null!=this.findItem(t,e)},t.prototype.remove=function(t,e){var i=this.findItem(t,e);if(i){var n=this._items.indexOf(i);this._items.splice(n,1),n<this._enumIdx&&this._enumIdx--,this._enumCount--,i.callback=null,i.param=null,this._itemPool.push(i)}},t.prototype.__timer=function(e){for(t.time=e,t.deltaTime=e-this._lastTime,this._lastTime=e,this._enumI=0,this._enumCount=this._items.length;this._enumI<this._enumCount;){var i=this._items[this._enumI];this._enumI++,i.advance(t.deltaTime)&&(i.end&&(this._enumI--,this._enumCount--,this._items.splice(this._enumI,1)),i.hasParam?i.callback.call(i.thisObj,i.param):i.callback.call(i.thisObj),i.end&&(i.reset(),this._itemPool.push(i)))}return!1},Object.defineProperty(t.prototype,"ticker",{get:function(){return this._ticker},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curTime",{get:function(){return this._curTime},enumerable:!0,configurable:!0}),t.prototype.advance=function(){for(this._enumIdx=0,this._enumCount=this._items.length;this._enumIdx<this._enumCount;){var t=this._items[this._enumIdx];this._enumIdx++;var e=this._ticker.deltaTime/PIXI.settings.TARGET_FPMS;if(this._curTime+=e,t.advance(e)){if(t.end&&(this._enumIdx--,this._enumCount--,this._items.splice(this._enumIdx,1),this._itemPool.push(t)),t.callback){var i=[e];t.param&&t.param instanceof Array?i=t.param.concat(i):void 0!==t.param&&i.unshift(t.param),t.callback.apply(t.thisObj,i)}t.end&&(t.callback=t.thisObj=t.param=null)}}},t.prototype.setTicker=function(t){this._ticker&&this._ticker!=t&&this._ticker.remove(this.advance,this),this._ticker=t,this._ticker.add(this.advance,this,PIXI.UPDATE_PRIORITY.NORMAL),this._ticker.started||this._ticker.start()},t.FPS24=1e3/24,t.deltaTime=0,t.time=0,t.inst=new t,t}();t.GTimer=e;var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}return t.prototype.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay&&(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),this.repeat>0&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0)},t.prototype.reset=function(){this.callback=null,this.thisObj=null,this.param=null},t}()}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._indent=15,i._rootNode=new t.GTreeNode(!0),i._rootNode._setTree(i),i._rootNode.expanded=!0,i}return __extends(i,e),Object.defineProperty(i.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"indent",{get:function(){return this._indent},set:function(t){this._indent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clickToExpand",{get:function(){return this._clickToExpand},set:function(t){this._clickToExpand=t},enumerable:!0,configurable:!0}),i.prototype.getSelectedNode=function(){return-1!=this.selectedIndex?this.getChildAt(this.selectedIndex)._treeNode:null},i.prototype.getSelectedNodes=function(t){t||(t=new Array),i.helperIntList.length=0,e.prototype.getSelection.call(this,i.helperIntList);for(var n=i.helperIntList.length,o=new Array,r=0;r<n;r++){var s=this.getChildAt(i.helperIntList[r])._treeNode;o.push(s)}return o},i.prototype.selectNode=function(t,e){for(var i=t.parent;null!=i&&i!=this._rootNode;)i.expanded=!0,i=i.parent;t._cell&&this.addSelection(this.getChildIndex(t._cell),e)},i.prototype.unselectNode=function(t){t._cell&&this.removeSelection(this.getChildIndex(t._cell))},i.prototype.expandAll=function(t){t||(t=this._rootNode),t.expanded=!0;for(var e=t.numChildren,i=0;i<e;i++){var n=t.getChildAt(i);n.isFolder&&this.expandAll(n)}},i.prototype.collapseAll=function(t){t||(t=this._rootNode),t!=this._rootNode&&(t.expanded=!1);for(var e=t.numChildren,i=0;i<e;i++){var n=t.getChildAt(i);n.isFolder&&this.collapseAll(n)}},i.prototype.createCell=function(e){var i=this.getFromPool(e._resURL?e._resURL:this.defaultItem);if(!i)throw new Error("cannot create tree node object.");i._treeNode=e,e._cell=i;var n,o=i.getChild("indent");null!=o&&(o.width=(e.level-1)*this._indent),(n=i.getController("expanded"))&&(n.on("__stateChanged",this.__expandedStateChanged,this),n.selectedIndex=e.expanded?1:0),(n=i.getController("leaf"))&&(n.selectedIndex=e.isFolder?0:1),e.isFolder&&i.on(t.InteractiveEvents.Down,this.__cellMouseDown,this),this.treeNodeRender&&this.treeNodeRender.call(this.callbackThisObj,e,i)},i.prototype._afterInserted=function(t){t._cell||this.createCell(t);var e=this.getInsertIndexForNode(t);this.addChildAt(t._cell,e),this.treeNodeRender&&this.treeNodeRender.call(this.callbackThisObj,t,t._cell),t.isFolder&&t.expanded&&this.checkChildren(t,e)},i.prototype.getInsertIndexForNode=function(t){var e=t.getPrevSibling();null==e&&(e=t.parent);for(var i=this.getChildIndex(e._cell)+1,n=t.level,o=this.numChildren,r=i;r<o;r++){if(this.getChildAt(r)._treeNode.level<=n)break;i++}return i},i.prototype._afterRemoved=function(t){this.removeNode(t)},i.prototype._afterExpanded=function(t){if(t!=this._rootNode){if(null!=this.treeNodeWillExpand&&this.treeNodeWillExpand.call(this.callbackThisObj,t,!0),null!=t._cell){this.treeNodeRender&&this.treeNodeRender.call(this.callbackThisObj,t,t._cell);var e=t._cell.getController("expanded");e&&(e.selectedIndex=1),null!=t._cell.parent&&this.checkChildren(t,this.getChildIndex(t._cell))}}else this.checkChildren(this._rootNode,0)},i.prototype._afterCollapsed=function(t){if(t!=this._rootNode){if(this.treeNodeWillExpand&&this.treeNodeWillExpand.call(this.callbackThisObj,t,!1),null!=t._cell){this.treeNodeRender&&this.treeNodeRender.call(this.callbackThisObj,t,t._cell);var e=t._cell.getController("expanded");e&&(e.selectedIndex=0),null!=t._cell.parent&&this.hideFolderNode(t)}}else this.checkChildren(this._rootNode,0)},i.prototype._afterMoved=function(t){var e,i=this.getChildIndex(t._cell);e=t.isFolder?this.getFolderEndIndex(i,t.level):i+1;var n,o,r=this.getInsertIndexForNode(t),s=e-i;if(r<i)for(n=0;n<s;n++)o=this.getChildAt(i+n),this.setChildIndex(o,r+n);else for(n=0;n<s;n++)o=this.getChildAt(i),this.setChildIndex(o,r)},i.prototype.getFolderEndIndex=function(t,e){for(var i=this.numChildren,n=t+1;n<i;n++){if(this.getChildAt(n)._treeNode.level<=e)return n}return i},i.prototype.checkChildren=function(t,e){for(var i=t.numChildren,n=0;n<i;n++){e++;var o=t.getChildAt(n);null==o._cell&&this.createCell(o),o._cell.parent||this.addChildAt(o._cell,e),o.isFolder&&o.expanded&&(e=this.checkChildren(o,e))}return e},i.prototype.hideFolderNode=function(t){for(var e=t.numChildren,i=0;i<e;i++){var n=t.getChildAt(i);n._cell&&this.removeChild(n._cell),n.isFolder&&n.expanded&&this.hideFolderNode(n)}},i.prototype.removeNode=function(t){if(null!=t._cell&&(null!=t._cell.parent&&this.removeChild(t._cell),this.returnToPool(t._cell),t._cell._treeNode=null,t._cell=null),t.isFolder)for(var e=t.numChildren,i=0;i<e;i++){var n=t.getChildAt(i);this.removeNode(n)}},i.prototype.__cellMouseDown=function(e){var i=t.GObject.cast(e.currentTarget);if(i){var n=i._treeNode;n&&(this._expandedStatusInEvt=n.expanded)}},i.prototype.__expandedStateChanged=function(t){t.parent._treeNode.expanded=1==t.selectedIndex},i.prototype.setup_beforeAdd=function(t,i){e.prototype.setup_beforeAdd.call(this,t,i),t.seek(i,9),this._indent=t.readInt(),this._clickToExpand=t.readByte()},i.prototype.readItems=function(e){var i,n,o,r,s,a,h,l=0;for(i=e.readShort(),n=0;n<i;n++)if(o=e.readShort(),o+=e.position,null!=(r=e.readS())||(r=this.defaultItem)){s=e.readBool(),h=e.readByte();var u=new t.GTreeNode(s,r);if(u.expanded=!0,0==n)this._rootNode.addChild(u);else if(h>l)a.addChild(u);else if(h<l){for(var c=h;c<=l;c++)a=a.parent;a.addChild(u)}else a.parent.addChild(u);a=u,l=h,this.setupItem(e,u.cell),e.position=o}else e.position=o},i.helperIntList=new Array,i}(t.GList);t.GTree=e}(fgui||(fgui={})),function(t){var e=function(){function t(t,e){this._expanded=!1,this._level=0,this._resURL=e,t&&(this._children=new Array)}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this._expanded},set:function(t){null!=this._children&&this._expanded!=t&&(this._expanded=t,null!=this._tree&&(this._expanded?this._tree._afterExpanded(this):this._tree._afterCollapsed(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFolder",{get:function(){return null!=this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return null!=this._cell?this._cell.text:null},set:function(t){null!=this._cell&&(this._cell.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return null!=this._cell?this._cell.icon:null},set:function(t){null!=this._cell&&(this._cell.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),t.prototype._setLevel=function(t){this._level=t},t.prototype.addChild=function(t){return this.addChildAt(t,this._children.length),t},t.prototype.addChildAt=function(t,e){if(!t)throw new Error("child is null");var i=this._children.length;if(e>=0&&e<=i){if(t._parent==this)this.setChildIndex(t,e);else t._parent&&t._parent.removeChild(t),e==this._children.length?this._children.push(t):this._children.splice(e,0,t),t._parent=this,t._level=this._level+1,t._setTree(this._tree),(null!=this._tree&&this==this._tree.rootNode||null!=this._cell&&null!=this._cell.parent&&this._expanded)&&this._tree._afterInserted(t);return t}throw new RangeError("Invalid child index")},t.prototype.removeChild=function(t){var e=this._children.indexOf(t);return-1!=e&&this.removeChildAt(e),t},t.prototype.removeChildAt=function(t){if(t>=0&&t<this.numChildren){var e=this._children[t];return this._children.splice(t,1),e._parent=null,null!=this._tree&&(e._setTree(null),this._tree._afterRemoved(e)),e}throw"Invalid child index"},t.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var i=t;i<=e;++i)this.removeChildAt(t)},t.prototype.getChildAt=function(t){if(t>=0&&t<this.numChildren)return this._children[t];throw"Invalid child index"},t.prototype.getChildIndex=function(t){return this._children.indexOf(t)},t.prototype.getPrevSibling=function(){if(null==this._parent)return null;var t=this._parent._children.indexOf(this);return t<=0?null:this._parent._children[t-1]},t.prototype.getNextSibling=function(){if(null==this._parent)return null;var t=this._parent._children.indexOf(this);return t<0||t>=this._parent._children.length-1?null:this._parent._children[t+1]},t.prototype.setChildIndex=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";var n=this._children.length;e<0?e=0:e>n&&(e=n),i!=e&&(this._children.splice(i,1),this._children.splice(e,0,t),(null!=this._tree&&this==this._tree.rootNode||null!=this._cell&&null!=this._cell.parent&&this._expanded)&&this._tree._afterMoved(t))},t.prototype.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw"Not a child of this container";this.swapChildrenAt(i,n)},t.prototype.swapChildrenAt=function(t,e){var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),t.prototype.expandToRoot=function(){for(var t=this;t;)t.expanded=!0,t=t.parent},Object.defineProperty(t.prototype,"tree",{get:function(){return this._tree},enumerable:!0,configurable:!0}),t.prototype._setTree=function(t){if(this._tree=t,null!=this._tree&&this._tree.treeNodeWillExpand&&this._expanded&&this._tree.treeNodeWillExpand(this,!0),null!=this._children)for(var e=this._children.length,i=0;i<e;i++){var n=this._children[i];n._level=this._level+1,n._setTree(t)}},t}();t.GTreeNode=e}(fgui||(fgui={})),function(t){var e=function(){function e(e){if(void 0===e&&(e=null),!e&&!(e=t.UIConfig.popupMenu))throw new Error("UIConfig.popupMenu not defined");this._contentPane=t.UIPackage.createObjectFromURL(e),this._contentPane.on("added",this._addedToStage,this),this._list=this._contentPane.getChild("list"),this._list.removeChildrenToPool(),this._list.addRelation(this._contentPane,t.RelationType.Width),this._list.removeRelation(this._contentPane,t.RelationType.Height),this._contentPane.addRelation(this._list,t.RelationType.Height),this._list.on("__itemClick",this._clickItem,this)}return e.prototype.dispose=function(){t.GTimer.inst.remove(this._delayClickItem,this),this._list.off("__itemClick",this._clickItem,this),this._contentPane.off("added",this._addedToStage,this),this._contentPane.dispose()},e.prototype.addItem=function(t,e){var i=this._list.addItemFromPool();i.title=t,i.data=e,i.grayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},e.prototype.addItemAt=function(t,e,i){var n=this._list.getFromPool();this._list.addChildAt(n,e),n.title=t,n.data=i,n.grayed=!1;var o=n.getController("checked");return null!=o&&(o.selectedIndex=0),n},e.prototype.addSeperator=function(){if(null==t.UIConfig.popupMenuSeperator)throw new Error("UIConfig.popupMenuSeperator not defined");this._list.addItemFromPool(t.UIConfig.popupMenuSeperator)},e.prototype.getItemName=function(t){return this._list.getChildAt(t).name},e.prototype.setItemText=function(t,e){this._list.getChild(t).title=e},e.prototype.setItemVisible=function(t,e){var i=this._list.getChild(t);i.visible!=e&&(i.visible=e,this._list.setBoundsChangedFlag())},e.prototype.setItemGrayed=function(t,e){this._list.getChild(t).grayed=e},e.prototype.setItemCheckable=function(t,e){var i=this._list.getChild(t).getController("checked");null!=i&&(e?0==i.selectedIndex&&(i.selectedIndex=1):i.selectedIndex=0)},e.prototype.setItemChecked=function(t,e){var i=this._list.getChild(t).getController("checked");null!=i&&(i.selectedIndex=e?2:1)},e.prototype.isItemChecked=function(t){var e=this._list.getChild(t).getController("checked");return null!=e&&2==e.selectedIndex},e.prototype.removeItem=function(t){var e=this._list.getChild(t);if(null!=e){var i=this._list.getChildIndex(e);return this._list.removeChildToPoolAt(i),!0}return!1},e.prototype.clearItems=function(){this._list.removeChildrenToPool()},Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._list.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.show=function(e,i){void 0===e&&(e=null),(null!=e?e.root:t.GRoot.inst).showPopup(this.contentPane,e instanceof t.GRoot?null:e,i)},e.prototype._clickItem=function(e,i){t.GTimer.inst.add(100,1,this._delayClickItem,this,i)},e.prototype._delayClickItem=function(e){if(e instanceof t.GButton)if(e.grayed)this._list.selectedIndex=-1;else{var i=e.getController("checked");null!=i&&0!=i.selectedIndex&&(1==i.selectedIndex?i.selectedIndex=2:i.selectedIndex=1);var n=this._contentPane.parent;n&&n.hidePopup(this.contentPane),null!=e.data&&e.data.call(null),t.GTimer.inst.remove(this._delayClickItem,this)}},e.prototype._addedToStage=function(){this._list.selectedIndex=-1,this._list.resizeToFit(1e5,10)},e}();t.PopupMenu=e}(fgui||(fgui={})),function(t){var e=function(){function e(t){this._owner=t,this._defs=new Array}return Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target))},enumerable:!0,configurable:!0}),e.prototype.add=function(e,i){if(e==t.RelationType.Size)return this.add(t.RelationType.Width,i),void this.add(t.RelationType.Height,i);for(var n=this._defs.length,o=0;o<n;o++){if(this._defs[o].type==e)return}this.internalAdd(e,i)},e.prototype.internalAdd=function(e,n){if(e==t.RelationType.Size)return this.internalAdd(t.RelationType.Width,n),void this.internalAdd(t.RelationType.Height,n);var o=new i;o.percent=n,o.type=e,o.axis=e<=t.RelationType.Right_Right||e==t.RelationType.Width||e>=t.RelationType.LeftExt_Left&&e<=t.RelationType.RightExt_Right?0:1,this._defs.push(o),(n||e==t.RelationType.Left_Center||e==t.RelationType.Center_Center||e==t.RelationType.Right_Center||e==t.RelationType.Top_Middle||e==t.RelationType.Middle_Middle||e==t.RelationType.Bottom_Middle)&&(this._owner.pixelSnapping=!0)},e.prototype.remove=function(e){if(void 0===e&&(e=0),e==t.RelationType.Size)return this.remove(t.RelationType.Width),void this.remove(t.RelationType.Height);for(var i=this._defs.length,n=0;n<i;n++)if(this._defs[n].type==e){this._defs.splice(n,1);break}},e.prototype.copyFrom=function(t){this.target=t.target,this._defs.length=0;for(var e=t._defs.length,n=0;n<e;n++){var o=t._defs[n],r=new i;r.copyFrom(o),this._defs.push(r)}},e.prototype.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this._defs.length},enumerable:!0,configurable:!0}),e.prototype.applyOnSelfResized=function(e,i,n){for(var o=this._owner.x,r=this._owner.y,s=this._defs.length,a=0;a<s;a++){switch(this._defs[a].type){case t.RelationType.Center_Center:this._owner.x-=(.5-(n?this._owner.pivotX:0))*e;break;case t.RelationType.Right_Center:case t.RelationType.Right_Left:case t.RelationType.Right_Right:this._owner.x-=(1-(n?this._owner.pivotX:0))*e;break;case t.RelationType.Middle_Middle:this._owner.y-=(.5-(n?this._owner.pivotY:0))*i;break;case t.RelationType.Bottom_Middle:case t.RelationType.Bottom_Top:case t.RelationType.Bottom_Bottom:this._owner.y-=(1-(n?this._owner.pivotY:0))*i}}if((o!=this._owner.x||r!=this._owner.y)&&(o=this._owner.x-o,r=this._owner.y-r,this._owner.updateGearFromRelations(1,o,r),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(h>0)for(a=0;a<h;++a)this._owner.parent._transitions[a].updateFromRelations(this._owner.id,o,r)}},e.prototype.applyOnXYChanged=function(e,i,n){var o;switch(e.type){case t.RelationType.Left_Left:case t.RelationType.Left_Center:case t.RelationType.Left_Right:case t.RelationType.Center_Center:case t.RelationType.Right_Left:case t.RelationType.Right_Center:case t.RelationType.Right_Right:this._owner.x+=i;break;case t.RelationType.Top_Top:case t.RelationType.Top_Middle:case t.RelationType.Top_Bottom:case t.RelationType.Middle_Middle:case t.RelationType.Bottom_Top:case t.RelationType.Bottom_Middle:case t.RelationType.Bottom_Bottom:this._owner.y+=n;break;case t.RelationType.Width:case t.RelationType.Height:break;case t.RelationType.LeftExt_Left:case t.RelationType.LeftExt_Right:this._owner!=this._target.parent?(o=this._owner.xMin,this._owner.width=this._owner._rawWidth-i,this._owner.xMin=o+i):this._owner.width=this._owner._rawWidth-i;break;case t.RelationType.RightExt_Left:case t.RelationType.RightExt_Right:this._owner!=this._target.parent?(o=this._owner.xMin,this._owner.width=this._owner._rawWidth+i,this._owner.xMin=o):this._owner.width=this._owner._rawWidth+i;break;case t.RelationType.TopExt_Top:case t.RelationType.TopExt_Bottom:this._owner!=this._target.parent?(o=this._owner.yMin,this._owner.height=this._owner._rawHeight-n,this._owner.yMin=o+n):this._owner.height=this._owner._rawHeight-n;break;case t.RelationType.BottomExt_Top:case t.RelationType.BottomExt_Bottom:this._owner!=this._target.parent?(o=this._owner.yMin,this._owner.height=this._owner._rawHeight+n,this._owner.yMin=o):this._owner.height=this._owner._rawHeight+n}},e.prototype.applyOnSizeChanged=function(e){var i,n,o=0,r=0,s=0;switch(0==e.axis?(this._target!=this._owner.parent&&(o=this._target.x,this._target.pivotAsAnchor&&(r=this._target.pivotX)),e.percent?0!=this._targetWidth&&(s=this._target._width/this._targetWidth):s=this._target._width-this._targetWidth):(this._target!=this._owner.parent&&(o=this._target.y,this._target.pivotAsAnchor&&(r=this._target.pivotY)),e.percent?0!=this._targetHeight&&(s=this._target._height/this._targetHeight):s=this._target._height-this._targetHeight),e.type){case t.RelationType.Left_Left:e.percent?this._owner.xMin=o+(this._owner.xMin-o)*s:0!=r&&(this._owner.x+=s*-r);break;case t.RelationType.Left_Center:e.percent?this._owner.xMin=o+(this._owner.xMin-o)*s:this._owner.x+=s*(.5-r);break;case t.RelationType.Left_Right:e.percent?this._owner.xMin=o+(this._owner.xMin-o)*s:this._owner.x+=s*(1-r);break;case t.RelationType.Center_Center:e.percent?this._owner.xMin=o+(this._owner.xMin+.5*this._owner._rawWidth-o)*s-.5*this._owner._rawWidth:this._owner.x+=s*(.5-r);break;case t.RelationType.Right_Left:e.percent?this._owner.xMin=o+(this._owner.xMin+this._owner._rawWidth-o)*s-this._owner._rawWidth:0!=r&&(this._owner.x+=s*-r);break;case t.RelationType.Right_Center:e.percent?this._owner.xMin=o+(this._owner.xMin+this._owner._rawWidth-o)*s-this._owner._rawWidth:this._owner.x+=s*(.5-r);break;case t.RelationType.Right_Right:e.percent?this._owner.xMin=o+(this._owner.xMin+this._owner._rawWidth-o)*s-this._owner._rawWidth:this._owner.x+=s*(1-r);break;case t.RelationType.Top_Top:e.percent?this._owner.yMin=o+(this._owner.yMin-o)*s:0!=r&&(this._owner.y+=s*-r);break;case t.RelationType.Top_Middle:e.percent?this._owner.yMin=o+(this._owner.yMin-o)*s:this._owner.y+=s*(.5-r);break;case t.RelationType.Top_Bottom:e.percent?this._owner.yMin=o+(this._owner.yMin-o)*s:this._owner.y+=s*(1-r);break;case t.RelationType.Middle_Middle:e.percent?this._owner.yMin=o+(this._owner.yMin+.5*this._owner._rawHeight-o)*s-.5*this._owner._rawHeight:this._owner.y+=s*(.5-r);break;case t.RelationType.Bottom_Top:e.percent?this._owner.yMin=o+(this._owner.yMin+this._owner._rawHeight-o)*s-this._owner._rawHeight:0!=r&&(this._owner.y+=s*-r);break;case t.RelationType.Bottom_Middle:e.percent?this._owner.yMin=o+(this._owner.yMin+this._owner._rawHeight-o)*s-this._owner._rawHeight:this._owner.y+=s*(.5-r);break;case t.RelationType.Bottom_Bottom:e.percent?this._owner.yMin=o+(this._owner.yMin+this._owner._rawHeight-o)*s-this._owner._rawHeight:this._owner.y+=s*(1-r);break;case t.RelationType.Width:i=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth,e.percent&&(i*=s),this._target==this._owner.parent?this._owner.pivotAsAnchor?(n=this._owner.xMin,this._owner.setSize(this._target._width+i,this._owner._rawHeight,!0),this._owner.xMin=n):this._owner.setSize(this._target._width+i,this._owner._rawHeight,!0):this._owner.width=this._target._width+i;break;case t.RelationType.Height:i=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight,e.percent&&(i*=s),this._target==this._owner.parent?this._owner.pivotAsAnchor?(n=this._owner.yMin,this._owner.setSize(this._owner._rawWidth,this._target._height+i,!0),this._owner.yMin=n):this._owner.setSize(this._owner._rawWidth,this._target._height+i,!0):this._owner.height=this._target._height+i;break;case t.RelationType.LeftExt_Left:n=this._owner.xMin,i=e.percent?o+(n-o)*s-n:s*-r,this._owner.width=this._owner._rawWidth-i,this._owner.xMin=n+i;break;case t.RelationType.LeftExt_Right:n=this._owner.xMin,i=e.percent?o+(n-o)*s-n:s*(1-r),this._owner.width=this._owner._rawWidth-i,this._owner.xMin=n+i;break;case t.RelationType.RightExt_Left:n=this._owner.xMin,i=e.percent?o+(n+this._owner._rawWidth-o)*s-(n+this._owner._rawWidth):s*-r,this._owner.width=this._owner._rawWidth+i,this._owner.xMin=n;break;case t.RelationType.RightExt_Right:n=this._owner.xMin,e.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=o+this._target._width-this._target._width*r+(this._owner.sourceWidth-o-this._target.initWidth+this._target.initWidth*r)*s:this._owner.width=o+(this._owner._rawWidth-o)*s:(i=o+(n+this._owner._rawWidth-o)*s-(n+this._owner._rawWidth),this._owner.width=this._owner._rawWidth+i,this._owner.xMin=n):this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-r):this._owner.width=this._owner._rawWidth+s*(1-r):(i=s*(1-r),this._owner.width=this._owner._rawWidth+i,this._owner.xMin=n);break;case t.RelationType.TopExt_Top:n=this._owner.yMin,i=e.percent?o+(n-o)*s-n:s*-r,this._owner.height=this._owner._rawHeight-i,this._owner.yMin=n+i;break;case t.RelationType.TopExt_Bottom:n=this._owner.yMin,i=e.percent?o+(n-o)*s-n:s*(1-r),this._owner.height=this._owner._rawHeight-i,this._owner.yMin=n+i;break;case t.RelationType.BottomExt_Top:n=this._owner.yMin,i=e.percent?o+(n+this._owner._rawHeight-o)*s-(n+this._owner._rawHeight):s*-r,this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n;break;case t.RelationType.BottomExt_Bottom:n=this._owner.yMin,e.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=o+this._target._height-this._target._height*r+(this._owner.sourceHeight-o-this._target.initHeight+this._target.initHeight*r)*s:this._owner.height=o+(this._owner._rawHeight-o)*s:(i=o+(n+this._owner._rawHeight-o)*s-(n+this._owner._rawHeight),this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n):this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-r):this._owner.height=this._owner._rawHeight+s*(1-r):(i=s*(1-r),this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n)}},e.prototype.addRefTarget=function(t){t!=this._owner.parent&&t.on("__xyChanged",this.__targetXYChanged,this),t.on("__sizeChanged",this.__targetSizeChanged,this),t.on("__sizeDelayChange",this.__targetSizeWillChange,this),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._width,this._targetHeight=this._target._height},e.prototype.releaseRefTarget=function(t){t.off("__xyChanged",this.__targetXYChanged,this),t.off("__sizeChanged",this.__targetSizeChanged,this),t.off("__sizeDelayChange",this.__targetSizeWillChange,this)},e.prototype.__targetXYChanged=function(t){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)return this._targetX=this._target.x,void(this._targetY=this._target.y);this._owner.relations.handling=this._target;for(var e=this._owner.x,i=this._owner.y,n=this._target.x-this._targetX,o=this._target.y-this._targetY,r=this._defs.length,s=0;s<r;s++){var a=this._defs[s];this.applyOnXYChanged(a,n,o)}if(this._targetX=this._target.x,this._targetY=this._target.y,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(h>0)for(s=0;s<h;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,e,i)}this._owner.relations.handling=null},e.prototype.__targetSizeChanged=function(t){if(null==this._owner.relations.handling){this._owner.relations.handling=this._target;for(var e=this._owner.x,i=this._owner.y,n=this._owner._rawWidth,o=this._owner._rawHeight,r=this._defs.length,s=0;s<r;s++){var a=this._defs[s];this.applyOnSizeChanged(a)}if(this._targetWidth=this._target._width,this._targetHeight=this._target._height,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(h>0)for(s=0;s<h;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,e,i)}n==this._owner._rawWidth&&o==this._owner._rawHeight||(n=this._owner._rawWidth-n,o=this._owner._rawHeight-o,this._owner.updateGearFromRelations(2,n,o)),this._owner.relations.handling=null}},e.prototype.__targetSizeWillChange=function(t){this._owner.relations.sizeDirty=!0},e}();t.RelationItem=e;var i=function(){function t(){}return t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type,this.axis=t.axis},t}();t.RelationDef=i}(fgui||(fgui={})),function(t){var e=function(){function e(t){this.sizeDirty=!1,this._owner=t,this._items=[]}return e.prototype.add=function(e,i,n){void 0===n&&(n=!1);for(var o=this._items.length,r=0;r<o;r++){var s=this._items[r];if(s.target==e)return void s.add(i,n)}var a=new t.RelationItem(this._owner);a.target=e,a.add(i,n),this._items.push(a)},e.prototype.addItems=function(t,i){for(var n,o,r=i.split(","),s=0;s<2;s++)if(n=r[s]){"%"==n.charAt(n.length-1)?(n=n.substr(0,n.length-1),o=!0):o=!1,-1==n.indexOf("-")&&(n=n+"-"+n);var a=e.RELATION_NAMES.indexOf(n);if(-1==a)throw new Error("Invalid relation type");this.add(t,a,o)}},e.prototype.remove=function(t,e){void 0===e&&(e=0);for(var i=this._items.length,n=0;n<i;){var o=this._items[n];o.target==t?(o.remove(e),o.isEmpty?(o.dispose(),this._items.splice(n,1),i--):n++):n++}},e.prototype.contains=function(t){for(var e=this._items.length,i=0;i<e;i++)if(this._items[i].target==t)return!0;return!1},e.prototype.clearFor=function(t){for(var e=this._items.length,i=0;i<e;){var n=this._items[i];n.target==t?(n.dispose(),this._items.splice(i,1),e--):i++}},e.prototype.clearAll=function(){this._items.forEach(function(t){t.dispose()},this),this._items.length=0},e.prototype.copyFrom=function(e){this.clearAll();for(var i=e._items,n=i.length,o=0;o<n;o++){var r=i[o],s=new t.RelationItem(this._owner);s.copyFrom(r),this._items.push(s)}},e.prototype.dispose=function(){this.clearAll()},e.prototype.onOwnerSizeChanged=function(t,e,i){if(0!=this._items.length)for(var n=this._items.length,o=0;o<n;o++){this._items[o].applyOnSelfResized(t,e,i)}},e.prototype.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;e<t;e++){this._items[e].target.ensureSizeCorrect()}}},Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._items.length},enumerable:!0,configurable:!0}),e.prototype.setup=function(e,i){for(var n,o=e.readByte(),r=0;r<o;r++){var s=e.readShort();n=-1==s?this._owner.parent:i?this._owner.getChildAt(s):this._owner.parent.getChildAt(s);var a=new t.RelationItem(this._owner);a.target=n,this._items.push(a);for(var h=e.readByte(),l=0;l<h;l++){var u=e.readByte(),c=e.readBool();a.internalAdd(u,c)}}},e.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"],e}();t.Relations=e}(fgui||(fgui={})),function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n._isDragging=!1,n._owner=i,n._maskContainer=new t.UIContainer(null),n._owner._rootContainer.addChild(n._maskContainer),n._container=n._owner._container,n._container.x=0,n._container.y=0,n._maskContainer.addChild(n._container),n._scrollBarMargin=new t.utils.Margin,n._scrollType=0,n._scrollStep=t.UIConfig.defaultScrollStep,n._mouseWheelSpeed=2*n._scrollStep,n._decelerationRate=t.UIConfig.defaultScrollDecelerationRate,n._touchEffect=t.UIConfig.defaultScrollTouchEffect,n._bouncebackEffect=!1,n._bouncebackEffect=t.UIConfig.defaultScrollBounceEffect,n._maskContainer.scrollRect=new PIXI.Rectangle,n._scrollBarVisible=!0,n._mouseWheelEnabled=!0,n._xPos=0,n._yPos=0,n._aniFlag=0,n._footerLockedSize=0,n._headerLockedSize=0,n._viewSize=new PIXI.Point,n._contentSize=new PIXI.Point,n._pageSize=new PIXI.Point(1,1),n._overlapSize=new PIXI.Point,n._tweening=0,n._tweenTime=new PIXI.Point,n._tweenStart=new PIXI.Point,n._tweenDuration=new PIXI.Point,n._tweenChange=new PIXI.Point,n._velocity=new PIXI.Point,n._containerPos=new PIXI.Point,n._beginTouchPos=new PIXI.Point,n._lastTouchPos=new PIXI.Point,n._lastTouchGlobalPos=new PIXI.Point,n._mouseWheelEnabled=!1,null==n._header&&null==n._footer||(n._refreshBarAxis=n._scrollType==t.ScrollType.Both||n._scrollType==t.ScrollType.Vertical?"y":"x"),n.setSize(i.width,i.height),n._owner.on(t.InteractiveEvents.Over,n._rollOver,n),n._owner.on(t.InteractiveEvents.Out,n._rollOut,n),n._owner.on(t.InteractiveEvents.Down,n._mouseDown,n),n._owner.on("__mouseWheel",n._mouseWheel,n),n}return __extends(i,e),i.prototype.setup=function(e){this._scrollType=e.readByte();var i=e.readByte(),n=e.readInt();e.readBool()&&(this._scrollBarMargin.top=e.readInt(),this._scrollBarMargin.bottom=e.readInt(),this._scrollBarMargin.left=e.readInt(),this._scrollBarMargin.right=e.readInt());var o=e.readS(),r=e.readS(),s=e.readS(),a=e.readS();if(this._displayOnLeft=0!=(1&n),this._snapToItem=0!=(2&n),this._displayInDemand=0!=(4&n),this._pageMode=0!=(8&n),this._touchEffect=!!(16&n)||!(32&n)&&t.UIConfig.defaultScrollTouchEffect,this._bouncebackEffect=!!(64&n)||!(128&n)&&t.UIConfig.defaultScrollBounceEffect,this._inertiaDisabled=0!=(256&n),0==(512&n)&&(this._maskContainer.scrollRect=new PIXI.Rectangle),this._floating=0!=(1024&n),i==t.ScrollBarDisplayType.Default&&(i=t.UIConfig.defaultScrollBarDisplay),i!=t.ScrollBarDisplayType.Hidden){var h;if(this._scrollType==t.ScrollType.Both||this._scrollType==t.ScrollType.Vertical)if(h=o||t.UIConfig.verticalScrollBar){if(this._vtScrollBar=t.UIPackage.createObjectFromURL(h),!this._vtScrollBar)throw"cannot create scrollbar from "+h;this._vtScrollBar.setScrollPane(this,!0),this._owner._rootContainer.addChild(this._vtScrollBar.displayObject)}if(this._scrollType==t.ScrollType.Both||this._scrollType==t.ScrollType.Horizontal)if(h=r||t.UIConfig.horizontalScrollBar){if(this._hzScrollBar=t.UIPackage.createObjectFromURL(h),!this._hzScrollBar)throw"cannot create scrollbar from "+h;this._hzScrollBar.setScrollPane(this,!1),this._owner._rootContainer.addChild(this._hzScrollBar.displayObject)}this._scrollBarDisplayAuto=i==t.ScrollBarDisplayType.Auto,this._scrollBarDisplayAuto&&(this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1))}if(s&&(this._header=t.UIPackage.createObjectFromURL(s),null==this._header))throw"cannot create scrollPane header from "+s;if(a&&(this._footer=t.UIPackage.createObjectFromURL(a),null==this._footer))throw"cannot create scrollPane footer from "+a;null==this._header&&null==this._footer||(this._refreshBarAxis=this._scrollType==t.ScrollType.Both||this._scrollType==t.ScrollType.Vertical?"y":"x"),this.setSize(this._owner.width,this._owner.height)},i.prototype.dispose=function(){0!=this._tweening&&t.GTimer.inst.remove(this.tweenUpdate,this),this._pageController=null,null!=this._hzScrollBar&&this._hzScrollBar.dispose(),null!=this._vtScrollBar&&this._vtScrollBar.dispose(),null!=this._header&&this._header.dispose(),null!=this._footer&&this._footer.dispose(),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._mouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._mouseUp,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Click,this._click,this),this._owner.off(t.InteractiveEvents.Over,this._rollOver,this),this._owner.off(t.InteractiveEvents.Out,this._rollOut,this),this._owner.off(t.InteractiveEvents.Down,this._mouseDown,this),this._owner.off("__mouseWheel",this._mouseWheel,this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horzScrollBar",{get:function(){return this._hzScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hzScrollBar",{get:function(){return this._hzScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vertScrollBar",{get:function(){return this._vtScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vtScrollBar",{get:function(){return this._vtScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bouncebackEffect",{get:function(){return this._bouncebackEffect},set:function(t){this._bouncebackEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"touchEffect",{get:function(){return this._touchEffect},set:function(t){this._touchEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollSpeed",{get:function(){return this._scrollStep},set:function(e){this._scrollStep=e,0==this._scrollStep&&(this._scrollStep=t.UIConfig.defaultScrollStep),this._mouseWheelSpeed=2*this._scrollStep},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"snapToItem",{get:function(){return this._snapToItem},set:function(t){this._snapToItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mouseWheelEnabled",{get:function(){return this._mouseWheelEnabled},set:function(t){this._mouseWheelEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"decelerationRate",{get:function(){return this._decelerationRate},set:function(t){this._decelerationRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"percX",{get:function(){return 0==this._overlapSize.x?0:this._xPos/this._overlapSize.x},set:function(t){this.setPercX(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPercX=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this.setPosX(this._overlapSize.x*t.utils.NumberUtil.clamp01(e),i)},Object.defineProperty(i.prototype,"percY",{get:function(){return 0==this._overlapSize.y?0:this._yPos/this._overlapSize.y},set:function(t){this.setPercY(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPercY=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this.setPosY(this._overlapSize.y*t.utils.NumberUtil.clamp01(e),i)},Object.defineProperty(i.prototype,"posX",{get:function(){return this._xPos},set:function(t){this.setPosX(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPosX=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(e=this.loopCheckingNewPos(e,"x")),(e=t.utils.NumberUtil.clamp(e,0,this._overlapSize.x))!=this._xPos&&(this._xPos=e,this.posChanged(i))},Object.defineProperty(i.prototype,"posY",{get:function(){return this._yPos},set:function(t){this.setPosY(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setPosY=function(e,i){void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(e=this.loopCheckingNewPos(e,"y")),(e=t.utils.NumberUtil.clamp(e,0,this._overlapSize.y))!=this._yPos&&(this._yPos=e,this.posChanged(i))},Object.defineProperty(i.prototype,"contentWidth",{get:function(){return this._contentSize.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){return this._contentSize.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewWidth",{get:function(){return this._viewSize.x},set:function(t){t=t+this._owner.margin.left+this._owner.margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewHeight",{get:function(){return this._viewSize.y},set:function(t){t=t+this._owner.margin.top+this._owner.margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPageX",{get:function(){if(!this._pageMode)return 0;var t=Math.floor(this._xPos/this._pageSize.x);return this._xPos-t*this._pageSize.x>.5*this._pageSize.x&&t++,t},set:function(t){this._pageMode&&this._overlapSize.x>0&&this.setPosX(t*this._pageSize.x,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPageY",{get:function(){if(!this._pageMode)return 0;var t=Math.floor(this._yPos/this._pageSize.y);return this._yPos-t*this._pageSize.y>.5*this._pageSize.y&&t++,t},set:function(t){this._pageMode&&this._overlapSize.y>0&&this.setPosY(t*this._pageSize.y,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isBottomMost",{get:function(){return this._yPos==this._overlapSize.y||0==this._overlapSize.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isRightMost",{get:function(){return this._xPos==this._overlapSize.x||0==this._overlapSize.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageController",{get:function(){return this._pageController},set:function(t){this._pageController=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollingPosX",{get:function(){return t.utils.NumberUtil.clamp(-this._container.x,0,this._overlapSize.x)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollingPosY",{get:function(){return t.utils.NumberUtil.clamp(-this._container.y,0,this._overlapSize.y)},enumerable:!0,configurable:!0}),i.prototype.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},i.prototype.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},i.prototype.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos-this._pageSize.y*t,e):this.setPosY(this._yPos-this._scrollStep*t,e)},i.prototype.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos+this._pageSize.y*t,e):this.setPosY(this._yPos+this._scrollStep*t,e)},i.prototype.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos-this._pageSize.x*t,e):this.setPosX(this._xPos-this._scrollStep*t,e)},i.prototype.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos+this._pageSize.x*t,e):this.setPosX(this._xPos+this._scrollStep*t,e)},Object.defineProperty(i.prototype,"scrollStep",{get:function(){return this._scrollStep},set:function(e){this._scrollStep=e,0==this._scrollStep&&(this._scrollStep=t.UIConfig.defaultScrollStep)},enumerable:!0,configurable:!0}),i.prototype.scrollToView=function(e,n,o){var r;if(void 0===n&&(n=!1),void 0===o&&(o=!1),this._owner.ensureBoundsCorrect(),this._needRefresh&&this.refresh(),e instanceof t.GObject?e.parent!=this._owner?(e.parent.localToGlobalRect(e.x,e.y,e.width,e.height,i.sHelperRect),r=this._owner.globalToLocalRect(i.sHelperRect.x,i.sHelperRect.y,i.sHelperRect.width,i.sHelperRect.height,i.sHelperRect)):((r=i.sHelperRect).x=e.x,r.y=e.y,r.width=e.width,r.height=e.height):r=e,this._overlapSize.y>0){var s=this._yPos+this._viewSize.y;o||r.y<=this._yPos||r.height>=this._viewSize.y?this._pageMode?this.setPosY(Math.floor(r.y/this._pageSize.y)*this._pageSize.y,n):this.setPosY(r.y,n):r.y+r.height>s&&(this._pageMode?this.setPosY(Math.floor(r.y/this._pageSize.y)*this._pageSize.y,n):r.height<=this._viewSize.y/2?this.setPosY(r.y+2*r.height-this._viewSize.y,n):this.setPosY(r.y+r.height-this._viewSize.y,n))}if(this._overlapSize.x>0){var a=this._xPos+this._viewSize.x;o||r.x<=this._xPos||r.width>=this._viewSize.x?this._pageMode?this.setPosX(Math.floor(r.x/this._pageSize.x)*this._pageSize.x,n):this.setPosX(r.x,n):r.x+r.width>a&&(this._pageMode?this.setPosX(Math.floor(r.x/this._pageSize.x)*this._pageSize.x,n):r.width<=this._viewSize.x/2?this.setPosX(r.x+2*r.width-this._viewSize.x,n):this.setPosX(r.x+r.width-this._viewSize.x,n))}!n&&this._needRefresh&&this.refresh()},i.prototype.isChildInView=function(t){if(this._overlapSize.y>0){var e=t.y+this._container.y;if(e<-t.height||e>this._viewSize.y)return!1}return!(this._overlapSize.x>0&&((e=t.x+this._container.x)<-t.width||e>this._viewSize.x))},i.prototype.cancelDragging=function(){t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._mouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._mouseUp,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Click,this._click,this),i.draggingPane==this&&(i.draggingPane=null),i._gestureFlag=0,this._isDragging=!1,this._maskContainer.interactive=!0},Object.defineProperty(i.prototype,"isDragging",{get:function(){return this._isDragging},enumerable:!0,configurable:!0}),i.prototype.lockHeader=function(e){this._headerLockedSize!=e&&(this._headerLockedSize=e,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]>=0&&(this._tweenStart.set(this._container.x,this._container.y),this._tweenChange.set(0,0),this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis],this._tweenDuration.set(i.TWEEN_DEFAULT_DURATION,i.TWEEN_DEFAULT_DURATION),this._tweenTime.set(0,0),this._tweening=2,t.GTimer.inst.addLoop(1,this.tweenUpdate,this)))},i.prototype.lockFooter=function(e){if(this._footerLockedSize!=e&&(this._footerLockedSize=e,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]<=-this._overlapSize[this._refreshBarAxis])){this._tweenStart.set(this._container.x,this._container.y),this._tweenChange.set(0,0);var n=this._overlapSize[this._refreshBarAxis];0==n?n=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):n+=this._footerLockedSize,this._tweenChange[this._refreshBarAxis]=-n-this._tweenStart[this._refreshBarAxis],this._tweenDuration.set(i.TWEEN_DEFAULT_DURATION,i.TWEEN_DEFAULT_DURATION),this._tweenTime.set(0,0),this._tweening=2,t.GTimer.inst.addLoop(1,this.tweenUpdate,this)}},i.prototype.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height),this.posChanged(!1)},i.prototype.handleControllerChanged=function(e){this._pageController==e&&(this._scrollType==t.ScrollType.Horizontal?this.currentPageX=e.selectedIndex:this.currentPageY=e.selectedIndex)},i.prototype.updatePageController=function(){if(null!=this._pageController&&!this._pageController.changing){var e=void 0;if((e=this._scrollType==t.ScrollType.Horizontal?this.currentPageX:this.currentPageY)<this._pageController.pageCount){var i=this._pageController;this._pageController=null,i.selectedIndex=e,this._pageController=i}}},i.prototype.adjustMaskContainer=function(){var t,e;t=this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),e=Math.floor(this._owner.margin.top),this._maskContainer.position.set(t,e),0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new PIXI.Container,this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.position.set(this._owner._alignOffset.x,this._owner._alignOffset.y)):this._alignContainer&&this._alignContainer.position.set(0,0)},i.prototype.setSize=function(t,e){this.adjustMaskContainer(),this._hzScrollBar&&(this._hzScrollBar.y=e-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=t-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._displayOnLeft?this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width:this._hzScrollBar.x=this._scrollBarMargin.left):(this._hzScrollBar.width=t-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=t-this._vtScrollBar.width),this._hzScrollBar?this._vtScrollBar.height=e-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:this._vtScrollBar.height=e-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),this._viewSize.x=t,this._viewSize.y=e,this._hzScrollBar&&!this._hScrollNone&&(this._viewSize.y-=this._hzScrollBar.height),this._vtScrollBar&&!this._vScrollNone&&(this._viewSize.x-=this._vtScrollBar.width),this._viewSize.x-=this._owner.margin.left+this._owner.margin.right,this._viewSize.y-=this._owner.margin.top+this._owner.margin.bottom,this._viewSize.x=Math.max(1,this._viewSize.x),this._viewSize.y=Math.max(1,this._viewSize.y),this._pageSize.x=this._viewSize.x,this._pageSize.y=this._viewSize.y,this.handleSizeChanged()},i.prototype.setContentSize=function(t,e){this._contentSize.x==t&&this._contentSize.y==e||(this._contentSize.x=t,this._contentSize.y=e,this.handleSizeChanged())},i.prototype.changeContentSizeOnScrolling=function(t,e,i,n){var o=this._xPos==this._overlapSize.x,r=this._yPos==this._overlapSize.y;this._contentSize.x+=t,this._contentSize.y+=e,this.handleSizeChanged(),1==this._tweening?(0!=t&&o&&this._tweenChange.x<0&&(this._xPos=this._overlapSize.x,this._tweenChange.x=-this._xPos-this._tweenStart.x),0!=e&&r&&this._tweenChange.y<0&&(this._yPos=this._overlapSize.y,this._tweenChange.y=-this._yPos-this._tweenStart.y)):2==this._tweening?(0!=i&&(this._container.x-=i,this._tweenStart.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._tweenStart.y-=n,this._yPos=-this._container.y)):this._isDragging?(0!=i&&(this._container.x-=i,this._containerPos.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._containerPos.y-=n,this._yPos=-this._container.y)):(0!=t&&o&&(this._xPos=this._overlapSize.x,this._container.x=-this._xPos),0!=e&&r&&(this._yPos=this._overlapSize.y,this._container.y=-this._yPos)),this._pageMode&&this.updatePageController()},i.prototype.handleSizeChanged=function(e){void 0===e&&(e=!1),this._displayInDemand&&(this._vtScrollBar&&(this._contentSize.y<=this._viewSize.y?this._vScrollNone||(this._vScrollNone=!0,this._viewSize.x+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewSize.x-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentSize.x<=this._viewSize.x?this._hScrollNone||(this._hScrollNone=!0,this._viewSize.y+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewSize.y-=this._hzScrollBar.height))),this._vtScrollBar&&(this._viewSize.y<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,0==this._contentSize.y?this._vtScrollBar.displayPerc=0:this._vtScrollBar.displayPerc=Math.min(1,this._viewSize.y/this._contentSize.y))),this._hzScrollBar&&(this._viewSize.x<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,0==this._contentSize.x?this._hzScrollBar.displayPerc=0:this._hzScrollBar.displayPerc=Math.min(1,this._viewSize.x/this._contentSize.x)));var i=this._maskContainer.scrollRect;if(i&&(i.width=this._viewSize.x,i.height=this._viewSize.y,this._maskContainer.scrollRect=i),this._scrollType==t.ScrollType.Horizontal||this._scrollType==t.ScrollType.Both?this._overlapSize.x=Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x)):this._overlapSize.x=0,this._scrollType==t.ScrollType.Vertical||this._scrollType==t.ScrollType.Both?this._overlapSize.y=Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y)):this._overlapSize.y=0,this._xPos=t.utils.NumberUtil.clamp(this._xPos,0,this._overlapSize.x),this._yPos=t.utils.NumberUtil.clamp(this._yPos,0,this._overlapSize.y),null!=this._refreshBarAxis){var n=this._overlapSize[this._refreshBarAxis];0==n?n=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):n+=this._footerLockedSize,"x"==this._refreshBarAxis?this._container.position.set(t.utils.NumberUtil.clamp(this._container.x,-n,this._headerLockedSize),t.utils.NumberUtil.clamp(this._container.y,-this._overlapSize.y,0)):this._container.position.set(t.utils.NumberUtil.clamp(this._container.x,-this._overlapSize.x,0),t.utils.NumberUtil.clamp(this._container.y,-n,this._headerLockedSize)),null!=this._header&&("x"==this._refreshBarAxis?this._header.height=this._viewSize.y:this._header.width=this._viewSize.x),null!=this._footer&&("y"==this._refreshBarAxis?this._footer.height=this._viewSize.y:this._footer.width=this._viewSize.x)}else this._container.position.set(t.utils.NumberUtil.clamp(this._container.x,-this._overlapSize.x,0),t.utils.NumberUtil.clamp(this._container.y,-this._overlapSize.y,0));this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController()},i.prototype.posChanged=function(e){0==this._aniFlag?this._aniFlag=e?1:-1:1!=this._aniFlag||e||(this._aniFlag=-1),this._needRefresh=!0,t.GTimer.inst.callLater(this.refresh,this)},i.prototype.refresh=function(){this._needRefresh=!1,t.GTimer.inst.remove(this.refresh,this),(this._pageMode||this._snapToItem)&&(i.sEndPos.set(-this._xPos,-this._yPos),this.alignPosition(i.sEndPos,!1),this._xPos=-i.sEndPos.x,this._yPos=-i.sEndPos.y),this.refresh2(),this.emit("__scroll",this),this._needRefresh&&(this._needRefresh=!1,t.GTimer.inst.remove(this.refresh,this),this.refresh2()),this.syncScrollBar(),this._aniFlag=0},i.prototype.refresh2=function(){if(1!=this._aniFlag||this._isDragging)0!=this._tweening&&this.killTween(),this._container.position.set(Math.floor(-this._xPos),Math.floor(-this._yPos)),this.loopCheckingCurrent();else{var e=void 0,n=void 0;this._overlapSize.x>0?e=-Math.floor(this._xPos):(0!=this._container.x&&(this._container.x=0),e=0),this._overlapSize.y>0?n=-Math.floor(this._yPos):(0!=this._container.y&&(this._container.y=0),n=0),e!=this._container.x||n!=this._container.y?(this._tweening=1,this._tweenTime.set(0,0),this._tweenDuration.set(i.TWEEN_MANUALLY_SET_DURATION,i.TWEEN_MANUALLY_SET_DURATION),this._tweenStart.set(this._container.x,this._container.y),this._tweenChange.set(e-this._tweenStart.x,n-this._tweenStart.y),t.GTimer.inst.addLoop(1,this.tweenUpdate,this)):0!=this._tweening&&this.killTween()}this._pageMode&&this.updatePageController()},i.prototype.syncScrollBar=function(e){void 0===e&&(e=!1),null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._overlapSize.y?0:t.utils.NumberUtil.clamp(-this._container.y,0,this._overlapSize.y)/this._overlapSize.y,this._scrollBarDisplayAuto&&this.showScrollBar(!e)),null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._overlapSize.x?0:t.utils.NumberUtil.clamp(-this._container.x,0,this._overlapSize.x)/this._overlapSize.x,this._scrollBarDisplayAuto&&this.showScrollBar(!e)),e&&(this._maskContainer.interactive=!0)},i.prototype._mouseDown=function(e){if(this._touchEffect){0!=this._tweening?(this.killTween(),this._isDragging=!0):this._isDragging=!1;var n=PIXI.utils.isMobile.any?this._owner.globalToLocal(e.data.global.x,e.data.global.y):this._owner.globalToLocal(t.GRoot.globalMouseStatus.mouseX,t.GRoot.globalMouseStatus.mouseY,i.sHelperPoint);this._containerPos.set(this._container.x,this._container.y),this._beginTouchPos.copyFrom(n),this._lastTouchPos.copyFrom(n),this._lastTouchGlobalPos.copyFrom(n),this._isHoldAreaDone=!1,this._velocity.set(0,0),this._velocityScale=1,this._lastMoveTime=t.GTimer.inst.curTime/1e3,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this._mouseMove,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this._mouseUp,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Click,this._click,this)}},i.prototype._mouseMove=function(){if(this._touchEffect&&(null==i.draggingPane||i.draggingPane==this)&&null==t.GObject.draggingObject){var e,n,o,r=t.UIConfig.touchScrollSensitivity,s=this._owner.globalToLocal(t.GRoot.globalMouseStatus.mouseX,t.GRoot.globalMouseStatus.mouseY,i.sHelperPoint);if(this._scrollType==t.ScrollType.Vertical){if(!this._isHoldAreaDone){if(i._gestureFlag|=1,(e=Math.abs(this._beginTouchPos.y-s.y))<r)return;if(0!=(2&i._gestureFlag)&&e<Math.abs(this._beginTouchPos.x-s.x))return}n=!0}else if(this._scrollType==t.ScrollType.Horizontal){if(!this._isHoldAreaDone){if(i._gestureFlag|=2,(e=Math.abs(this._beginTouchPos.x-s.x))<r)return;if(0!=(1&i._gestureFlag)&&e<Math.abs(this._beginTouchPos.y-s.y))return}o=!0}else{if(i._gestureFlag=3,!this._isHoldAreaDone&&(e=Math.abs(this._beginTouchPos.y-s.y))<r&&(e=Math.abs(this._beginTouchPos.x-s.x))<r)return;n=o=!0}var a=Math.floor(this._containerPos.x+s.x-this._beginTouchPos.x),h=Math.floor(this._containerPos.y+s.y-this._beginTouchPos.y);n&&(h>0?this._bouncebackEffect?null!=this._header&&0!=this._header.height?this._container.y=Math.floor(Math.min(.5*h,this._header.height)):this._container.y=Math.floor(Math.min(.5*h,this._viewSize.y*i.PULL_DIST_RATIO)):this._container.y=0:h<-this._overlapSize.y?this._bouncebackEffect?null!=this._footer&&this._footer.height>0?this._container.y=Math.floor(Math.max(.5*(h+this._overlapSize.y),-this._footer.height)-this._overlapSize.y):this._container.y=Math.floor(Math.max(.5*(h+this._overlapSize.y),-this._viewSize.y*i.PULL_DIST_RATIO)-this._overlapSize.y):this._container.y=-this._overlapSize.y:this._container.y=h),o&&(a>0?this._bouncebackEffect?null!=this._header&&0!=this._header.width?this._container.x=Math.floor(Math.min(.5*a,this._header.width)):this._container.x=Math.floor(Math.min(.5*a,this._viewSize.x*i.PULL_DIST_RATIO)):this._container.x=0:a<0-this._overlapSize.x?this._bouncebackEffect?null!=this._footer&&this._footer.width>0?this._container.x=Math.floor(Math.max(.5*(a+this._overlapSize.x),-this._footer.width)-this._overlapSize.x):this._container.x=Math.floor(Math.max(.5*(a+this._overlapSize.x),-this._viewSize.x*i.PULL_DIST_RATIO)-this._overlapSize.x):this._container.x=-this._overlapSize.x:this._container.x=a);var l=t.GRoot.inst.applicationContext.ticker.FPS,u=t.GTimer.inst.curTime/1e3,c=Math.max(u-this._lastMoveTime,1/l),p=s.x-this._lastTouchPos.x,_=s.y-this._lastTouchPos.y;if(o||(p=0),n||(_=0),0!=c){var d=c*l-1;if(d>1){var f=Math.pow(.833,d);this._velocity.x=this._velocity.x*f,this._velocity.y=this._velocity.y*f}this._velocity.x=t.utils.NumberUtil.lerp(this._velocity.x,60*p/l/c,10*c),this._velocity.y=t.utils.NumberUtil.lerp(this._velocity.y,60*_/l/c,10*c)}var g=this._lastTouchGlobalPos.x-s.x,y=this._lastTouchGlobalPos.y-s.y;0!=p?this._velocityScale=Math.abs(g/p):0!=_&&(this._velocityScale=Math.abs(y/_)),this._lastTouchPos.copyFrom(s),this._lastTouchGlobalPos.copyFrom(s),this._lastMoveTime=u,this._overlapSize.x>0&&(this._xPos=t.utils.NumberUtil.clamp(-this._container.x,0,this._overlapSize.x)),this._overlapSize.y>0&&(this._yPos=t.utils.NumberUtil.clamp(-this._container.y,0,this._overlapSize.y)),0!=this._loop&&(a=this._container.x,h=this._container.y,this.loopCheckingCurrent()&&(this._containerPos.x+=this._container.x-a,this._containerPos.y+=this._container.y-h)),i.draggingPane=this,this._isHoldAreaDone=!0,this._isDragging=!0,this._maskContainer.interactive=!1,this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController(),this.emit("__scroll",this)}},i.prototype._mouseUp=function(){if(t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this._mouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this._mouseUp,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Click,this._click,this),i.draggingPane==this&&(i.draggingPane=null),i._gestureFlag=0,!this._isDragging||!this._touchEffect)return this._isDragging=!1,void(this._maskContainer.interactive=!0);this._isDragging=!1,this._maskContainer.interactive=!0,this._tweenStart.set(this._container.x,this._container.y),i.sEndPos.set(this._tweenStart.x,this._tweenStart.y);var e=!1;if(this._container.x>0?(i.sEndPos.x=0,e=!0):this._container.x<-this._overlapSize.x&&(i.sEndPos.x=-this._overlapSize.x,e=!0),this._container.y>0?(i.sEndPos.y=0,e=!0):this._container.y<-this._overlapSize.y&&(i.sEndPos.y=-this._overlapSize.y,e=!0),e){if(this._tweenChange.set(i.sEndPos.x-this._tweenStart.x,i.sEndPos.y-this._tweenStart.y),this._tweenChange.x<-t.UIConfig.touchDragSensitivity||this._tweenChange.y<-t.UIConfig.touchDragSensitivity?(this._refreshEventDispatching=!0,this.emit("__pullDownRelease"),this._refreshEventDispatching=!1):(this._tweenChange.x>t.UIConfig.touchDragSensitivity||this._tweenChange.y>t.UIConfig.touchDragSensitivity)&&(this._refreshEventDispatching=!0,this.emit("__pullUpRelease"),this._refreshEventDispatching=!1),this._headerLockedSize>0&&0==i.sEndPos[this._refreshBarAxis])i.sEndPos[this._refreshBarAxis]=this._headerLockedSize,this._tweenChange.x=i.sEndPos.x-this._tweenStart.x,this._tweenChange.y=i.sEndPos.y-this._tweenStart.y;else if(this._footerLockedSize>0&&i.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]){var n=this._overlapSize[this._refreshBarAxis];0==n?n=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):n+=this._footerLockedSize,i.sEndPos[this._refreshBarAxis]=-n,this._tweenChange.x=i.sEndPos.x-this._tweenStart.x,this._tweenChange.y=i.sEndPos.y-this._tweenStart.y}this._tweenDuration.set(i.TWEEN_DEFAULT_DURATION,i.TWEEN_DEFAULT_DURATION)}else{if(this._inertiaDisabled)this._tweenDuration.set(i.TWEEN_DEFAULT_DURATION,i.TWEEN_DEFAULT_DURATION);else{var o=t.GRoot.inst.applicationContext.ticker.FPS,r=(t.GTimer.inst.curTime/1e3-this._lastMoveTime)*o-1;if(r>1){var s=Math.pow(.833,r);this._velocity.x=this._velocity.x*s,this._velocity.y=this._velocity.y*s}this.updateTargetAndDuration(this._tweenStart,i.sEndPos)}if(i.sOldChange.set(i.sEndPos.x-this._tweenStart.x,i.sEndPos.y-this._tweenStart.y),this.loopCheckingTarget(i.sEndPos),(this._pageMode||this._snapToItem)&&this.alignPosition(i.sEndPos,!0),this._tweenChange.x=i.sEndPos.x-this._tweenStart.x,this._tweenChange.y=i.sEndPos.y-this._tweenStart.y,0==this._tweenChange.x&&0==this._tweenChange.y)return void(this._scrollBarDisplayAuto&&this.showScrollBar(!1));(this._pageMode||this._snapToItem)&&(this.fixDuration("x",i.sOldChange.x),this.fixDuration("y",i.sOldChange.y))}this._tweening=2,this._tweenTime.set(0,0),t.GTimer.inst.addLoop(1,this.tweenUpdate,this)},i.prototype._click=function(){this._isDragging=!1},i.prototype._mouseWheel=function(t){if(this._mouseWheelEnabled){var e=t.delta>0?-1:t.delta<0?1:0;this._overlapSize.x>0&&0==this._overlapSize.y?this._pageMode?this.setPosX(this._xPos+this._pageSize.x*e,!1):this.setPosX(this._xPos+this._mouseWheelSpeed*e,!1):this._pageMode?this.setPosY(this._yPos+this._pageSize.y*e,!1):this.setPosY(this._yPos+this._mouseWheelSpeed*e,!1)}},i.prototype._rollOver=function(){this.showScrollBar(!0)},i.prototype._rollOut=function(){this.showScrollBar(!1)},i.prototype.showScrollBar=function(e){e?(t.GTimer.inst.remove(this.setScrollBarVisible,this),this.setScrollBarVisible(!0)):t.GTimer.inst.add(500,1,this.setScrollBarVisible,this,e)},i.prototype.setScrollBarVisible=function(t){this._scrollBarVisible=t&&this._viewSize.x>0&&this._viewSize.y>0,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)},i.prototype.getLoopPartSize=function(e,i){var n=0;return this._owner instanceof t.GList&&(n="x"==i?this._owner.columnGap:this._owner.lineGap),(this._contentSize[i]+n)/e},i.prototype.loopCheckingCurrent=function(){var t=!1;return 1==this._loop&&this._overlapSize.x>0?this._xPos<.001?(this._xPos+=this.getLoopPartSize(2,"x"),t=!0):this._xPos>=this._overlapSize.x&&(this._xPos-=this.getLoopPartSize(2,"x"),t=!0):2==this._loop&&this._overlapSize.y>0&&(this._yPos<.001?(this._yPos+=this.getLoopPartSize(2,"y"),t=!0):this._yPos>=this._overlapSize.y&&(this._yPos-=this.getLoopPartSize(2,"y"),t=!0)),t&&this._container.position.set(Math.floor(-this._xPos),Math.floor(-this._yPos)),t},i.prototype.loopCheckingTarget=function(t){1==this._loop&&this.loopCheckingTarget2(t,"x"),2==this._loop&&this.loopCheckingTarget2(t,"y")},i.prototype.loopCheckingTarget2=function(t,e){var i,n;t[e]>0?(i=this.getLoopPartSize(2,e),(n=this._tweenStart[e]-i)<=0&&n>=-this._overlapSize[e]&&(t[e]-=i,this._tweenStart[e]=n)):t[e]<-this._overlapSize[e]&&(i=this.getLoopPartSize(2,e),(n=this._tweenStart[e]+i)<=0&&n>=-this._overlapSize[e]&&(t[e]+=i,this._tweenStart[e]=n))},i.prototype.loopCheckingNewPos=function(e,i){if(0==this._overlapSize[i])return e;var n,o="x"==i?this._xPos:this._yPos,r=!1;return e<.001?(e+=this.getLoopPartSize(2,i))>o&&(n=this.getLoopPartSize(6,i),n=Math.ceil((e-o)/n)*n,o=t.utils.NumberUtil.clamp(o+n,0,this._overlapSize[i]),r=!0):e>=this._overlapSize[i]&&(e-=this.getLoopPartSize(2,i))<o&&(n=this.getLoopPartSize(6,i),n=Math.ceil((o-e)/n)*n,o=t.utils.NumberUtil.clamp(o-n,0,this._overlapSize[i]),r=!0),r&&("x"==i?this._container.x=-Math.floor(o):this._container.y=-Math.floor(o)),e},i.prototype.alignPosition=function(t,e){if(this._pageMode)t.x=this.alignByPage(t.x,"x",e),t.y=this.alignByPage(t.y,"y",e);else if(this._snapToItem){var n=this._owner.getSnappingPosition(-t.x,-t.y,i.sHelperPoint);t.x<0&&t.x>-this._overlapSize.x&&(t.x=-n.x),t.y<0&&t.y>-this._overlapSize.y&&(t.y=-n.y)}},i.prototype.alignByPage=function(t,e,i){var n;if(t>0)n=0;else if(t<-this._overlapSize[e])n=Math.ceil(this._contentSize[e]/this._pageSize[e])-1;else{n=Math.floor(-t/this._pageSize[e]);var o=i?t-this._containerPos[e]:t-this._container[e],r=Math.min(this._pageSize[e],this._contentSize[e]-(n+1)*this._pageSize[e]),s=-t-n*this._pageSize[e];Math.abs(o)>this._pageSize[e]?s>.5*r&&n++:s>r*(o<0?.3:.7)&&n++;var a=this._pageSize[e];(t=-n*a)<-a&&(t=-a)}if(i){var h,l=this._tweenStart[e];h=l>0?0:l<-this._overlapSize[e]?Math.ceil(this._contentSize[e]/this._pageSize[e])-1:Math.floor(-l/this._pageSize[e]);var u=Math.floor(-this._containerPos[e]/this._pageSize[e]);Math.abs(n-u)>1&&Math.abs(h-u)<=1&&(t=-(n=n>u?u+1:u-1)*this._pageSize[e])}return t},i.prototype.updateTargetAndDuration=function(t,e){e.x=this.updateTargetAndDuration2(t.x,"x"),e.y=this.updateTargetAndDuration2(t.y,"y")},i.prototype.updateTargetAndDuration2=function(e,n){var o=this._velocity[n],r=0;if(e>0)e=0;else if(e<-this._overlapSize[n])e=-this._overlapSize[n];else{var s=Math.abs(o)*this._velocityScale;PIXI.utils.isMobile.any&&(s*=Math.max(t.GRoot.inst.stageWrapper.designWidth,t.GRoot.inst.stageWrapper.designHeight)/Math.max(t.GRoot.inst.stageWidth,t.GRoot.inst.stageHeight));var a=0;if(this._pageMode||!PIXI.utils.isMobile.any?s>500&&(a=Math.pow((s-500)/500,2)):s>1e3&&(a=Math.pow((s-1e3)/1e3,2)),0!=a)a>1&&(a=1),s*=a,o*=a,this._velocity[n]=o,r=Math.log(60/s)/Math.log(this._decelerationRate)/60,e+=(o/60-1)/(1-this._decelerationRate)}return r<i.TWEEN_DEFAULT_DURATION&&(r=i.TWEEN_DEFAULT_DURATION),this._tweenDuration[n]=r,e},i.prototype.fixDuration=function(t,e){if(!(0==this._tweenChange[t]||Math.abs(this._tweenChange[t])>=Math.abs(e))){var n=Math.abs(this._tweenChange[t]/e)*this._tweenDuration[t];n<i.TWEEN_DEFAULT_DURATION&&(n=i.TWEEN_DEFAULT_DURATION),this._tweenDuration[t]=n}},i.prototype.killTween=function(){1==this._tweening&&(this._container.position.set(this._tweenStart.x+this._tweenChange.x,this._tweenStart.y+this._tweenChange.y),this.emit("__scroll",this)),this._tweening=0,t.GTimer.inst.remove(this.tweenUpdate,this),this.emit("__scrollEnd",this)},i.prototype.checkRefreshBar=function(){if(null!=this._header||null!=this._footer){var t=this._container[this._refreshBarAxis];if(null!=this._header)if(t>0)null==this._header.displayObject.parent&&this._maskContainer.addChildAt(this._header.displayObject,0),(e=i.sHelperPoint).set(this._header.width,this._header.height),e[this._refreshBarAxis]=t,this._header.setSize(e.x,e.y);else null!=this._header.displayObject.parent&&this._maskContainer.removeChild(this._header.displayObject);if(null!=this._footer){var e,n=this._overlapSize[this._refreshBarAxis];if(t<-n||0==n&&this._footerLockedSize>0)null==this._footer.displayObject.parent&&this._maskContainer.addChildAt(this._footer.displayObject,0),(e=i.sHelperPoint).set(this._footer.x,this._footer.y),e[this._refreshBarAxis]=n>0?t+this._contentSize[this._refreshBarAxis]:Math.max(Math.min(t+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]),this._footer.setXY(e.x,e.y),e.set(this._footer.width,this._footer.height),e[this._refreshBarAxis]=n>0?-n-t:this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis],this._footer.setSize(e.x,e.y);else null!=this._footer.displayObject.parent&&this._maskContainer.removeChild(this._footer.displayObject)}}},i.prototype.tweenUpdate=function(){var e=this.runTween("x"),i=this.runTween("y");this._container.position.set(e,i),2==this._tweening&&(this._overlapSize.x>0&&(this._xPos=t.utils.NumberUtil.clamp(-e,0,this._overlapSize.x)),this._overlapSize.y>0&&(this._yPos=t.utils.NumberUtil.clamp(-i,0,this._overlapSize.y)),this._pageMode&&this.updatePageController()),0==this._tweenChange.x&&0==this._tweenChange.y?(this._tweening=0,t.GTimer.inst.remove(this.tweenUpdate,this),this.loopCheckingCurrent(),this.syncScrollBar(!0),this.checkRefreshBar(),this.emit("__scroll",this),this.emit("__scrollEnd",this)):(this.syncScrollBar(!1),this.checkRefreshBar(),this.emit("__scroll",this))},i.prototype.runTween=function(e){var n,o=t.GTimer.inst.ticker.deltaTime;if(0!=this._tweenChange[e]){if(this._tweenTime[e]+=o*PIXI.settings.TARGET_FPMS,this._tweenTime[e]>=this._tweenDuration[e])n=this._tweenStart[e]+this._tweenChange[e],this._tweenChange[e]=0;else{var r=i._easeTypeFunc(this._tweenTime[e],this._tweenDuration[e]);n=this._tweenStart[e]+Math.floor(this._tweenChange[e]*r)}var s=0,a=-this._overlapSize[e];if(this._headerLockedSize>0&&this._refreshBarAxis==e&&(s=this._headerLockedSize),this._footerLockedSize>0&&this._refreshBarAxis==e){var h=this._overlapSize[this._refreshBarAxis];0==h?h=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):h+=this._footerLockedSize,a=-h}2==this._tweening&&this._bouncebackEffect?n>20+s&&this._tweenChange[e]>0||n>s&&0==this._tweenChange[e]?(this._tweenTime[e]=0,this._tweenDuration[e]=i.TWEEN_DEFAULT_DURATION,this._tweenChange[e]=-n+s,this._tweenStart[e]=n):(n<a-20&&this._tweenChange[e]<0||n<a&&0==this._tweenChange[e])&&(this._tweenTime[e]=0,this._tweenDuration[e]=i.TWEEN_DEFAULT_DURATION,this._tweenChange[e]=a-n,this._tweenStart[e]=n):n>s?(n=s,this._tweenChange[e]=0):n<a&&(n=a,this._tweenChange[e]=0)}else n=this._container[e];return n},i._easeTypeFunc=function(t,e){return(t=t/e-1)*t*t+1},i._gestureFlag=0,i.sHelperPoint=new PIXI.Point,i.sHelperRect=new PIXI.Rectangle,i.sEndPos=new PIXI.Point,i.sOldChange=new PIXI.Point,i.SCROLL="__scroll",i.SCROLL_END="__scrollEnd",i.PULL_DOWN_RELEASE="pullDownRelease",i.PULL_UP_RELEASE="pullUpRelease",i.TWEEN_DEFAULT_DURATION=.4,i.TWEEN_MANUALLY_SET_DURATION=.5,i.PULL_DIST_RATIO=.5,i}(PIXI.utils.EventEmitter);t.ScrollPane=e}(fgui||(fgui={})),function(t){var e=function(){function e(t){this._ownerBaseX=0,this._ownerBaseY=0,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._paused=!1,this._options=0,this._reversed=!1,this._totalDuration=0,this._autoPlay=!1,this._autoPlayTimes=1,this._autoPlayDelay=0,this._timeScale=1,this._startTime=0,this._endTime=0,this._owner=t,this._items=new Array}return e.prototype.play=function(t,e,i,n,o,r,s){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=-1),this._play(t,e,i,n,o,r,s,!1)},e.prototype.playReverse=function(t,e,i,n,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),this._play(t,e,i,n,o,0,-1,!0)},e.prototype.changePlayTimes=function(t){this._totalTimes=t},e.prototype.setAutoPlay=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=0),this._autoPlay!=t&&(this._autoPlay=t,this._autoPlayTimes=e,this._autoPlayDelay=i,this._autoPlay?this._owner.onStage&&this.play(null,null,this._autoPlayTimes,this._autoPlayDelay):this._owner.onStage||this.stop(!1,!0))},e.prototype._play=function(e,n,o,r,s,a,h,l){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=-1),void 0===l&&(l=!1),this.stop(!0,!0),this._totalTimes=r,this._reversed=l,this._startTime=a,this._endTime=h,this._playing=!0,this._paused=!1,this._onComplete=e,this._onCompleteParam=o,this._onCompleteCaller=n;for(var u=this._items.length,c=0;c<u;c++){var p=this._items[c];if(null==p.target?p.targetId?p.target=this._owner.getChildById(p.targetId):p.target=this._owner:p.target!=this._owner&&p.target.parent!=this._owner&&(p.target=null),null!=p.target&&p.type==i.Transition){var _=p.target.getTransition(p.value.transName);if(_==this&&(_=null),null!=_)if(0==p.value.playTimes){var d;for(d=c-1;d>=0;d--){var f=this._items[d];if(f.type==i.Transition&&f.value.trans==_){f.value.stopTime=p.time-f.time;break}}d<0?p.value.stopTime=0:_=null}else p.value.stopTime=-1;p.value.trans=_}}0==s?this.onDelayedPlay():t.GTween.delayedCall(s).onComplete(this.onDelayedPlay,this)},e.prototype.stop=function(e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var n=this._onComplete,o=this._onCompleteParam,r=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,t.GTween.kill(this);var s=this._items.length;if(this._reversed)for(var a=s-1;a>=0;a--){var h=this._items[a];null!=h.target&&this.stopItem(h,e)}else for(a=0;a<s;a++)null!=(h=this._items[a]).target&&this.stopItem(h,e);i&&null!=n&&n.call(r,o)}},e.prototype.stopItem=function(t,e){if(0!=t.displayLockToken&&(t.target.releaseDisplayLock(t.displayLockToken),t.displayLockToken=0),null!=t.tweener&&(t.tweener.kill(e),t.tweener=null,t.type!=i.Shake||e||(t.target._gearLocked=!0,t.target.setXY(t.target.x-t.value.lastOffsetX,t.target.y-t.value.lastOffsetY),t.target._gearLocked=!1)),t.type==i.Transition){var n=t.value.trans;null!=n&&n.stop(e,!1)}},e.prototype.setPaused=function(e){if(this._playing&&this._paused!=e){this._paused=e;var n=t.GTween.getTween(this);null!=n&&n.setPaused(e);for(var o=this._items.length,r=0;r<o;r++){var s=this._items[r];null!=s.target&&(s.type==i.Transition?null!=s.value.trans&&s.value.trans.setPaused(e):s.type==i.Animation&&(e?(s.value.flag=s.target.getProp(t.ObjectPropID.Playing),s.target.setProp(t.ObjectPropID.Playing,!1)):s.target.setProp(t.ObjectPropID.Playing,s.value.flag)),null!=s.tweener&&s.tweener.setPaused(e))}}},e.prototype.dispose=function(){this._playing&&t.GTween.kill(this);for(var e=this._items.length,i=0;i<e;i++){var n=this._items[i];null!=n.tweener&&(n.tweener.kill(),n.tweener=null),n.target=null,n.hook=null,null!=n.tweenConfig&&(n.tweenConfig.endHook=null)}this._items.length=0,this._playing=!1,this._onComplete=null,this._onCompleteCaller=null,this._onCompleteParam=null},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o,r=this._items.length,s=0;s<r;s++){var a=this._items[s];if(a.label==t)o=null!=a.tweenConfig?a.tweenConfig.startValue:a.value;else{if(null==a.tweenConfig||a.tweenConfig.endLabel!=t)continue;o=a.tweenConfig.endValue}switch(a.type){case i.XY:case i.Size:case i.Pivot:case i.Scale:case i.Skew:o.b1=!0,o.b2=!0,o.f1=parseFloat(e[0]),o.f2=parseFloat(e[1]);break;case i.Alpha:case i.Rotation:case i.Color:o.f1=parseFloat(e[0]);break;case i.Animation:o.frame=parseInt(e[0]),e.length>1&&(o.playing=e[1]);break;case i.Visible:o.visible=e[0];break;case i.Sound:o.sound=e[0],e.length>1&&(o.volume=parseFloat(e[1]));break;case i.Transition:o.transName=e[0],e.length>1&&(o.playTimes=parseInt(e[1]));break;case i.Shake:o.amplitude=parseFloat(e[0]),e.length>1&&(o.duration=parseFloat(e[1]));break;case i.ColorFilter:o.f1=parseFloat(e[0]),o.f2=parseFloat(e[1]),o.f3=parseFloat(e[2]),o.f4=parseFloat(e[3]);break;case i.Text:case i.Icon:o.text=e[0]}}},e.prototype.setHook=function(t,e,i){for(var n=this._items.length,o=0;o<n;o++){var r=this._items[o];if(r.label==t){r.hook=e,r.hookCaller=i;break}if(null!=r.tweenConfig&&r.tweenConfig.endLabel==t){r.tweenConfig.endHook=e,r.tweenConfig.endHookCaller=i;break}}},e.prototype.clearHooks=function(){for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];i.hook=null,i.hookCaller=null,null!=i.tweenConfig&&(i.tweenConfig.endHook=null,i.tweenConfig.endHookCaller=null)}},e.prototype.setTarget=function(t,e){for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];o.label==t&&(o.targetId=e==this._owner||null==e?"":e.id,this._playing?o.targetId.length>0?o.target=this._owner.getChildById(o.targetId):o.target=this._owner:o.target=null)}},e.prototype.setDuration=function(t,e){for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];null!=o.tweenConfig&&o.label==t&&(o.tweenConfig.duration=e)}},e.prototype.getLabelTime=function(t){for(var e=this._items.length,i=0;i<e;i++){var n=this._items[i];if(n.label==t)return n.time;if(null!=n.tweenConfig&&n.tweenConfig.endLabel==t)return n.time+n.tweenConfig.duration}return Number.NaN},Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(e){if(this._timeScale!=e&&(this._timeScale=e,this._playing))for(var n=this._items.length,o=0;o<n;o++){var r=this._items[o];null!=r.tweener?r.tweener.setTimeScale(e):r.type==i.Transition?null!=r.value.trans&&(r.value.trans.timeScale=e):r.type==i.Animation&&null!=r.target&&r.target.setProp(t.ObjectPropID.TimeScale,e)}},enumerable:!0,configurable:!0}),e.prototype.updateFromRelations=function(t,e,n){var o=this._items.length;if(0!=o)for(var r=0;r<o;r++){var s=this._items[r];s.type==i.XY&&s.targetId==t&&(null!=s.tweenConfig?(s.tweenConfig.startValue.f1+=e,s.tweenConfig.startValue.f2+=n,s.tweenConfig.endValue.f1+=e,s.tweenConfig.endValue.f2+=n):(s.value.f1+=e,s.value.f2+=n))}},e.prototype.onOwnerAddedToStage=function(){this._autoPlay&&!this._playing&&this.play(null,null,null,this._autoPlayTimes,this._autoPlayDelay)},e.prototype.onOwnerRemovedFromStage=function(){0==(this._options&e.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&e.OPTION_AUTO_STOP_AT_END),!1)},e.prototype.onDelayedPlay=function(){if(this.internalPlay(),this._playing=this._totalTasks>0,this._playing){if(0!=(this._options&e.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var t=this._items.length,i=0;i<t;i++){var n=this._items[i];null!=n.target&&n.target!=this._owner&&(n.displayLockToken=n.target.addDisplayLock())}}else if(null!=this._onComplete){var o=this._onComplete,r=this._onCompleteParam,s=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,o.call(s,r)}},e.prototype.internalPlay=function(){this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;var t,e,n=this._items.length,o=!1;if(this._reversed)for(e=n-1;e>=0;e--)null!=(t=this._items[e]).target&&this.playItem(t);else for(e=0;e<n;e++)null!=(t=this._items[e]).target&&(t.type==i.Animation&&0!=this._startTime&&t.time<=this._startTime?(o=!0,t.value.flag=!1):this.playItem(t));o&&this.skipAnimations()},e.prototype.playItem=function(e){var n;if(null!=e.tweenConfig){if(n=this._reversed?this._totalDuration-e.time-e.tweenConfig.duration:e.time,-1==this._endTime||n<=this._endTime){var o,r;switch(this._reversed?(o=e.tweenConfig.endValue,r=e.tweenConfig.startValue):(o=e.tweenConfig.startValue,r=e.tweenConfig.endValue),e.value.b1=o.b1||r.b1,e.value.b2=o.b2||r.b2,e.type){case i.XY:case i.Size:case i.Scale:case i.Skew:e.tweener=t.GTween.to2(o.f1,o.f2,r.f1,r.f2,e.tweenConfig.duration);break;case i.Alpha:case i.Rotation:e.tweener=t.GTween.to(o.f1,r.f1,e.tweenConfig.duration);break;case i.Color:e.tweener=t.GTween.toColor(o.f1,r.f1,e.tweenConfig.duration);break;case i.ColorFilter:e.tweener=t.GTween.to4(o.f1,o.f2,o.f3,o.f4,r.f1,r.f2,r.f3,r.f4,e.tweenConfig.duration)}e.tweener.setDelay(n).setEase(e.tweenConfig.easeType).setRepeat(e.tweenConfig.repeat,e.tweenConfig.yoyo).setTimeScale(this._timeScale).setTarget(e).onStart(this.onTweenStart,this).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),this._endTime>=0&&e.tweener.setBreakpoint(this._endTime-n),this._totalTasks++}}else e.type==i.Shake?(n=this._reversed?this._totalDuration-e.time-e.value.duration:e.time,e.value.offsetX=e.value.offsetY=0,e.value.lastOffsetX=e.value.lastOffsetY=0,e.tweener=t.GTween.shake(0,0,e.value.amplitude,e.value.duration).setDelay(n).setTimeScale(this._timeScale).setTarget(e).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),this._endTime>=0&&e.tweener.setBreakpoint(this._endTime-e.time),this._totalTasks++):(n=this._reversed?this._totalDuration-e.time:e.time)<=this._startTime?(this.applyValue(e),this.callHook(e,!1)):(-1==this._endTime||n<=this._endTime)&&(this._totalTasks++,e.tweener=t.GTween.delayedCall(n).setTimeScale(this._timeScale).setTarget(e).onComplete(this.onDelayedPlayItem,this));null!=e.tweener&&e.tweener.seek(this._startTime)},e.prototype.skipAnimations=function(){for(var e,n,o,r,s,a,h=this._items.length,l=0;l<h;l++)if(!((a=this._items[l]).type!=i.Animation||a.time>this._startTime||(r=a.value).flag)){e=(s=a.target).getProp(t.ObjectPropID.Frame),n=s.getProp(t.ObjectPropID.Playing)?0:-1,o=0;for(var u=l;u<h;u++)(a=this._items[u]).type!=i.Animation||a.target!=s||a.time>this._startTime||((r=a.value).flag=!0,-1!=r.frame?(e=r.frame,n=r.playing?a.time:-1,o=0):r.playing?n<0&&(n=a.time):(n>=0&&(o+=a.time-n),n=-1),this.callHook(a,!1));n>=0&&(o+=this._startTime-n),s.setProp(t.ObjectPropID.Playing,n>=0),s.setProp(t.ObjectPropID.Frame,e),o>0&&s.setProp(t.ObjectPropID.DeltaTime,1e3*o)}},e.prototype.onDelayedPlayItem=function(t){var e=t.target;e.tweener=null,this._totalTasks--,this.applyValue(e),this.callHook(e,!1),this.checkAllComplete()},e.prototype.onTweenStart=function(t){var e,n,o=t.target;o.type!=i.XY&&o.type!=i.Size||(this._reversed?(e=o.tweenConfig.endValue,n=o.tweenConfig.startValue):(e=o.tweenConfig.startValue,n=o.tweenConfig.endValue),o.type==i.XY?o.target!=this._owner?(e.b1?e.b3&&(t.startValue.x=e.f1*this._owner.width):t.startValue.x=o.target.x,e.b2?e.b3&&(t.startValue.y=e.f2*this._owner.height):t.startValue.y=o.target.y,n.b1?n.b3&&(t.endValue.x=n.f1*this._owner.width):t.endValue.x=t.startValue.x,n.b2?n.b3&&(t.endValue.y=n.f2*this._owner.height):t.endValue.y=t.startValue.y):(e.b1||(t.startValue.x=o.target.x-this._ownerBaseX),e.b2||(t.startValue.y=o.target.y-this._ownerBaseY),n.b1||(t.endValue.x=t.startValue.x),n.b2||(t.endValue.y=t.startValue.y)):(e.b1||(t.startValue.x=o.target.width),e.b2||(t.startValue.y=o.target.height),n.b1||(t.endValue.x=t.startValue.x),n.b2||(t.endValue.y=t.startValue.y)),o.tweenConfig.path&&(o.value.b1=o.value.b2=!0,t.setPath(o.tweenConfig.path)));this.callHook(o,!1)},e.prototype.onTweenUpdate=function(t){var e=t.target;switch(e.type){case i.XY:case i.Size:case i.Scale:case i.Skew:e.value.f1=t.value.x,e.value.f2=t.value.y,e.tweenConfig.path&&(e.value.f1+=t.startValue.x,e.value.f2+=t.startValue.y);break;case i.Alpha:case i.Rotation:e.value.f1=t.value.x;break;case i.Color:e.value.f1=t.value.color;break;case i.ColorFilter:e.value.f1=t.value.x,e.value.f2=t.value.y,e.value.f3=t.value.z,e.value.f4=t.value.w;break;case i.Shake:e.value.offsetX=t.deltaValue.x,e.value.offsetY=t.deltaValue.y}this.applyValue(e)},e.prototype.onTweenComplete=function(t){var e=t.target;e.tweener=null,this._totalTasks--,t.allCompleted&&this.callHook(e,!0),this.checkAllComplete()},e.prototype.onPlayTransCompleted=function(t){this._totalTasks--,this.checkAllComplete()},e.prototype.callHook=function(t,e){e?null!=t.tweenConfig&&null!=t.tweenConfig.endHook&&t.tweenConfig.endHook.call(t.tweenConfig.endHookCaller):t.time>=this._startTime&&null!=t.hook&&t.hook.call(t.hookCaller)},e.prototype.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)this.internalPlay();else if(this._totalTimes--,this._totalTimes>0)this.internalPlay();else{this._playing=!1;for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];null!=i.target&&0!=i.displayLockToken&&(i.target.releaseDisplayLock(i.displayLockToken),i.displayLockToken=0)}if(null!=this._onComplete){var n=this._onComplete,o=this._onCompleteParam,r=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,n.call(r,o)}}},e.prototype.applyValue=function(e){e.target._gearLocked=!0;var n=e.value;switch(e.type){case i.XY:e.target==this._owner?n.b1&&n.b2?e.target.setXY(n.f1+this._ownerBaseX,n.f2+this._ownerBaseY):n.b1?e.target.x=n.f1+this._ownerBaseX:e.target.y=n.f2+this._ownerBaseY:n.b3?n.b1&&n.b2?e.target.setXY(n.f1*this._owner.width,n.f2*this._owner.height):n.b1?e.target.x=n.f1*this._owner.width:n.b2&&(e.target.y=n.f2*this._owner.height):n.b1&&n.b2?e.target.setXY(n.f1,n.f2):n.b1?e.target.x=n.f1:n.b2&&(e.target.y=n.f2);break;case i.Size:n.b1||(n.f1=e.target.width),n.b2||(n.f2=e.target.height),e.target.setSize(n.f1,n.f2);break;case i.Pivot:e.target.setPivot(n.f1,n.f2,e.target.pivotAsAnchor);break;case i.Alpha:e.target.alpha=n.f1;break;case i.Rotation:e.target.rotation=n.f1;break;case i.Scale:e.target.setScale(n.f1,n.f2);break;case i.Skew:e.target.setSkew(n.f1,n.f2);break;case i.Color:e.target.setProp(t.ObjectPropID.Color,n.f1);break;case i.Animation:n.frame>=0&&e.target.setProp(t.ObjectPropID.Frame,n.frame),e.target.setProp(t.ObjectPropID.Playing,n.playing),e.target.setProp(t.ObjectPropID.TimeScale,this._timeScale);break;case i.Visible:e.target.visible=n.visible;break;case i.Transition:if(this._playing){var o=n.trans;if(null!=o){this._totalTasks++;var r=this._startTime>e.time?this._startTime-e.time:0,s=this._endTime>=0?this._endTime-e.time:-1;n.stopTime>=0&&(s<0||s>n.stopTime)&&(s=n.stopTime),o.timeScale=this._timeScale,o._play(this.onPlayTransCompleted,this,e,n.playTimes,0,r,s,this._reversed)}}break;case i.Sound:if(this._playing&&e.time>=this._startTime){if(null==n.audioClip){var a=t.UIPackage.getItemByURL(n.sound);a&&(n.audioClip=a.owner.getItemAsset(a))}n.audioClip&&t.GRoot.inst.playOneShotSound(n.audioClip,n.volume)}break;case i.Shake:e.target.setXY(e.target.x-n.lastOffsetX+n.offsetX,e.target.y-n.lastOffsetY+n.offsetY),n.lastOffsetX=n.offsetX,n.lastOffsetY=n.offsetY;break;case i.ColorFilter:t.ToolSet.setColorFilter(e.target.displayObject,[n.f1,n.f2,n.f3,n.f4]);break;case i.Text:e.target.text=n.text;break;case i.Icon:e.target.icon=n.text}e.target._gearLocked=!1},e.prototype.setup=function(e){this.name=e.readS(),this._options=e.readInt(),this._autoPlay=e.readBool(),this._autoPlayTimes=e.readInt(),this._autoPlayDelay=e.readFloat();for(var i=e.readShort(),r=0;r<i;r++){var s=e.readShort(),a=e.position;e.seek(a,0);var h=new n(e.readByte());this._items[r]=h,h.time=e.readFloat();var l=e.readShort();if(h.targetId=l<0?"":this._owner.getChildAt(l).id,h.label=e.readS(),e.readBool()){if(e.seek(a,1),h.tweenConfig=new o,h.tweenConfig.duration=e.readFloat(),h.time+h.tweenConfig.duration>this._totalDuration&&(this._totalDuration=h.time+h.tweenConfig.duration),h.tweenConfig.easeType=e.readByte(),h.tweenConfig.repeat=e.readInt(),h.tweenConfig.yoyo=e.readBool(),h.tweenConfig.endLabel=e.readS(),e.seek(a,2),this.decodeValue(h,e,h.tweenConfig.startValue),e.seek(a,3),this.decodeValue(h,e,h.tweenConfig.endValue),e.version>=2){var u=e.readInt();if(u>0){h.tweenConfig.path=new t.GPath;for(var c=new Array,p=0;p<u;p++){var _=e.readByte();switch(_){case t.CurveType.Bezier:c.push(t.GPathPoint.newBezierPoint(e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()));break;case t.CurveType.CubicBezier:c.push(t.GPathPoint.newCubicBezierPoint(e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()));break;default:c.push(t.GPathPoint.newPoint(e.readFloat(),e.readFloat(),_))}}h.tweenConfig.path.create(c)}}}else h.time>this._totalDuration&&(this._totalDuration=h.time),e.seek(a,2),this.decodeValue(h,e,h.value);e.position=a+s}},e.prototype.decodeValue=function(t,e,n){switch(t.type){case i.XY:case i.Size:case i.Pivot:case i.Skew:n.b1=e.readBool(),n.b2=e.readBool(),n.f1=e.readFloat(),n.f2=e.readFloat(),e.version>=2&&t.type==i.XY&&(n.b3=e.readBool());break;case i.Alpha:case i.Rotation:n.f1=e.readFloat();break;case i.Scale:n.f1=e.readFloat(),n.f2=e.readFloat();break;case i.Color:n.f1=e.readColor();break;case i.Animation:n.playing=e.readBool(),n.frame=e.readInt();break;case i.Visible:n.visible=e.readBool();break;case i.Sound:n.sound=e.readS(),n.volume=e.readFloat();break;case i.Transition:n.transName=e.readS(),n.playTimes=e.readInt();break;case i.Shake:n.amplitude=e.readFloat(),n.duration=e.readFloat();break;case i.ColorFilter:n.f1=e.readFloat(),n.f2=e.readFloat(),n.f3=e.readFloat(),n.f4=e.readFloat();break;case i.Text:case i.Icon:n.text=e.readS()}},e.OPTION_IGNORE_DISPLAY_CONTROLLER=1,e.OPTION_AUTO_STOP_DISABLED=2,e.OPTION_AUTO_STOP_AT_END=4,e}();t.Transition=e;var i=function(){function t(){}return t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Sound=9,t.Transition=10,t.Shake=11,t.ColorFilter=12,t.Skew=13,t.Text=14,t.Icon=15,t.Unknown=16,t}(),n=function(){return function(t){switch(this.type=t,t){case i.XY:case i.Size:case i.Scale:case i.Pivot:case i.Skew:case i.Alpha:case i.Rotation:case i.Color:case i.ColorFilter:this.value=new c;break;case i.Animation:this.value=new s;break;case i.Shake:this.value=new l;break;case i.Sound:this.value=new a;break;case i.Transition:this.value=new h;break;case i.Visible:this.value=new r;break;case i.Text:case i.Icon:this.value=new u}}}(),o=function(){return function(){this.duration=0,this.repeat=0,this.yoyo=!1,this.easeType=t.EaseType.QuadOut,this.startValue=new c,this.endValue=new c}}(),r=function(){return function(){}}(),s=function(){return function(){}}(),a=function(){return function(){}}(),h=function(){return function(){}}(),l=function(){return function(){}}(),u=function(){return function(){}}(),c=function(){return function(){this.f1=this.f2=this.f3=this.f4=0,this.b1=this.b2=!0}}()}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.loadFromXML=function(i){e.strings={};for(var n=t.utils.XmlParser.tryParse(i).children,o=n.length,r=0;r<o;r++){var s=n[r];if("string"==s.name){var a=s.attributes.name,h=s.children.length>0?s.children[0].text:"",l=a.indexOf("-");if(-1==l)continue;var u=a.substr(0,l),c=a.substr(l+1),p=e.strings[u];p||(p={},e.strings[u]=p),p[c]=h}}},e.translateComponent=function(i){if(null!=e.strings){var n=e.strings[i.owner.id+i.id];if(null!=n){var o,r,s,a,h,l,u,c,p,_=i.rawData;_.seek(0,2);var d=_.readShort();for(h=0;h<d;h++){u=_.readShort(),c=_.position,_.seek(c,0);var f=_.readByte(),g=f;_.skip(4),o=_.readS(),g==t.ObjectType.Component&&_.seek(c,6)&&(g=_.readByte()),_.seek(c,1),null!=(r=n[o+"-tips"])&&_.writeS(r),_.seek(c,2);var y=_.readShort();for(l=0;l<y;l++){if(s=_.readShort(),s+=_.position,6==_.readByte()){for(_.skip(2),p=_.readShort(),b=0;b<p;b++)null!=_.readS()&&(null!=(r=n[o+"-texts_"+b])?_.writeS(r):_.skip(2));_.readBool()&&null!=(r=n[o+"-texts_def"])&&_.writeS(r)}if(f==t.ObjectType.Component&&_.version>=2){_.seek(c,4),_.skip(2),_.skip(4*_.readShort());for(var m=_.readShort(),b=0;b<m;b++){var v=_.readS();0==_.readShort()&&null!=(r=n[o+"-cp-"+v])?_.writeS(r):_.skip(2)}}_.position=s}switch(g){case t.ObjectType.Text:case t.ObjectType.RichText:case t.ObjectType.InputText:null!=(r=n[o])&&(_.seek(c,6),_.writeS(r)),null!=(r=n[o+"-prompt"])&&(_.seek(c,4),_.writeS(r));break;case t.ObjectType.List:case t.ObjectType.Tree:for(_.seek(c,8),_.skip(2),a=_.readShort(),l=0;l<a;l++){if(s=_.readShort(),s+=_.position,_.skip(2),g==t.ObjectType.Tree&&_.skip(2),null!=(r=n[o+"-"+l])?_.writeS(r):_.skip(2),null!=(r=n[o+"-"+l+"-0"])?_.writeS(r):_.skip(2),_.version>=2){_.skip(6),_.skip(4*_.readUnsignedShort());for(m=_.readUnsignedShort(),b=0;b<m;b++){v=_.readS();0==_.readUnsignedShort()&&null!=(r=n[o+"-"+l+"-"+v])?_.writeS(r):_.skip(2)}}_.position=s}break;case t.ObjectType.Label:_.seek(c,6)&&_.readByte()==g&&(null!=(r=n[o])?_.writeS(r):_.skip(2),_.skip(2),_.readBool()&&_.skip(4),_.skip(4),_.readBool()&&null!=(r=n[o+"-prompt"])&&_.writeS(r));break;case t.ObjectType.Button:_.seek(c,6)&&_.readByte()==g&&(null!=(r=n[o])?_.writeS(r):_.skip(2),null!=(r=n[o+"-0"])&&_.writeS(r));break;case t.ObjectType.ComboBox:if(_.seek(c,6)&&_.readByte()==g){for(a=_.readShort(),l=0;l<a;l++)s=_.readShort(),s+=_.position,null!=(r=n[o+"-"+l])&&_.writeS(r),_.position=s;null!=(r=n[o])&&_.writeS(r)}}_.position=c+u}}}},e.strings=null,e}();t.TranslationHelper=e}(fgui||(fgui={})),function(t){t.version="1.0.0"}(fgui||(fgui={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._requestingCmd=0,i.focusable=!0,i._uiSources=[],i.bringToFrontOnClick=t.UIConfig.bringWindowToFrontOnClick,i.on("added",i._onShown,i),i.on("removed",i._onHidden,i),i.on(t.InteractiveEvents.Down,i._mouseDown,i),i}return __extends(i,e),i.prototype.addUISource=function(t){this._uiSources.push(t)},Object.defineProperty(i.prototype,"contentPane",{get:function(){return this._contentPane},set:function(e){this._contentPane!=e&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=e,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,t.RelationType.Size),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeButton",{get:function(){return this._closeButton},set:function(e){null!=this._closeButton&&this._closeButton.off(t.InteractiveEvents.Click,this.closeEventHandler,this),this._closeButton=e,null!=this._closeButton&&this._closeButton.on(t.InteractiveEvents.Click,this.closeEventHandler,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragArea",{get:function(){return this._dragArea},set:function(e){this._dragArea!=e&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.off("__dragStart",this._dragStart,this)),this._dragArea=e,null!=this._dragArea&&(this._dragArea instanceof t.GGraph&&this._dragArea.drawRect(0,0,0,0,0),this._dragArea.draggable=!0,this._dragArea.on("__dragStart",this._dragStart,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentArea",{get:function(){return this._contentArea},set:function(t){this._contentArea=t},enumerable:!0,configurable:!0}),i.prototype.show=function(){t.GRoot.inst.showWindow(this)},i.prototype.showOn=function(t){t.showWindow(this)},i.prototype.hide=function(){this.isShowing&&this.doHideAnimation()},i.prototype.hideImmediately=function(){(this.parent&&this.parent instanceof t.GRoot?this.parent:t.GRoot.inst).hideWindowImmediately(this)},i.prototype.centerOn=function(e,i){void 0===i&&(i=!1),this.setXY(Math.round(.5*(e.width-this.width)),Math.round(.5*(e.height-this.height))),i&&(this.addRelation(e,t.RelationType.Center_Center),this.addRelation(e,t.RelationType.Middle_Middle))},i.prototype.toggleVisible=function(){this.isTop?this.hide():this.show()},Object.defineProperty(i.prototype,"isShowing",{get:function(){return null!=this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modal",{get:function(){return this._modal},set:function(t){this._modal=t},enumerable:!0,configurable:!0}),i.prototype.bringToFront=function(){this.root.bringToFront(this)},i.prototype.showModalWait=function(e,i){void 0===i&&(i=0),0!=i&&(this._requestingCmd=i),t.UIConfig.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(e),this.addChild(this._modalWaitPane))},i.prototype.layoutModalWaitPane=function(t){if(null!=this._contentArea){var e=this._frame.localToGlobal();e=this.globalToLocal(e.x,e.y,e),this._modalWaitPane.setXY(e.x+this._contentArea.x,e.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height),t&&t.length&&(this._modalWaitPane.text=t)}else this._modalWaitPane.setSize(this.width,this.height)},i.prototype.closeModalWait=function(t){return void 0===t&&(t=0),(0==t||this._requestingCmd==t)&&(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0)},Object.defineProperty(i.prototype,"modalWaiting",{get:function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent},enumerable:!0,configurable:!0}),i.prototype.init=function(){var t=this;this._inited||this._loading||(this._uiSources.length>0?(this._loading=!1,this._uiSources.forEach(function(e){e.loaded||(e.load(t._uiLoadComplete,t),t._loading=!0)},this),this._loading||this._init()):this._init())},i.prototype.onInit=function(){},i.prototype.onShown=function(){},i.prototype.onHide=function(){},i.prototype.doShowAnimation=function(){this.onShown()},i.prototype.doHideAnimation=function(){this.hideImmediately()},i.prototype._uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;e<t;e++)if(!this._uiSources[e].loaded)return;this._loading=!1,this._init()},i.prototype._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},i.prototype.dispose=function(){this.off("added",this._onShown,this),this.off("removed",this._onHidden,this),this.off(t.InteractiveEvents.Down,this._mouseDown,this),this._dragArea&&this._dragArea.off("__dragStart",this._dragStart,this),null!=this.parent&&this.hideImmediately(),this._modalWaitPane&&this._modalWaitPane.dispose(),this._contentPane&&this._contentPane.dispose(),e.prototype.dispose.call(this)},i.prototype.closeEventHandler=function(t){this.hide()},i.prototype._onShown=function(t){this._inited?this.doShowAnimation():this.init()},i.prototype._onHidden=function(t){this.closeModalWait(),this.onHide()},i.prototype._mouseDown=function(t){this.isShowing&&this.bringToFrontOnClick&&this.bringToFront()},i.prototype._dragStart=function(e){t.GObject.cast(e.currentTarget).stopDrag(),this.startDrag(e.data.pointerId)},i}(t.GComponent);t.Window=e}(fgui||(fgui={})),function(t){!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.stageRotation=0,n.stageScaleX=1,n.stageScaleY=1,n}return __extends(e,t),e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0,o=this.interactionDOMElement;n=o.parentElement?o.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution,s=document.documentElement,a=e-=n.left+window.pageXOffset-s.clientLeft,h=i-=n.top+window.pageYOffset-s.clientTop;90==this.stageRotation?(a=i,h=n.width-e):-90==this.stageRotation&&(a=n.height-i,h=e),a=a*this.stageScaleX*r,h=h*this.stageScaleY*r,t.set(a,h)},e}(PIXI.interaction.InteractionManager);t.InteractionManager=e;var i=e;PIXI.Renderer.registerPlugin("interaction",i)}(t.pixi_extend||(t.pixi_extend={}))}(fgui||(fgui={})),function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$flipX=!1,e.$flipY=!1,e}return __extends(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.verticesBuffer,e=this.topHeight+this.bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=(this.$flipY?this.bottomHeight:this.topHeight)*i,t[17]=t[19]=t[21]=t[23]=this._height-(this.$flipY?this.topHeight:this.bottomHeight)*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.verticesBuffer,e=this.leftWidth+this.rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=(this.$flipX?this.rightWidth:this.leftWidth)*i,t[4]=t[12]=t[20]=t[28]=this._width-(this.$flipX?this.leftWidth:this.rightWidth)*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._refresh=function(){if(!(isNaN(this.leftWidth)||isNaN(this.topHeight)||isNaN(this.rightWidth)||isNaN(this.bottomHeight))){t.prototype._refresh.call(this);var e=this.uvBuffer;if(this.$flipX){var i=e[0],n=e[2];e[0]=e[6],e[2]=e[4],e[6]=i,e[4]=n,i=e[8],n=e[10],e[8]=e[14],e[10]=e[12],e[14]=i,e[12]=n,i=e[16],n=e[18],e[16]=e[22],e[18]=e[20],e[22]=i,e[20]=n,i=e[24],n=e[26],e[24]=e[30],e[26]=e[28],e[30]=i,e[28]=n}if(this.$flipY){var o=e[1],r=e[9];e[1]=e[25],e[9]=e[17],e[25]=o,e[17]=r,o=e[3],r=e[11],e[3]=e[27],e[11]=e[19],e[27]=o,e[19]=r,o=e[5],r=e[13],e[5]=e[29],e[13]=e[21],e[29]=o,e[21]=r,o=e[7],r=e[15],e[7]=e[31],e[15]=e[23],e[31]=o,e[23]=r}}},Object.defineProperty(e.prototype,"flipX",{get:function(){return this.$flipX},set:function(t){this.$flipX!=t&&(this.$flipX=t,this._refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this.$flipY},set:function(t){this.$flipY!=t&&(this.$flipY=t,this._refresh())},enumerable:!0,configurable:!0}),e}(PIXI.NineSlicePlane);t.NineSlicePlane=e}(t.pixi_extend||(t.pixi_extend={}))}(fgui||(fgui={})),function(t){!function(e){var i=function(e){function i(t,i){var n=e.call(this,i)||this;return n._flipX=!1,n._flipY=!1,n._frameId=t,n}return __extends(i,e),Object.defineProperty(i.prototype,"flipX",{get:function(){return this._flipX},set:function(e){this._flipX!=e&&(this._flipX=e,t.GTimer.inst.callLater(this.updateUvs,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this._flipY},set:function(e){this._flipY!=e&&(this._flipY=e,t.GTimer.inst.callLater(this.updateUvs,this))},enumerable:!0,configurable:!0}),i.prototype.combineCacheId=function(t,e){return this._frameId&&""!=this._frameId?"_{this._frameId}_{flipx ? '_fx' : ''}_{flipy ? '_fy' : ''}":null},i.prototype.getTextureFromCache=function(t,e){var n=this.combineCacheId(t,e);if(null==n)return this.texture;var o=i._cachedTexturePool[n];return o?o.refCount++:(o={refCount:1,texture:this.createFlippedTexture(this.texture,t,e)},i._cachedTexturePool[n]=o),o.texture},i.prototype.tryRemoveTextureCache=function(t,e){var n=this.combineCacheId(t,e);if(!n)return!1;var o=i._cachedTexturePool[n];return!!o&&(o.refCount--,o.refCount<=0&&(o.texture.destroy(),delete i._cachedTexturePool[n]),!0)},i.prototype.createFlippedTexture=function(t,e,i){var n=t.clone(),o=n._uvs;if(this._flipX){var r=o.x0,s=o.x3;o.x0=o.x1,o.x1=r,o.x3=o.x2,o.x2=s}if(this._flipY){var a=o.y0,h=o.y1;o.y0=o.y3,o.y3=a,o.y1=o.y2,o.y2=h}return n.uvMatrix,n},i.prototype.updateUvs=function(){if(this.texture&&(this._flipX||this._flipY)){var t=this.getTextureFromCache(this._flipX,this._flipY);this.texture!=t&&(this.texture=t)}},i.prototype.destroy=function(t){this.tryRemoveTextureCache(this._flipX,this._flipY),e.prototype.destroy.call(this,t)},i._cachedTexturePool={},i}(PIXI.Sprite);e.Sprite=i}(t.pixi_extend||(t.pixi_extend={}))}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.defaultFont="Arial",e.modalLayerColor=3355443,e.modalLayerAlpha=.2,e.buttonSoundVolumeScale=1,e.defaultScrollStep=25,e.defaultScrollDecelerationRate=.967,e.defaultScrollBarDisplay=t.ScrollBarDisplayType.Visible,e.defaultScrollTouchEffect=!0,e.defaultScrollBounceEffect=!0,e.defaultComboBoxVisibleItemCount=10,e.touchScrollSensitivity=20,e.touchDragSensitivity=10,e.bringWindowToFrontOnClick=!0,e.frameTimeForAsyncUIConstruction=2,e}();t.UIConfig=e}(fgui||(fgui={})),function(t){var e;!function(t){t[t.PlayTransitionAction=0]="PlayTransitionAction",t[t.ChangePageAction=1]="ChangePageAction"}(e=t.eActionType||(t.eActionType={}));var i=function(){function i(){}return i.createAction=function(i){switch(i){case e.PlayTransitionAction:return new t.PlayTransitionAction;case e.ChangePageAction:return new t.ChangePageAction}return null},i.create=function(e){switch(e){case"play_transition":return new t.PlayTransitionAction;case"change_page":return new t.ChangePageAction}return null},i.prototype.execute=function(t,e,i){this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},i.prototype.enter=function(t){},i.prototype.leave=function(t){},i.prototype.setup=function(t){var e,i;for(e=t.readShort(),this.fromPage=[],i=0;i<e;i++)this.fromPage[i]=t.readS();for(e=t.readShort(),this.toPage=[],i=0;i<e;i++)this.toPage[i]=t.readS()},i.prototype.setupv1=function(t){var e;(e=t.attributes.fromPage)&&(this.fromPage=e.split(",")),(e=t.attributes.toPage)&&(this.toPage=e.split(","))},i}();t.Action=i}(fgui||(fgui={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.enter=function(e){if(this.controllerName){var i;if(this.objectId){var n=e.parent.getChildById(this.objectId);if(!(n instanceof t.GComponent))return;i=n}else i=e.parent;if(i){var o=i.getController(this.controllerName);o&&o!=e&&!o.changing&&("~1"==this.targetPage?e.selectedIndex<o.pageCount&&(o.selectedIndex=e.selectedIndex):"~2"==this.targetPage?o.selectedPage=e.selectedPage:o.selectedPageId=this.targetPage)}}},i.prototype.setup=function(t){e.prototype.setup.call(this,t),this.objectId=t.readS(),this.controllerName=t.readS(),this.targetPage=t.readS()},i.prototype.setupv1=function(t){e.prototype.setupv1.call(this,t),this.objectId=t.attributes.objectId,this.controllerName=t.attributes.controller,this.targetPage=t.attributes.targetPage},i}(t.Action);t.ChangePageAction=e}(fgui||(fgui={})),function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"controller",{set:function(t){this._controller=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._id?this._controller.getPageNameById(this._id):null},set:function(t){this._id=this._controller.getPageIdByName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._id?this._controller.getPageIndexById(this._id):-1},set:function(t){this._id=this._controller.getPageId(t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._id=null},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),t}();t.PageOption=e}(fgui||(fgui={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delay=0,e.stopOnExit=!1,e}return __extends(e,t),e.prototype.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this._currentTransition&&this._currentTransition.playing?e.changePlayTimes(this.playTimes):e.play(null,null,null,this.playTimes,this.delay),this._currentTransition=e)},e.prototype.leave=function(t){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null)},e.prototype.setup=function(e){t.prototype.setup.call(this,e),this.transitionName=e.readS(),this.playTimes=e.readInt(),this.delay=e.readFloat(),this.stopOnExit=e.readBool()},e.prototype.setupv1=function(e){var i;t.prototype.setupv1.call(this,e),this.transitionName=e.attributes.transition,(i=e.attributes.repeat)&&(this.playTimes=parseInt(i)),(i=e.attributes.delay)&&(this.delay=parseFloat(i)),this.stopOnExit="true"==e.attributes.stopOnExit},e}(t.Action);t.PlayTransitionAction=e}(fgui||(fgui={})),function(t){var e=function(){return function(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0}}();t.BMGlyph=e}(fgui||(fgui={})),function(t){var e=function(){return function(){this.size=0,this.glyphs={}}}();t.BitmapFont=e}(fgui||(fgui={})),function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._fillDir=0,i._flip=0,i._percent=0,i}return __extends(e,t),Object.defineProperty(e.prototype,"flip",{get:function(){return this._flip},set:function(t){t!=this._flip&&(this._flip=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillAmount",{get:function(){return"number"==typeof this._fillAmount?this._fillAmount:100},set:function(t){t!=this._fillAmount&&(this._fillAmount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillBegin",{get:function(){return this._fillBegin},set:function(t){t!=this._fillBegin&&(this._fillBegin=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){t!=this._fillMode&&(this._fillMode=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillDirection",{get:function(){return this._fillDir},set:function(t){t!=this._fillDir&&(this._fillDir=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),e.prototype.checkAndFixFillBegin=function(){switch(this._fillMode){case 1:0!=this._fillBegin&&1!=this._fillBegin&&(this._fillBegin=0);break;case 2:2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2);break;case 3:4!=this._fillBegin&&6!=this._fillBegin&&5!=this._fillBegin&&7!=this._fillBegin&&(this._fillBegin=4);break;case 4:case 5:0!=this._fillBegin&&1!=this._fillBegin&&2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2)}},Object.defineProperty(e.prototype,"amount",{get:function(){return this._percent},set:function(t){this._percent=t},enumerable:!0,configurable:!0}),e}(PIXI.Sprite);t.FillSprite=e}(fgui||(fgui={})),function(t){var e=function(){return function(){this.addDelay=0}}();t.Frame=e}(fgui||(fgui={})),function(t){var e=function(){function e(){this._requestToShow=!1,this._scaleX=1,this._scaleY=1}return Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,i){var n;this._canvas=i,this._delegateDiv||(n=document.createElement("div"),this._delegateDiv=n,n.id="__delegateDiv",e.appendChild(n),this.initDomPos(n),this._wrapper=document.createElement("div"),this.initDomPos(this._wrapper),this._wrapper.style.width="0px",this._wrapper.style.height="0px",this._wrapper.style.left="0px",this._wrapper.style.top="-100px",this.setTransform(this._wrapper,"0% 0% 0px"),n.appendChild(this._wrapper),t.GRoot.inst.on(t.InteractiveEvents.Click,this.canvasClickHandler,this),this.initInputElement(!0),this.initInputElement(!1))},e.prototype.isInputOn=function(){return null!=this._input},e.prototype.canvasClickHandler=function(t){this._requestToShow?(this._requestToShow=!1,this._input.onClickHandler(t),this.show()):this._curEle&&(this.clearInputElement(),this._curEle.blur(),this._curEle=null)},e.prototype.isInputShown=function(){return null!=this._input},e.prototype.isCurrentInput=function(t){return this._input==t},e.prototype.initDomPos=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},e.prototype.setTransform=function(t,e,i){var n=t.style;n.transformOrigin=n.webkitTransformOrigin=n.msTransformOrigin=n.mozTransformOrigin=n.oTransformOrigin=e,i&&i.length>0&&(n.transform=n.webkitTransform=n.msTransform=n.mozTransform=n.oTransform=i)},e.prototype.updateSize=function(t,e){if(this._canvas){this._scaleX=t,this._scaleY=e,this._delegateDiv.style.left=this._canvas.style.left,this._delegateDiv.style.top=this._canvas.style.top;var i=this._canvas.style;this.setTransform(this._delegateDiv,"0% 0% 0px",i.transform||i.webkitTransform||i.msTransform||i.mozTransform||i.oTransform)}},e.prototype.initInputElement=function(e){var i,n=this;e?((i=document.createElement("textarea")).style.resize="none",this._multiLine=i,i.id="stageTextAreaEle"):(i=document.createElement("input"),this._singleLine=i,i.type="text",i.id="stageInputEle"),this._wrapper.appendChild(i),i.setAttribute("tabindex","-1"),i.style.width="1px",i.style.height="12px",this.initDomPos(i);var o=i.style;o.outline="thin",o.background="none",o.overflow="hidden",o.wordBreak="break-all",o.opacity=0,i.oninput=function(e){t.Debug.log("input",i.value),n._input&&n._input.onInputHandler()}},e.prototype.show=function(){var e=this;t.GTimer.inst.callLater(function(){e._curEle.style.opacity="1",e._curEle.focus(),t.Debug.log("show....callLater")},this)},e.prototype.disconnect=function(t){null!=this._input&&this._input!=t||(this.clearInputElement(),this._curEle&&this._curEle.blur())},e.prototype.clearAttributes=function(t){if(this._curEle)for(var e in t)this._curEle.removeAttribute(e)},e.prototype.clearInputElement=function(){if(this._curEle){this._curEle.value="",this._curEle.onblur=null;var t=this._curEle.style;t.width="1px",t.height="12px",t.left="0px",t.top="0px",t.opacity="0";(this._singleLine==this._curEle?this._multiLine:this._singleLine).style.display="block",this._wrapper.style.left="0px",this._wrapper.style.top="-100px",this._wrapper.style.height="0px",this._wrapper.style.width="0px"}this._input&&(this._input.onDisconnect(),this._input=null,e.isTyping=!1)},e.prototype.requestInput=function(t){var i;return this.clearInputElement(),this._input=t,e.isTyping=!0,this._input.textField.multipleLine?(this._curEle=this._multiLine,i=this._singleLine):(this._curEle=this._singleLine,i=this._multiLine),i.style.display="none",this._curEle},e.isTyping=!1,e}();t.HTMLInput=e}(fgui||(fgui={})),function(t){t.isUIObject=function(t){return t&&"UIOwner"in t&&null!=t.UIOwner}}(fgui||(fgui={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._requestToShow=!1,i.inputElement=null,i.inputDiv=null,i._scaleX=0,i._scaleY=0,i.textValue="",i.colorValue=16777215,i._attrsCache={},i._textfield=t,i}return __extends(i,e),i.prototype._addToStage=function(){this.htmlInput=t.HTMLInput.inst},i.prototype.initElement=function(){var t=this._textfield.localToGlobal(0,0),e=t.x,i=t.y,n=this.htmlInput._scaleX,o=this.htmlInput._scaleY;this._textfield.multipleLine||(this.inputElement.style.top=-this._textfield.leading*o+"px"),this.inputDiv.style.top=(i+1)*o+"px",this.inputDiv.style.left=e*n+"px";for(var r=this._textfield,s=1,a=1,h=0;r.parent;)s*=r.scaleX,a*=r.scaleY,h+=r.rotation,r=r.parent;var l=this.inputDiv.style;l.transform=l.webkitTransform=l.msTransform=l.mozTransform=l.oTransform="rotate("+h+"deg)",this._scaleX=n*s,this._scaleY=o*a},Object.defineProperty(i.prototype,"textField",{get:function(){return this._textfield},enumerable:!0,configurable:!0}),i.prototype._show=function(){if(this.htmlInput.isCurrentInput(this))this.inputElement.onblur=null;else{for(var t in this.inputElement=this.htmlInput.requestInput(this),this._textfield.multipleLine||(this.inputElement.type=this._textfield.type),this._attrsCache)this.inputElement.setAttribute(t,this._attrsCache[t]);this.inputDiv=this.htmlInput._wrapper}this.htmlInput._requestToShow=!0,this._requestToShow=!0,this.initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),this.htmlInput.clearAttributes(this._attrsCache),window.scrollTo(0,0)},i.prototype._hide=function(){},Object.defineProperty(i.prototype,"text",{get:function(){return this.textValue||(this.textValue=""),this.textValue},set:function(t){this.textValue=t,this.inputElement&&(this.inputElement.value=this.textValue)},enumerable:!0,configurable:!0}),i.prototype.setColor=function(e){this.colorValue=e,this.inputElement&&this.setElementStyle("color",t.utils.StringUtil.convertToHtmlColor(this.colorValue))},i.prototype._onBlur=function(){},i.prototype.onInputHandler=function(){var e=this;window.setTimeout(function(){e.textValue=e.inputElement.value,t.Debug.log(e.textValue),e.emit("updateText")},0)},i.prototype.setAreaHeight=function(){var t=this._textfield;if(t.multipleLine){var e=t.textHeight;if(t.height<=t.fontSize)this.setElementStyle("height",t.fontSize*this._scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this._scaleY+"px");else if(t.height<e)this.setElementStyle("height",t.height*this._scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this._scaleY+"px");else{this.setElementStyle("height",(e+t.leading)*this._scaleY+"px");var i=(t.height-e)*this._scaleY,n=i*this.getVAlignFactor(t),o=i-n;this.setElementStyle("padding",n+"px 0px "+o+"px 0px"),this.setElementStyle("lineHeight",t.lineHeight*this._scaleY+"px")}}},i.prototype.getVAlignFactor=function(e){var i=0;switch(e.verticalAlign){case t.VertAlignType.Top:break;case t.VertAlignType.Middle:i=.5;break;case t.VertAlignType.Bottom:i=1}return i},i.prototype.onClickHandler=function(e){t.Debug.log("onClickHandler",e),this._requestToShow&&(this._requestToShow=!1,this.inputElement.value=this.text,null==this.inputElement.onblur&&(this.inputElement.onblur=t.utils.Binder.create(this.onBlurHandler,this)),this.resetInput(),this._textfield.maxLength>0?this.inputElement.setAttribute("maxlength",String(this._textfield.maxLength)):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus(),this.emit("__focusChanged","focus",this.inputElement))},i.prototype.onDisconnect=function(){this.inputElement=null,this.emit("__focusChanged","blur",this.inputElement)},i.prototype.setElementStyle=function(t,e){null!=e&&(this.inputElement&&(this.inputElement.style[t]=e))},i.prototype.setAttribute=function(t,e){null!=t&&null!=e&&(this._attrsCache[t]=e)},i.prototype.getAttribute=function(t){return this._attrsCache[t]},i.prototype._removeFromStage=function(){this.inputElement&&this.htmlInput.disconnect(this)},i.prototype.resetInput=function(){if(this.inputElement){var e=this._textfield;this.setElementStyle("fontFamily",e.font),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.align),this.setElementStyle("fontSize",e.fontSize*this._scaleY+"px"),this.setElementStyle("color",t.utils.StringUtil.convertToHtmlColor(e.color)),this.setElementStyle("width",e.width*this._scaleX+"px");var i="middle",n=0;switch(e.verticalAlign){case t.VertAlignType.Top:i="top";break;case t.VertAlignType.Middle:i="middle",n=.5;break;case t.VertAlignType.Bottom:i="bottom",n=1}if(this.setElementStyle("verticalAlign",i),e.multipleLine)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.lineHeight*this._scaleY+"px"),e.height<e.fontSize)this.setElementStyle("height",e.fontSize*this._scaleY+"px"),this.setElementStyle("padding","0px 0px "+.5*e.fontSize*this._scaleX+"px 0px");else{this.setElementStyle("height",e.fontSize*this._scaleY+"px");var o=(e.height-e.fontSize)*this._scaleY,r=o*n,s=o-r,a=.5*e.fontSize*this._scaleY;s<a&&(s=a),this.setElementStyle("padding",r+"px 0px "+s+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this._scaleX+"px "+e.height*this._scaleY+"px 0px)",this.inputDiv.style.height=e.height*this._scaleY+"px",this.inputDiv.style.width=e.width*this._scaleX+"px"}},i}(PIXI.utils.EventEmitter);t.InputElement=e}(fgui||(fgui={})),function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n.interval=0,n.repeatDelay=0,n._frameCount=0,n._currentFrame=0,n._status=0,n._frameElapsed=0,n.UIOwner=i,n.data=new t.MovieClipData,n._playing=!0,n.interactive=n.interactiveChildren=!1,n._settings=new t.DefaultMovieClipSettings,n.on("added",n.added,n),n.on("removed",n.removed,n),n}return __extends(i,e),Object.defineProperty(i.prototype,"frames",{get:function(){return this._frames},set:function(t){this._frames=t,null!=this._frames?this._frameCount=this._frames.length:this._frameCount=0,(-1==this._settings.endFrame||this._settings.endFrame>this._frameCount-1)&&(this._settings.endFrame=this._frameCount-1),(-1==this._settings.loopEndAt||this._settings.loopEndAt>this._frameCount-1)&&(this._settings.loopEndAt=this._frameCount-1),(this._currentFrame<0||this._currentFrame>this._frameCount-1)&&(this._currentFrame=this._frameCount-1),this._frameCount>0?this.setFrame(this._frames[this._currentFrame]):this.setFrame(null),this.data.rewind()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameCount",{get:function(){return this._frameCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){return this._currentFrame},set:function(t){this._currentFrame!=t&&(this._currentFrame=t,this.data.currentFrame=t,this.setFrame(this._currentFrame<this._frameCount?this._frames[this._currentFrame]:null))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},set:function(e){this._playing=e,e&&t.GObject.isDisplayObjectOnStage(this)?t.GTimer.inst.add(0,0,this.update,this):t.GTimer.inst.remove(this.update,this)},enumerable:!0,configurable:!0}),i.prototype.setPlaySettings=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(1==e.length&&"object"==typeof e[0])this._settings.mix(e[0]);else{var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],h=e[5],l={};t.utils.NumberUtil.isNumber(n)&&(l.startFrame=n),t.utils.NumberUtil.isNumber(o)&&(l.endFrame=o),t.utils.NumberUtil.isNumber(r)&&(l.repeatCount=r),t.utils.NumberUtil.isNumber(s)&&(l.loopEndAt=s),a&&"function"==typeof a&&(l.endCallback=a),h&&(l.endCallbackContext=h),this._settings.mix(l)}(-1==this._settings.endFrame||this._settings.endFrame>this._frameCount-1)&&(this._settings.endFrame=this._frameCount-1),-1==this._settings.loopEndAt&&(this._settings.loopEndAt=this._settings.endFrame),this._status=0,this.currentFrame=this._settings.startFrame},i.prototype.update=function(){this.UIOwner._inProgressBuilding||this._playing&&0!=this._frameCount&&3!=this._status&&(this.data.update(this),this._currentFrame!=this.data.currentFrame&&(1==this._status?(this._currentFrame=this._settings.startFrame,this.data.currentFrame=this._currentFrame,this._status=0):2==this._status?(this._currentFrame=this._settings.loopEndAt,this.data.currentFrame=this._currentFrame,this._status=3,null!=this._settings.endCallback&&t.GTimer.inst.callLater(this.__playEnd,this)):(this._currentFrame=this.data.currentFrame,this._currentFrame==this._settings.endFrame&&this._settings.repeatCount>0&&(this._settings.repeatCount--,0==this._settings.repeatCount?this._status=2:this._status=1)),this.setFrame(this._frames[this._currentFrame])))},i.prototype.__playEnd=function(){if(null!=this._settings.endCallback){var t=this._settings.endCallback,e=this._settings.endCallbackContext;this._settings.endCallback=this._settings.endCallbackContext=null,this._settings.endCallbackContext=null,t&&t.call(e,this)}},i.prototype.setFrame=function(t){this.texture=null==t?null:t.texture},i.prototype.added=function(e){this._playing&&t.GTimer.inst.add(0,0,this.update,this)},i.prototype.removed=function(e){this._playing&&t.GTimer.inst.remove(this.update,this)},i.prototype.destroy=function(){t.GTimer.inst.remove(this.update,this),this.off("added",this.added,this),this.off("removed",this.removed,this),e.prototype.destroy.call(this)},i}(PIXI.Sprite);t.MovieClip=e}(fgui||(fgui={})),function(t){var e=function(){function t(){this.repeatedCount=0,this._curFrame=0,this._lastTime=0,this._curFrameDelay=0,this._lastTime=Date.now()}return t.prototype.update=function(t){var e=Date.now(),i=e-this._lastTime;this._lastTime=e;var n=this._curFrame;n>=t.frameCount&&(n=t.frameCount-1),this.reachesEnd=!1,this._curFrameDelay+=i;var o=t.interval+t.frames[n].addDelay+(0==n&&this.repeatedCount>0?t.repeatDelay:0);this._curFrameDelay<o||(this._curFrameDelay-=o,this._curFrameDelay>t.interval&&(this._curFrameDelay=t.interval),t.swing?this.reversed?(this._curFrame--,this._curFrame<0&&(this._curFrame=Math.min(1,t.frameCount-1),this.repeatedCount++,this.reversed=!this.reversed)):(this._curFrame++,this._curFrame>t.frameCount-1&&(this._curFrame=Math.max(0,t.frameCount-2),this.repeatedCount++,this.reachesEnd=!0,this.reversed=!this.reversed)):(this._curFrame++,this._curFrame>t.frameCount-1&&(this._curFrame=0,this.repeatedCount++,this.reachesEnd=!0)))},Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._curFrame},set:function(t){this._curFrame=t,this._curFrameDelay=0},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){this._curFrame=0,this._curFrameDelay=0,this.reversed=!1,this.reachesEnd=!1},t.prototype.reset=function(){this._curFrame=0,this._curFrameDelay=0,this.repeatedCount=0,this.reachesEnd=!1,this.reversed=!1},t.prototype.copy=function(t){this._curFrame=t._curFrame,this._curFrameDelay=t._curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachesEnd=t.reachesEnd,this.reversed=t.reversed},t}();t.MovieClipData=e}(fgui||(fgui={})),function(t){var e=function(){function t(){this.startFrame=0,this.endFrame=-1,this.repeatCount=0,this.loopEndAt=-1,this.endCallback=null,this.endCallbackContext=null}return t.prototype.mix=function(t){for(var e in t)"mix"!=e&&(this[e]=t[e]);return this},t}();t.DefaultMovieClipSettings=e}(fgui||(fgui={})),function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=!0,i.interactiveChildren=!0,i}return __extends(e,t),Object.defineProperty(e.prototype,"scrollRect",{get:function(){return this._scrollRect},set:function(t){this._scrollRect=t,null!=t?(this._rectMask||(this._rectMask=new PIXI.Graphics,this._rectMask.isMask=!0,this.addChild(this._rectMask),this.mask=this._rectMask),this._rectMask.clear(),t.width>0&&t.height>0&&(this._rectMask.beginFill(0,1),this._rectMask.drawRect(this._scrollRect.x,this._scrollRect.y,this._scrollRect.width,this._scrollRect.height),this._rectMask.endFill())):this.mask=null},enumerable:!0,configurable:!0}),e}(PIXI.Container);t.UIContainer=e}(fgui||(fgui={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.UIOwner=t,i.interactive=i.interactiveChildren=!1,i}return __extends(i,e),i.prototype.initDisp=function(e){this._disp||(t.Debug.log("initDisp"),e?(e.load(),e.scaleByTile?(this._disp=new PIXI.TilingSprite(e.texture),t.Debug.log("initDisp scaleByTile....")):e.scale9Grid?this._disp=new t.pixi_extend.Sprite(e.id,e.texture):(t.Debug.log("initDisp normal...."),this._disp=new t.pixi_extend.Sprite(e.id,e.texture))):(this._disp=new t.pixi_extend.Sprite,t.Debug.log("initDisp","item is null")),this.addChild(this._disp))},Object.defineProperty(i.prototype,"tint",{get:function(){return this._disp.tint},set:function(t){this._disp.tint=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._disp.height},set:function(t){this._disp.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._disp.width},set:function(t){this._disp.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._disp.texture},set:function(e){this._disp.texture=e,t.Debug.log("uiimage texture",e.width,e.height)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this._disp instanceof PIXI.NineSlicePlane?new PIXI.Rectangle(this._disp.leftWidth,this._disp.topHeight,this._disp.rightWidth,this._disp.bottomHeight):null},set:function(t){this._disp instanceof PIXI.NineSlicePlane&&(t.left!=this._disp.leftWidth&&(this._disp.leftWidth=t.left),t.top!=this._disp.topHeight&&(this._disp.topHeight=t.top),t.right!=this._disp.rightWidth&&(this._disp.rightWidth=t.right),t.bottom!=this._disp.bottomHeight&&(this._disp.bottomHeight=t.bottom))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tiledSlices",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flipX",{get:function(){return(this._disp instanceof t.pixi_extend.NineSlicePlane||this._disp instanceof t.pixi_extend.Sprite)&&this._disp.flipX},set:function(e){t.GRoot.inst.applicationContext.renderer.type==PIXI.RENDERER_TYPE.WEBGL&&(this._disp instanceof t.pixi_extend.NineSlicePlane||this._disp instanceof t.pixi_extend.Sprite)&&(this._disp.flipX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return(this._disp instanceof t.pixi_extend.NineSlicePlane||this._disp instanceof t.pixi_extend.Sprite)&&this._disp.flipY},set:function(e){t.GRoot.inst.applicationContext.renderer.type==PIXI.RENDERER_TYPE.WEBGL&&(this._disp instanceof t.pixi_extend.NineSlicePlane||this._disp instanceof t.pixi_extend.Sprite)&&(this._disp.flipY=e)},enumerable:!0,configurable:!0}),i.prototype.destroy=function(t){this._disp&&(this._disp.destroy(t),this._disp=null),e.prototype.destroy.call(this,t)},i}(PIXI.Container);t.UIImage=e}(fgui||(fgui={})),function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=!1,i.interactiveChildren=!1,i}return __extends(e,t),e}(PIXI.Graphics);t.UISprite=e}(fgui||(fgui={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.retEvent={},e.nullLowestDeltaTimeout=NaN,e.$pressedKeys={},e.$releasedKeys={},e.$downKeys=[],window.addEventListener("resize",function(t){return e.notifyResizeEvents(t)},!1),window.addEventListener("keydown",function(t){return e.onWindowKeyDown(t)},!1),window.addEventListener("keyup",function(t){return e.onWindowKeyUp(t)},!1);for(var i=("onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]),n=i.length;n;)window.addEventListener(i[--n],function(t){return e.onMouseWheel(t)},!1);return e}return __extends(e,t),e.prototype.notifyResizeEvents=function(t){this.emit("resize")},e.prototype.onMouseWheel=function(t){var e,i=this,n=t||window.event,o=0,r=0,s=0;if("detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(r=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(r=-1*s,s=0),o=0===s?r:s,"deltaY"in n&&(o=s=-1*n.deltaY),"deltaX"in n&&(r=n.deltaX,0===s&&(o=-1*r)),0!==s||0!==r){if(1===n.deltaMode){o*=16,s*=16,r*=16}else if(2===n.deltaMode){o*=16,s*=16,r*=16}e=Math.max(Math.abs(s),Math.abs(r)),(!this.lowestDelta||e<this.lowestDelta)&&(this.lowestDelta=e,"mousewheel"===n.type&&e%120==0&&(this.lowestDelta/=40)),"mousewheel"===n.type&&e%120==0&&(o/=40,r/=40,s/=40),o=Math[o>=1?"floor":"ceil"](o/this.lowestDelta),r=Math[r>=1?"floor":"ceil"](r/this.lowestDelta),s=Math[s>=1?"floor":"ceil"](s/this.lowestDelta),this.retEvent.delta=o,this.retEvent.deltaX=r,this.retEvent.deltaY=s,this.retEvent.deltaFactor=this.lowestDelta,this.retEvent.deltaMode=0,this.nullLowestDeltaTimeout&&clearTimeout(this.nullLowestDeltaTimeout),this.nullLowestDeltaTimeout=setTimeout(function(){return i.nullLowestDelta()},200),this.emit("__mouseWheel",this.retEvent)}},e.prototype.nullLowestDelta=function(){this.lowestDelta=null},e.prototype.isKeyDown=function(t){return this.$downKeys.indexOf(t)>=0},e.prototype.isKeyPressed=function(t){return!!this.$pressedKeys[t]},e.prototype.isKeyReleased=function(t){return!!this.$releasedKeys[t]},e.prototype.onWindowKeyDown=function(t){var e=t.which||t.keyCode;this.isKeyDown(e)||(this.$downKeys.push(e),this.$pressedKeys[e]=!0,this.emit("keyPressed",e))},e.prototype.onWindowKeyUp=function(t){var e=t.which||t.keyCode;if(this.isKeyDown(e)){this.$pressedKeys[e]=!1,this.$releasedKeys[e]=!0;var i=this.$downKeys.indexOf(e);i>=0&&this.$downKeys.splice(i,1),this.emit("keyReleased",e)}},e.inst=new e,e}(PIXI.utils.EventEmitter);t.DOMEventManager=e}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){var e=function(){return function(){this.scaleMode="showAll",this.orientation="auto",this.resolution=1,this.designWidth=800,this.designHeight=600,this.alignV=4,this.alignH=1,this.fallbackWidth=0,this.fallbackHeight=0}}();t.DefaultUIStageOptions=e;var i=function(){function t(){}return t.prototype.getRect=function(t,e,i){var n=t.parentElement;if(!n)throw new Error("Your view of PIXI are still in memory but not appended to DOM yet? it's necessary that there is a parent element to wrap your view up.");var o=n.getBoundingClientRect(),r={x:0,y:0,width:0,height:0};return!o||o.width<=0||o.height<=0?(console.warn("It seems that you did not set a explicit size for the parent element of your view, now fall back to window size instead."),r.width=window.innerWidth,r.height=window.innerHeight,r.x=0,r.y=0):(r.x=o.left,r.y=o.top,r.width=o.width,r.height=o.height),(r.width<=0||r.height<=0)&&(console.warn("fetch container size to initialize PIXI in all ways have failed, now use default size (fallbackWidth / fallbackHeight) specified in the options instead."),r.width=e,r.height=i),r},t}(),n=function(n){function r(r,s){var a,h=n.call(this)||this;if(h._width=0,h._height=0,h._scaleX=1,h._scaleY=1,h._canvasMatrix=new PIXI.Matrix,h.offsetX=0,h.offsetY=0,h._sizeCalcer=new i,o.push(h),h._appContext=r,h._appStage=r.stage,h._appStage.interactive=!0,s instanceof e)a=s;else if(a=new e,null!=s)for(var l in s)a[l]=s[l];if(!a.designWidth||!a.designHeight)throw new Error("Invalid designWidth / designHeight in the parameter 'stageOptions'.");h._options=a,h._appContext.view.style.position="absolute";var u,c=h._appContext.view.parentElement,p=c.style;return"DIV"!=c.tagName&&(c=document.createElement("DIV"),p.position="relative",p.left=p.top="0px",p.width=p.height="100%",p.overflow="hidden",h._appContext.view.parentElement.appendChild(c),c.appendChild(h._appContext.view)),""!=(u=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c).position:p.position)&&"static"!=u||(u="relative",c.style.position=u),t.HTMLInput.inst.initialize(c,h._appContext.view),h.updateScreenSize(),h}return __extends(r,n),Object.defineProperty(r.prototype,"orientation",{get:function(){return this._options.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageWidth",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageHeight",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"applicationContext",{get:function(){return this._appContext},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nativeStage",{get:function(){return this._appStage},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._options.resolution},set:function(t){this._options.resolution=t,this.updateScreenSize()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scaleX",{get:function(){return this._scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scaleY",{get:function(){return this._scaleY},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"designWidth",{get:function(){return this._options.designWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"designHeight",{get:function(){return this._options.designHeight},enumerable:!0,configurable:!0}),r.prototype.setDesignSize=function(t,e){var i=this._options;i.designWidth=t,i.designHeight=e,this.updateScreenSize()},r.prototype.calculateStageSize=function(t,e,i,n,o){var r=e,s=i,a=n,h=o,l=e/a||0,u=i/h||0;switch(t){case"exactFit":break;case"fixedHeight":a=Math.round(e/u);break;case"fixedWidth":h=Math.round(i/l);break;case"noBorder":l>u?s=Math.round(h*l):r=Math.round(a*u);break;case"showAll":l>u?r=Math.round(a*u):s=Math.round(h*l);break;case"fixedAuto":r/s<a/h?(u=l,h=Math.round(i/l)):(l=u,a=Math.round(e/u));break;default:a=e,h=i}return{stageWidth:a,stageHeight:h,displayWidth:r,displayHeight:s}},r.prototype.updateScreenSize=function(){if(!t.HTMLInput.isTyping){var e=this._appContext.view,i=e.style,n=this._sizeCalcer.getRect(e,this._options.fallbackWidth,this._options.fallbackHeight),o=!1,r=this._options.orientation;"auto"!=r&&(o="portrait"!=r&&n.height>n.width||"portrait"==r&&n.width>n.height);var s=o?n.height:n.width,a=o?n.width:n.height,h=this.calculateStageSize(this._options.scaleMode,s,a,this._options.designWidth,this._options.designHeight),l=h.stageWidth,u=h.stageHeight,c=h.displayWidth,p=h.displayHeight;e.width!==l&&(e.width=l),e.height!==u&&(e.height=u),i.transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.width=c+"px",i.height=p+"px";var _,d,f=this._canvasMatrix.identity(),g=o?p:c,y=o?c:p;_=0==this._options.alignH?0:2==this._options.alignH?n.width-g:.5*(n.width-g),d=3==this._options.alignV?0:5==this._options.alignV?n.height-y:.5*(n.height-y);var m=0;o?"landscape"==this._options.orientation?(f.rotate(Math.PI/2),f.translate(a-_,d),m=90):(f.rotate(-Math.PI/2),f.translate(_,s-d),m=-90):f.translate(_,d),o?(f.tx+=this.offsetY,f.ty+=this.offsetX):(f.tx+=this.offsetX,f.ty+=this.offsetY),f.a=this.formatData(f.a),f.d=this.formatData(f.d),f.tx=this.formatData(f.tx),f.ty=this.formatData(f.ty),i.transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.transform=i.webkitTransform=i.msTransform=i.mozTransform=i.oTransform="matrix("+f.a+","+f.b+","+f.c+","+f.d+","+f.tx+","+f.ty+")",this._width=l,this._height=u,this._scaleX=l/c,this._scaleY=u/p;var b=this._appContext.renderer.plugins.interaction;b.stageRotation=m,b.stageScaleX=this._scaleX,b.stageScaleY=this._scaleY,this._appContext.renderer.resize(l,u),t.HTMLInput.inst.updateSize(c/l,p/u),this.emit("__sizeChanged",this)}},r.prototype.formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},r.prototype.dispose=function(){for(var t=o.length;t-- >=0;)o[t]===this&&o.splice(t,1)},r}(PIXI.utils.EventEmitter);t.UIStage=n;var o=[],r=NaN;function s(){o.forEach(function(t){t.updateScreenSize()})}t.utils.DOMEventManager.inst.on("resize",function(){clearTimeout(r),r=window.setTimeout(s,300)})}(fgui||(fgui={})),function(t){PIXI.TextMetrics.canBreakChars=function(t,e,i,n,o){return 2!=function(t,e){var i=t,n="number"==typeof e&&!isNaN(e)&&e>0;if(i>=55296&&i<=56319){if(n){var o=1024*(i-55296)+(e-56320)+65536;if(o>=118784&&o<=128895)return 2}}else{if(i>=8448&&i<=10239||i>=11013&&i<=11015||i>=10548&&i<=10549||i>=12951&&i<=12953||169===i||174===i||12349===i||12336===i||11093===i||11036===i||11035===i||11088===i||8986===i)return 1;if(n&&(8419===e||65039===e||55356===e))return 2}return 0}(t.charCodeAt(0),e&&e.charCodeAt(0))};var e=function(e){function i(t){var i=e.call(this,null)||this;return i._minHeightID=-1,i.UIOwner=t,i.interactive=i.interactiveChildren=!1,i.texture.noFrame=!1,i.width=i.texture.frame.width,i.height=i.texture.frame.height,i._minHeight=-1,i}return __extends(i,e),i.prototype.init=function(){this.updateFrame(),this.texture.on("update",this.updateFrame,this)},Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},enumerable:!0,configurable:!0}),i.prototype.updateMinHeight=function(){(this.style.styleID!=this._minHeightID||this._minHeight<=0)&&(this._minHeight=PIXI.TextMetrics.measureText("",this.style,!1).lineHeight,this._minHeightID=this.style.styleID)},i.prototype.updateFrame=function(){t.Debug.log("GTextFiled updateFrame ",this.x,this.y,this.texture.width,this.texture.height),t.GTimer.inst.callLater(this.internalUpdateFrame,this)},i.prototype.internalUpdateFrame=function(){if(this.texture){var t=this.texture.frame;this.height=Math.max(this.height,this._minHeight);var e=t.x+this.width,i=t.y+this.height;e>this.texture.baseTexture.width&&(e=this.texture.baseTexture.width-t.x),i>this.texture.baseTexture.height&&(i=this.texture.baseTexture.height-t.y),t.width=e/this.resolution,t.height=i/this.resolution,this.texture.trim.width=t.width,this.texture.trim.height=t.height;var n=this.style.trim?0:this.style.padding;this.texture.trim.x=-n,this.texture.trim.y=-n,this.texture.frame=t}},i.prototype._onTextureUpdate=function(){},Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.calculateBounds(),this.texture.orig.height},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.calculateBounds(),this.texture.orig.width},set:function(t){t!=this.style.wordWrapWidth&&(this.style.wordWrapWidth=t)},enumerable:!0,configurable:!0}),i}(PIXI.Text);t.UITextField=e}(fgui||(fgui={})),function(t){var e=function(){function e(t){this._owner=t}return e.create=function(i,n){return e.Classes||(e.Classes=[t.GearDisplay,t.GearXY,t.GearSize,t.GearLook,t.GearColor,t.GearAnimation,t.GearText,t.GearIcon,t.GearDisplay2,t.GearFontSize]),new e.Classes[n](i)},e.prototype.dispose=function(){null!=this._tweenConfig&&null!=this._tweenConfig._tweener&&(this._tweenConfig._tweener.kill(),this._tweenConfig._tweener=null)},Object.defineProperty(e.prototype,"controller",{get:function(){return this._controller},set:function(t){t!=this._controller&&(this._controller=t,this._controller&&this.init())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tweenConfig",{get:function(){return null==this._tweenConfig&&(this._tweenConfig=new i),this._tweenConfig},enumerable:!0,configurable:!0}),e.prototype.setup=function(e){var n,o;this._controller=this._owner.parent.getControllerAt(e.readShort()),this.init();var r=e.readShort();if(this instanceof t.GearDisplay)this.pages=e.readSArray(r);else if(this instanceof t.GearDisplay2)this.pages=e.readSArray(r);else{for(n=0;n<r;n++)null!=(o=e.readS())&&this.addStatus(o,e);e.readBool()&&this.addStatus(null,e)}if(e.readBool()&&(this._tweenConfig=new i,this._tweenConfig.easeType=e.readByte(),this._tweenConfig.duration=e.readFloat(),this._tweenConfig.delay=e.readFloat()),e.version>=2)if(this instanceof t.GearXY){if(e.readBool()){for(this.positionsInPercent=!0,n=0;n<r;n++)null!=(o=e.readS())&&this.addExtStatus(o,e);e.readBool()&&this.addExtStatus(null,e)}}else this instanceof t.GearDisplay2&&(this.condition=e.readByte())},e.prototype.updateFromRelations=function(t,e){},e.prototype.addStatus=function(t,e){},e.prototype.init=function(){},e.prototype.apply=function(){},e.prototype.updateState=function(){},e.disableAllTweenEffect=!1,e}();t.GearBase=e;var i=function(){return function(){this.tween=!0,this.easeType=t.EaseType.QuadOut,this.duration=.3,this.delay=0}}();t.GearTweenConfig=i}(fgui||(fgui={})),function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this._default=new i(this._owner.playing,this._owner.frame),this._storage={}},e.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.playing=e.readBool(),n.frame=e.readInt()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1},e.prototype.updateState=function(){if(null!=this._controller&&!this._owner._gearLocked&&!this._owner._inProgressBuilding){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.frame=this._owner.frame,t.playing=this._owner.playing}},e}(t.GearBase);t.GearAnimation=e;var i=function(){return function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}}()}(fgui||(fgui={})),function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this._default=new i(this._owner.getProp(t.ObjectPropID.Color),this._owner.getProp(t.ObjectPropID.OutlineColor)),this._storage={}},n.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.color=e.readColor(),n.strokeColor=e.readColor()},n.prototype.apply=function(){this._owner._gearLocked=!0;var e=this._storage[this._controller.selectedPageId];e||(e=this._default),this._owner.setProp(t.ObjectPropID.Color,e.color),isNaN(e.strokeColor)||this._owner.setProp(t.ObjectPropID.OutlineColor,e.strokeColor),this._owner._gearLocked=!1},n.prototype.updateState=function(){var e=this._storage[this._controller.selectedPageId];e||(this._storage[this._controller.selectedPageId]=e=new i),e.color=this._owner.getProp(t.ObjectPropID.Color),e.strokeColor=this._owner.getProp(t.ObjectPropID.OutlineColor)},n}(t.GearBase);t.GearColor=e;var i=function(){return function(t,e){void 0===t&&(t=NaN),void 0===e&&(e=NaN),this.color=t,this.strokeColor=e}}()}(fgui||(fgui={})),function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._displayLockToken=1,i._visible=0,i}return __extends(e,t),e.prototype.init=function(){this.pages=null},e.prototype.apply=function(){this._displayLockToken++,0==this._displayLockToken&&(this._displayLockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0},e.prototype.addLock=function(){return this._visible++,this._displayLockToken},e.prototype.releaseLock=function(t){t==this._displayLockToken&&this._visible--},Object.defineProperty(e.prototype,"connected",{get:function(){return null==this.controller||this._visible>0},enumerable:!0,configurable:!0}),e}(t.GearBase);t.GearDisplay=e}(fgui||(fgui={})),function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=0,i}return __extends(e,t),e.prototype.init=function(){this.pages=null},e.prototype.apply=function(){null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0},e.prototype.evaluate=function(t){var e=null==this._controller||this._visible>0;return e=0==this.condition?e&&t:e||t},e}(t.GearBase);t.GearDisplay2=e}(fgui||(fgui={})),function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._default=0,i}return __extends(i,e),i.prototype.init=function(){this._default=this._owner.getProp(t.ObjectPropID.FontSize),this._storage={}},i.prototype.addStatus=function(t,e){null==t?this._default=e.readInt():this._storage[t]=e.readInt()},i.prototype.apply=function(){this._owner._gearLocked=!0;var e=this._storage[this._controller.selectedPageId];null!=e?this._owner.setProp(t.ObjectPropID.FontSize,e):this._owner.setProp(t.ObjectPropID.FontSize,this._default),this._owner._gearLocked=!1},i.prototype.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text},i}(t.GearBase);t.GearFontSize=e}(fgui||(fgui={})),function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this._default=this._owner.icon,this._storage={}},e.prototype.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];this._owner.icon=null!=t?t:this._default,this._owner._gearLocked=!1},e.prototype.updateState=function(){null==this._controller||this._owner._gearLocked||this._owner._inProgressBuilding||(this._storage[this._controller.selectedPageId]=this._owner.icon)},e}(t.GearBase);t.GearIcon=e}(fgui||(fgui={})),function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this._default=new i(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable),this._storage={}},n.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.alpha=e.readFloat(),n.rotation=e.readFloat(),n.grayed=e.readBool(),n.touchable=e.readBool()},n.prototype.apply=function(){var e=this._storage[this._controller.selectedPageId];if(e||(e=this._default),this._tweenConfig&&this._tweenConfig.tween&&!t.UIPackage._constructing&&!t.GearBase.disableAllTweenEffect){if(this._owner._gearLocked=!0,this._owner.grayed=e.grayed,this._owner.touchable=e.touchable,this._owner._gearLocked=!1,null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==e.alpha&&this._tweenConfig._tweener.endValue.y==e.rotation)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var i=e.alpha!=this._owner.alpha,n=e.rotation!=this._owner.rotation;(i||n)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=t.GTween.to2(this._owner.alpha,this._owner.rotation,e.alpha,e.rotation,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((i?1:0)+(n?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.grayed=e.grayed,this._owner.touchable=e.touchable,this._owner.alpha=e.alpha,this._owner.rotation=e.rotation,this._owner._gearLocked=!1},n.prototype.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&(this._owner.alpha=t.value.x),0!=(2&e)&&(this._owner.rotation=t.value.y),this._owner._gearLocked=!1},n.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null,this._owner.emit("__gearStop",this)},n.prototype.updateState=function(){if(null!=this._controller&&!this._owner._gearLocked&&!this._owner._inProgressBuilding){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed}},n}(t.GearBase);t.GearLook=e;var i=function(){return function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!0),this.alpha=t,this.rotation=e,this.grayed=i,this.touchable=n}}()}(fgui||(fgui={})),function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this._default=new i(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={}},n.prototype.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.width=e.readInt(),n.height=e.readInt(),n.scaleX=e.readFloat(),n.scaleY=e.readFloat()},n.prototype.apply=function(){var e=this._storage[this._controller.selectedPageId];if(e||(e=this._default),this._tweenConfig&&this._tweenConfig.tween&&!t.UIPackage._constructing&&!t.GearBase.disableAllTweenEffect){if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==e.width&&this._tweenConfig._tweener.endValue.y==e.height&&this._tweenConfig._tweener.endValue.z==e.scaleX&&this._tweenConfig._tweener.endValue.w==e.scaleY)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var i=e.width!=this._owner.width||e.height!=this._owner.height,n=e.scaleX!=this._owner.scaleX||e.scaleY!=this._owner.scaleY;(i||n)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=t.GTween.to4(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY,e.width,e.height,e.scaleX,e.scaleY,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((i?1:0)+(n?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.setSize(e.width,e.height,this._owner.gearXY.controller==this._controller),this._owner.setScale(e.scaleX,e.scaleY),this._owner._gearLocked=!1},n.prototype.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&this._owner.setSize(t.value.x,t.value.y,this._owner.checkGearController(1,this._controller)),0!=(2&e)&&this._owner.setScale(t.value.z,t.value.w),this._owner._gearLocked=!1},n.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null,this._owner.emit("__gearStop",this)},n.prototype.updateState=function(){if(null!=this._controller&&!this._owner._gearLocked&&!this._owner._inProgressBuilding){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY}},n.prototype.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.width+=t,n.height+=e}this._default.width+=t,this._default.height+=e,this.updateState()}},n}(t.GearBase);t.GearSize=e;var i=function(){return function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}}()}(fgui||(fgui={})),function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this._default=this._owner.text,this._storage={}},e.prototype.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},e.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];this._owner.text=null!=t?t:this._default,this._owner._gearLocked=!1},e.prototype.updateState=function(){null==this._controller||this._owner._gearLocked||this._owner._inProgressBuilding||(this._storage[this._controller.selectedPageId]=this._owner.text)},e}(t.GearBase);t.GearText=e}(fgui||(fgui={})),function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.init=function(){this._default=new PIXI.Point(this._owner.x,this._owner.y),this._storage={}},i.prototype.addStatus=function(e,i){var n;t.Debug.log("addStatus........."),null==e?n=this._default:(n=new PIXI.Point,this._storage[e]=n),n.x=i.readInt(),n.y=i.readInt()},i.prototype.addExtStatus=function(e,i){var n;t.Debug.log("addExtStatus........."),(n=null==e?this._default:this._storage[e]).px=i.readFloat(),n.py=i.readFloat()},i.prototype.apply=function(){var e,i,n=this._storage[this._controller.selectedPageId];if(n||(n=this._default),this.positionsInPercent&&this._owner.parent?(e=n.px*this._owner.parent.width,i=n.py*this._owner.parent.height):(e=n.x,i=n.y),null==this._tweenConfig||!this._tweenConfig.tween||t.UIPackage._constructing||t.GearBase.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setXY(e,i),this._owner._gearLocked=!1;else{if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==e&&this._tweenConfig._tweener.endValue.y==i)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var o=this._owner.x,r=this._owner.y;o==e&&r==i||(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=t.GTween.to2(o,r,e,i,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}},i.prototype.__tweenUpdate=function(e){t.Debug.log("__tweenUpdate XY",e.value.x,e.value.y),this._owner._gearLocked=!0,this._owner.setXY(e.value.x,e.value.y),this._owner._gearLocked=!1},i.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},i.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t={},this._storage[this._controller.selectedPageId]=t),t.x=this._owner.x,t.y=this._owner.y,t.px=this._owner.x/this._owner.parent.width,t.py=this._owner.y/this._owner.parent.height},i.prototype.updateFromRelations=function(e,i){if(t.Debug.log("updateFromRelations"),null!=this._controller&&null!=this._storage&&!this.positionsInPercent){for(var n in this._storage){var o=this._storage[n];o.x+=e,o.y+=i}this._default.x+=e,this._default.y+=i,this.updateState()}},i}(t.GearBase);t.GearXY=e}(fgui||(fgui={})),function(t){t.isAnimationGear=function(t){return t&&"playing"in t&&"frame"in t}}(fgui||(fgui={})),function(t){t.isColorGear=function(t){return t&&"color"in t}}(fgui||(fgui={})),function(t){var e=function(){return function(t,e){this.packageItem=t,this.type=e}}();t.DisplayListItem=e}(fgui||(fgui={})),function(t){var e=function(){function e(){this.width=0,this.height=0,this.tileGridIndice=0,this.tiledSlices=0,this.interval=0,this.repeatDelay=0}return e.prototype.load=function(){return this.owner.getItemAsset(this)},e.prototype.getBranch=function(){if(this.branches&&-1!=this.owner._branchIndex){var t=this.branches[this.owner._branchIndex];if(t)return this.owner.getItemById(t)}return this},e.prototype.getHighResolution=function(){if(this.highResolution&&t.GRoot.contentScaleLevel>0){var e=this.highResolution[t.GRoot.contentScaleLevel-1];if(e)return this.owner.getItemById(e)}return this},e.prototype.toString=function(){return this.name},e}();t.PackageItem=e}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.setExtension=function(t,e){this.setPackageItemExtension(t,e)},e.setPackageItemExtension=function(t,i){e.packageItemExtensions[t.substring(5)]=i},e.setLoaderExtension=function(t){e.loaderExtension=t},e.resolvePackageItemExtension=function(t){t.extensionType=e.extensions["ui://"+t.owner.id+t.id],t.extensionType||(t.extensionType=e.extensions["ui://"+t.owner.name+"/"+t.name])},e.newObject=function(i,n){var o;return void 0===n&&(n=null),t.Debug.log("newObject",i.file),(o=i.type==t.PackageItemType.Component?n?new n:i.extensionType?new i.extensionType:e.newObject2(i.objectType):e.newObject2(i.objectType))&&(o.packageItem=i),o},e.newObject2=function(i){switch(t.Debug.log("newObject2",i),i){case t.ObjectType.Image:return new t.GImage;case t.ObjectType.MovieClip:return new t.GMovieClip;case t.ObjectType.Component:return new t.GComponent;case t.ObjectType.Text:return new t.GTextField;case t.ObjectType.RichText:return new t.GRichTextField;case t.ObjectType.InputText:return new t.GTextInput;case t.ObjectType.Group:return new t.GGroup;case t.ObjectType.List:return new t.GList;case t.ObjectType.Graph:return new t.GGraph;case t.ObjectType.Loader:return null!=e.loaderType?new e.loaderType:new t.GLoader;case t.ObjectType.Button:return new t.GButton;case t.ObjectType.Label:return new t.GLabel;case t.ObjectType.ProgressBar:return new t.GProgressBar;case t.ObjectType.Slider:return new t.GSlider;case t.ObjectType.ScrollBar:return new t.GScrollBar;case t.ObjectType.ComboBox:return new t.GComboBox;case t.ObjectType.Tree:return new t.GTree;default:return null}return null},e.newObjectDirectly=function(i){switch(i){case"image":return new t.GImage;case"movieclip":return new t.GMovieClip;case"component":return new t.GComponent;case"text":return new t.GTextField;case"list":return new t.GList;case"richtext":return new t.GRichTextField;case"inputtext":return new t.GTextInput;case"group":return new t.GGroup;case"graph":return new t.GGraph;case"loader":return null!=e.loaderExtension?new e.loaderExtension:new t.GLoader}return null},e.newObjectv1=function(i){switch(i.type){case t.PackageItemType.Image:return new t.GImage;case t.PackageItemType.MovieClip:return new t.GMovieClip;case t.PackageItemType.Component:var n=e.packageItemExtensions[i.owner.id+i.id];if(n)return new n;var o=i.owner.getItemAsset(i).attributes.extention;if(null==o)return new t.GComponent;switch(o){case"Button":return new t.GButton;case"ProgressBar":return new t.GProgressBar;case"Label":return new t.GLabel;case"Slider":return new t.GSlider;case"ScrollBar":return new t.GScrollBar;case"ComboBox":return new t.GComboBox;default:return new t.GComponent}}return null},e.packageItemExtensions={},e.extensions=e.packageItemExtensions,e}();t.UIObjectFactory=e}(fgui||(fgui={})),function(t){var e=function(){return function(t,e,i,n,o){this.atlasName=t,this.frame=e,this.orig=i,this.trim=n,this.rotate=o}}(),i=function(){function i(){this._assetGroupName=t.utils.AssetManager.DEFAULT_GROUP,this._items=[],this._itemsById={},this._itemsByName={},this._atlasConfigs={},this._dependencies=Array(),this._branches=Array(),this._branchIndex=-1}return Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customId",{get:function(){return this._customId},set:function(t){null!=this._customId&&delete i._instById[this._customId],this._customId=t,null!=this._customId&&(i._instById[this._customId]=this)},enumerable:!0,configurable:!0}),i.getById=function(t){return i._instById[t]},i.getByName=function(t){return i._instByName[t]},Object.defineProperty(i,"branch",{get:function(){return i._branch},set:function(t){for(var e in i._branch=t,i._instById){var n=i._instById[e];n._branches&&(n._branchIndex=n._branches.indexOf(t))}},enumerable:!0,configurable:!0}),i.getVar=function(t){return i._vars[t]},i.setVar=function(t,e){i._vars[t]=e},i.addPackage=function(e,n,o){void 0===n&&(n=t.utils.AssetManager.DEFAULT_GROUP);var r=i._instById[e];if(r)return r;var s=t.utils.AssetManager.inst.get(n);if(!s)throw new Error("could not find AssetDictory "+n+" in AssetManager");var a=s[""+e]||s[e+"_fui"];if(!a)throw new Error("Resource '"+e+'\' not found, please make sure that you use "new fgui.utils.AssetLoader" to load resources instead of " PIXI.loaders.Loader".');if(!(a.data&&a.data instanceof ArrayBuffer))throw new Error("Resource '"+e+"' is not a proper binary resource, please load it as binary format by calling yourLoader.add(name, url, { loadType:PIXI.LoaderResource.LOAD_TYPE.XHR, xhrType: PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER })");var h=new i;return t.Debug.log("pakage length "+a.data.byteLength),h._resKey=e,h._assetGroupName=n,h.loadPackage(new t.ByteBuffer(a.data)),i._instById[h.id]=h,i._instByName[h.name]=h,i._instById[e]=h,h},i.prototype.loadPackage=function(n){var o=n.readUnsignedInt();if(1179080009!=o)throw t.Debug.log("package version "+o+", expect 1179080009"),"FairyGUI: old package format found in '"+this._resKey+"'";n.version=n.readInt();var r=n.readBool();if(this._id=n.readUTF(),this._name=n.readUTF(),n.skip(20),t.Debug.log("version",n.version),t.Debug.log("compressed",r),t.Debug.log("id",this._id),t.Debug.log("name",this._name),r){var s=new Uint8Array(n.buffer,n.position,n.length-n.position),a=new Zlib.RawInflate(s),h=new t.ByteBuffer(a.decompress());h.version=n.version,n=h}var l,u,c,p,_,d=n.version>=2,f=n.position;n.seek(f,4),l=n.readInt(),t.Debug.log("string table count "+l);var g,y=new Array(l);for(u=0;u<l;u++)y[u]=n.readUTF();for(n.stringTable=y,n.seek(f,0),l=n.readShort(),u=0;u<l;u++)this._dependencies.push({id:n.readS(),name:n.readS()});t.Debug.log("dependencies count "+l),d&&((l=n.readShort())>0&&(this._branches=n.readSArray(l),i._branch&&(this._branchIndex=this._branches.indexOf(i._branch))),_=l>0),n.seek(f,1);var m=this._resKey+"_";l=n.readShort(),t.Debug.log("PackageItem count ",l,n.position);for(var b=0;b<l;b++){switch(c=n.readInt(),c+=n.position,(g=new t.PackageItem).owner=this,g.type=n.readByte(),g.id=n.readS(),g.name=n.readS(),n.readS(),g.file=n.readS(),n.readBool(),g.width=n.readInt(),g.height=n.readInt(),t.Debug.log("",g.id+" "+g.name+" "+g.file+" "+g.width+" "+g.height+" type "+g.type),g.type){case t.PackageItemType.Image:g.objectType=t.ObjectType.Image;var v=n.readByte();1==v?(g.scale9Grid=new PIXI.Rectangle,g.scale9Grid.x=n.readInt(),g.scale9Grid.y=n.readInt(),g.scale9Grid.width=n.readInt(),g.scale9Grid.height=n.readInt(),g.tileGridIndice=n.readInt()):2==v&&(g.scaleByTile=!0),g.smoothing=n.readBool();break;case t.PackageItemType.MovieClip:g.smoothing=n.readBool(),g.objectType=t.ObjectType.MovieClip,g.rawData=n.readBuffer();break;case t.PackageItemType.Font:g.rawData=n.readBuffer();break;case t.PackageItemType.Component:var w=n.readByte();g.objectType=w>0?w:t.ObjectType.Component,g.rawData=n.readBuffer(),t.UIObjectFactory.resolvePackageItemExtension(g);break;case t.PackageItemType.Atlas:case t.PackageItemType.Sound:case t.PackageItemType.Misc:g.file=m+t.ToolSet.getFileName(g.file)}if(d){(p=n.readS())&&(g.name=p+"/"+g.name);var C=n.readUnsignedByte();C>0&&(_?g.branches=n.readSArray(C):this._itemsById[n.readS()]=g);var x=n.readUnsignedByte();x>0&&(g.highResolution=n.readSArray(x))}this._items.push(g),this._itemsById[g.id]=g,null!=g.name&&(this._itemsByName[g.name]=g),n.position=c}n.seek(f,2),l=n.readShort(),t.Debug.log("sprite count ",l);for(var I=0;I<l;I++){c=n.readShort(),c+=n.position;var S=n.readS();g=this._itemsById[n.readS()];var P=new e(g.id);P.atlas=g,P.frame=new PIXI.Rectangle(n.readInt(),n.readInt(),n.readInt(),n.readInt()),P.rotated=n.readBool(),P.rotate=P.rotated?6:0,P.orig=0!=P.rotate?new PIXI.Rectangle(0,0,P.frame.height,P.frame.width):null,t.Debug.log("",S+" "+P.frame.x+" "+P.frame.y+" "+P.frame.width+" "+P.frame.height),d&&n.readBool()&&(n.readInt(),n.readInt(),n.readInt(),n.readInt()),this._atlasConfigs[S]=P,n.position=c}if(n.seek(f,3))for(l=n.readShort(),t.Debug.log("count3 ",l),u=0;u<l;u++)c=n.readInt(),c+=n.position,(g=this._itemsById[n.readS()])&&g.type==t.PackageItemType.Image&&(g.pixelHitTestData=new t.PixelHitTestData,g.pixelHitTestData.load(n)),n.position=c},i.removePackage=function(t){var e=i._instById[t];if(e||(e=i._instByName[t]),!e)throw new Error("unknown package: "+t);e.dispose(),delete i._instById[e.id],delete i._instByName[e.name],delete i._instById[e._resKey],null!=e._customId&&delete i._instById[e._customId]},i.createObject=function(t,e,n){var o=i.getByName(t);return o?o.createObject(e,n):null},i.createObjectFromURL=function(t,e){var n=i.getItemByURL(t);return n?n.owner.internalCreateObject(n,e):null},i.getItemURL=function(t,e){var n=i.getByName(t);if(!n)return null;var o=n._itemsByName[e];return o?"ui://"+n.id+o.id:null},i.getItemByURL=function(t){var e=t.indexOf("//");if(-1==e)return null;var n,o=t.indexOf("/",e+2);if(-1==o){if(t.length>13){var r=t.substr(5,8);if(null!=(n=i.getById(r))){var s=t.substr(13);return n.getItemById(s)}}}else{var a=t.substr(e+2,o-e-2);if(null!=(n=i.getByName(a))){var h=t.substr(o+1);return n.getItemByName(h)}}return null},i.getBitmapFontByURL=function(t){return i._bitmapFonts[t]},i.setStringsSource=function(e){i._stringsSource={},t.utils.XmlParser.tryParse(e).children.forEach(function(t){if("string"==t.nodeName){var e=t.attributes.name,n=e.indexOf("-");if(-1==n)return;var o=t.children.length>0?t.children[0].text:"",r=e.substr(0,n),s=e.substr(n+1),a=i._stringsSource[r];a||(a={},i._stringsSource[r]=a),a[s]=o}})},i.normalizeURL=function(t){if(null==t)return null;var e=t.indexOf("//");if(-1==e)return null;var n=t.indexOf("/",e+2);if(-1==n)return t;var o=t.substr(e+2,n-e-2),r=t.substr(n+1);return i.getItemURL(o,r)},i.prototype.dispose=function(){var e=this;this._items.forEach(function(n){var o=n.texture;null!=o?(o.destroy(!0),PIXI.Texture.removeFromCache(o)):null!=n.frames?n.frames.forEach(function(t){(o=t.texture)&&(o.destroy(!0),PIXI.Texture.removeFromCache(o))}):null!=n.bitmapFont&&delete i._bitmapFonts[n.bitmapFont.id];var r=e._atlasConfigs[n.id];if(r){var s=t.utils.AssetManager.inst.get(e._assetGroupName)||{};t.utils.AssetManager.inst.destroyResource(s,r.atlasName)}},this);var n=t.utils.AssetManager.inst.get(this._assetGroupName)||{};t.utils.AssetManager.inst.destroyResource(n,""+this._resKey)},i.prototype.createObject=function(t,e){var i=this._itemsByName[t];return i?this.internalCreateObject(i,e):null},i.prototype.internalCreateObject=function(e,n){void 0===n&&(n=null);var o=t.UIObjectFactory.newObject(e,n);return null==o?null:(i._constructing++,o.constructFromResource(),i._constructing--,o)},i.prototype.getItemById=function(t){return this._itemsById[t]},i.prototype.getItemByName=function(t){return this._itemsByName[t]},i.prototype.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw new Error("Resource '"+t+"' not found");return this.getItemAsset(e)},i.prototype.getItemAsset=function(e){switch(e.type){case t.PackageItemType.Image:if(!e.decoded){e.decoded=!0;var i=this._atlasConfigs[e.id];null!=i&&(e.texture=this.createSpriteTexture(e.id,i))}return e.texture;case t.PackageItemType.Atlas:if(!e.decoded){e.decoded=!0;var n=null!=e.file&&e.file.length>0?e.file:e.id+".png";t.Debug.log("Atlas filename",n);var o=n,r=t.utils.AssetManager.inst.get(this._assetGroupName)||{},s=r[o];if(!s)throw new Error(o+" not found in fgui.utils.AssetLoader.resourcesPool, please use new AssetLoader() to load assets instead of using new PIXI.loaders.Loader(). besides, AssetLoader is a sub-class from PIXI.loaders.Loader so they have the same usage.");e.texture=s.texture,e.texture||(s=r[this._resKey+"_"+n],e.texture=s.texture)}return e.texture;case t.PackageItemType.Sound:return null;case t.PackageItemType.Font:return e.decoded||(e.decoded=!0,this.loadFont(e)),e.bitmapFont;case t.PackageItemType.MovieClip:return e.decoded||(e.decoded=!0,this.loadMovieClip(e)),e.frames;case t.PackageItemType.Misc:default:return(t.utils.AssetManager.inst.get(this._assetGroupName)||{})[e.file||this._resKey+"_"+e.id]}},i.prototype.createSpriteTexture=function(e,i){t.Debug.log("createSpriteTexture",this._resKey+"_"+i.atlasName+"_"+e);var n=this._itemsById[i.atlasName];if(null!=n){var o=this.getItemAsset(n);if(!o||!o.baseTexture)return null;i.texCacheID||(i.texCacheID=this._resKey+"_"+i.atlasName+"_"+e);var r=PIXI.utils.TextureCache[i.texCacheID];return r||(r=new PIXI.Texture(o.baseTexture,i.frame,i.orig,i.trim,i.rotate),PIXI.Texture.addToCache(r,i.texCacheID)),r}return null},i.prototype.loadComponentChildren=function(e){var n=t.utils.XmlParser.getChildNodes(e.componentData,"displayList");null!=n&&n.length>0?(e.displayList=[],n[0].children.forEach(function(n){var o,r=n.nodeName,s=n.attributes.src;if(s){var a=n.attributes.pkg,h=void 0,l=null!=(h=a&&a!=e.owner.id?i.getById(a):e.owner)?h.getItemById(s):null;o=null!=l?new t.DisplayListItem(l,null):new t.DisplayListItem(null,r)}else o="text"==r&&"true"==n.attributes.input?new t.DisplayListItem(null,"inputtext"):new t.DisplayListItem(null,r);o.desc=n,e.displayList.push(o)})):e.displayList=[]},i.prototype.loadComponentTranslation=function(e){if(null!=i._stringsSource){var n,o,r,s,a,h=i._stringsSource[this.id+e.id];if(null!=h)e.displayList.forEach(function(e){o=e.desc,s=o.nodeName,a=o.attributes.id,o.attributes.tooltips&&null!=(n=h[a+"-tips"])&&(o.attributes.tooltips=n);var i=t.utils.XmlParser.getChildNodes(o,"gearText");if((r=i&&i[0])&&(null!=(n=h[a+"-texts"])&&(r.attributes.values=n),null!=(n=h[a+"-texts_def"])&&(r.attributes.default=n)),"text"==s||"richtext"==s)null!=(n=h[a])&&(o.attributes.text=n),null!=(n=h[a+"-prompt"])&&(o.attributes.prompt=n);else if("list"==s)o.children.forEach(function(t,e){"item"==t.nodeName&&null!=(n=h[a+"-"+e])&&(t.attributes.title=n)});else if("component"==s){if(i=t.utils.XmlParser.getChildNodes(o,"Button"),r=i&&i[0])return null!=(n=h[a])&&(r.attributes.title=n),void(null!=(n=h[a+"-0"])&&(r.attributes.selectedTitle=n));if(i=t.utils.XmlParser.getChildNodes(o,"Label"),r=i&&i[0])return void(null!=(n=h[a])&&(r.attributes.title=n));if(i=t.utils.XmlParser.getChildNodes(o,"ComboBox"),r=i&&i[0])return null!=(n=h[a])&&(r.attributes.title=n),void r.children.forEach(function(t,e){"item"==t.nodeName&&null!=(n=h[a+"-"+e])&&(t.attributes.title=n)})}})}},i.prototype.loadMovieClip=function(e){var i=e.rawData;i.seek(0,0),e.interval=i.readInt(),e.swing=i.readBool(),e.repeatDelay=i.readInt(),i.seek(0,1);var n,o,r,s,a,h,l,u=i.readShort();e.frames=Array(u);for(var c=0;c<u;c++){var p=i.readShort();p+=i.position,o=new t.Frame,s=i.readInt(),a=i.readInt(),h=i.readInt(),l=i.readInt(),o.addDelay=i.readInt(),n=i.readS();var _=new PIXI.Rectangle(s,a,h,l);null!=n&&null!=(r=this._atlasConfigs[n])&&(r.trim=_,o.texture=this.createSpriteTexture(n,r)),e.frames[c]=o,i.position=p}},i.prototype.loadFont=function(e){var i=new t.BitmapFont;i.id="ui://"+this.id+e.id,e.bitmapFont=i;var n=e.rawData;n.seek(0,0),i.ttf=n.readBool(),i.tint=n.readBool(),i.resizable=n.readBool(),n.readBool(),i.size=n.readInt();var o=n.readInt(),r=n.readInt(),s=null,a=this._atlasConfigs[e.id];null!=a&&(s=this.getItemAsset(a.atlas)),n.seek(0,1);for(var h=null,l=n.readInt(),u=0;u<l;u++){var c=n.readShort();c+=n.position,h=new t.BMGlyph;var p=n.readChar();i.glyphs[p]=h;var _=n.readS();n.readInt(),n.readInt();if(h.x=n.readInt(),h.y=n.readInt(),h.width=n.readInt(),h.height=n.readInt(),h.advance=n.readInt(),h.channel=n.readByte(),1==h.channel?h.channel=3:2==h.channel?h.channel=2:3==h.channel&&(h.channel=1),i.ttf){var d=this._atlasConfigs[e.id],f=d.frame.x,g=d.frame.y;h.texture=new PIXI.Texture(s.baseTexture,new PIXI.Rectangle(h.x+f,h.y+g,h.width,h.height)),h.lineHeight=r}else{var y=this._itemsById[_];y&&(this.getItemAsset(y),h.width=y.width,h.height=y.height,h.texture=y.texture),0==h.advance&&(h.advance=0==o?h.x+h.width:o),h.lineHeight=h.y<0?h.height:h.y+h.height,h.lineHeight<i.size&&(h.lineHeight=i.size)}n.position=c}},i._constructing=0,i._bitmapFonts={},i._stringsSource=null,i._instById={},i._instByName={},i._branch="",i._vars={},i}();t.UIPackage=i}(fgui||(fgui={})),function(t){!function(t){!function(t){t.read=function(t,e,i,n,o){var r,s,a=8*o-n-1,h=(1<<a)-1,l=h>>1,u=-7,c=i?o-1:0,p=i?-1:1,_=t[e+c];for(c+=p,r=_&(1<<-u)-1,_>>=-u,u+=a;u>0;r=256*r+t[e+c],c+=p,u-=8);for(s=r&(1<<-u)-1,r>>=-u,u+=n;u>0;s=256*s+t[e+c],c+=p,u-=8);if(0===r)r=1-l;else{if(r===h)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,n),r-=l}return(_?-1:1)*s*Math.pow(2,r-n)},t.write=function(t,e,i,n,o,r){var s,a,h,l=8*r-o-1,u=(1<<l)-1,c=u>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:r-1,d=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+c>=1?p/h:p*Math.pow(2,1-c))*h>=2&&(s++,h/=2),s+c>=u?(a=0,s=u):s+c>=1?(a=(e*h-1)*Math.pow(2,o),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,o),s=0));o>=8;t[i+_]=255&a,_+=d,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[i+_]=255&s,_+=d,s/=256,l-=8);t[i+_-d]|=128*f}}(t.ieee754||(t.ieee754={}))}(t.the3rd||(t.the3rd={}))}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.evaluate=function(n,o,r,s,a){switch(n){case t.EaseType.Linear:return o/r;case t.EaseType.SineIn:return 1-Math.cos(o/r*e._PiOver2);case t.EaseType.SineOut:return Math.sin(o/r*e._PiOver2);case t.EaseType.SineInOut:return-.5*(Math.cos(Math.PI*o/r)-1);case t.EaseType.QuadIn:return(o/=r)*o;case t.EaseType.QuadOut:return-(o/=r)*(o-2);case t.EaseType.QuadInOut:return(o/=.5*r)<1?.5*o*o:-.5*(--o*(o-2)-1);case t.EaseType.CubicIn:return(o/=r)*o*o;case t.EaseType.CubicOut:return(o=o/r-1)*o*o+1;case t.EaseType.CubicInOut:return(o/=.5*r)<1?.5*o*o*o:.5*((o-=2)*o*o+2);case t.EaseType.QuartIn:return(o/=r)*o*o*o;case t.EaseType.QuartOut:return-((o=o/r-1)*o*o*o-1);case t.EaseType.QuartInOut:return(o/=.5*r)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2);case t.EaseType.QuintIn:return(o/=r)*o*o*o*o;case t.EaseType.QuintOut:return(o=o/r-1)*o*o*o*o+1;case t.EaseType.QuintInOut:return(o/=.5*r)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2);case t.EaseType.ExpoIn:return 0==o?0:Math.pow(2,10*(o/r-1));case t.EaseType.ExpoOut:return o==r?1:1-Math.pow(2,-10*o/r);case t.EaseType.ExpoInOut:return 0==o?0:o==r?1:(o/=.5*r)<1?.5*Math.pow(2,10*(o-1)):.5*(2-Math.pow(2,-10*--o));case t.EaseType.CircIn:return-(Math.sqrt(1-(o/=r)*o)-1);case t.EaseType.CircOut:return Math.sqrt(1-(o=o/r-1)*o);case t.EaseType.CircInOut:return(o/=.5*r)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1);case t.EaseType.ElasticIn:var h;return 0==o?0:1==(o/=r)?1:(0==a&&(a=.3*r),s<1?(s=1,h=a/4):h=a/e._TwoPi*Math.asin(1/s),-s*Math.pow(2,10*(o-=1))*Math.sin((o*r-h)*e._TwoPi/a));case t.EaseType.ElasticOut:var l;return 0==o?0:1==(o/=r)?1:(0==a&&(a=.3*r),s<1?(s=1,l=a/4):l=a/e._TwoPi*Math.asin(1/s),s*Math.pow(2,-10*o)*Math.sin((o*r-l)*e._TwoPi/a)+1);case t.EaseType.ElasticInOut:var u;return 0==o?0:2==(o/=.5*r)?1:(0==a&&(a=r*(.3*1.5)),s<1?(s=1,u=a/4):u=a/e._TwoPi*Math.asin(1/s),o<1?s*Math.pow(2,10*(o-=1))*Math.sin((o*r-u)*e._TwoPi/a)*-.5:s*Math.pow(2,-10*(o-=1))*Math.sin((o*r-u)*e._TwoPi/a)*.5+1);case t.EaseType.BackIn:return(o/=r)*o*((s+1)*o-s);case t.EaseType.BackOut:return(o=o/r-1)*o*((s+1)*o+s)+1;case t.EaseType.BackInOut:return(o/=.5*r)<1?o*o*((1+(s*=1.525))*o-s)*.5:.5*((o-=2)*o*((1+(s*=1.525))*o+s)+2);case t.EaseType.BounceIn:return i.easeIn(o,r);case t.EaseType.BounceOut:return i.easeOut(o,r);case t.EaseType.BounceInOut:return i.easeInOut(o,r);default:return-(o/=r)*(o-2)}},e._PiOver2=.5*Math.PI,e._TwoPi=2*Math.PI,e}();t.EaseManager=e;var i=function(){function t(){}return t.easeIn=function(e,i){return 1-t.easeOut(i-e,i)},t.easeOut=function(t,e){return(t/=e)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.easeInOut=function(e,i){return e<.5*i?.5*t.easeIn(2*e,i):.5*t.easeOut(2*e-i,i)+.5},t}()}(fgui||(fgui={})),function(t){var e=function(){function t(){}return t.Linear=0,t.SineIn=1,t.SineOut=2,t.SineInOut=3,t.QuadIn=4,t.QuadOut=5,t.QuadInOut=6,t.CubicIn=7,t.CubicOut=8,t.CubicInOut=9,t.QuartIn=10,t.QuartOut=11,t.QuartInOut=12,t.QuintIn=13,t.QuintOut=14,t.QuintInOut=15,t.ExpoIn=16,t.ExpoOut=17,t.ExpoInOut=18,t.CircIn=19,t.CircOut=20,t.CircInOut=21,t.ElasticIn=22,t.ElasticOut=23,t.ElasticInOut=24,t.BackIn=25,t.BackOut=26,t.BackInOut=27,t.BounceIn=28,t.BounceOut=29,t.BounceInOut=30,t.Custom=31,t}();t.EaseType=e}(fgui||(fgui={})),function(t){var e=function(){function e(){this._segments=new Array,this._points=new Array}return Object.defineProperty(e.prototype,"length",{get:function(){return this._fullLength},enumerable:!0,configurable:!0}),e.prototype.create2=function(t,e,i,n){var o=new Array;o.push(t),o.push(e),i&&o.push(i),n&&o.push(n),this.create(o)},e.prototype.create=function(n){this._segments.length=0,this._points.length=0,this._fullLength=0;var o=n.length;if(0!=o){var r=e.helperPoints;r.length=0;var s=n[0];s.curveType==t.CurveType.CRSpline&&r.push(new PIXI.Point(s.x,s.y));for(var a=1;a<o;a++){var h=n[a];if(s.curveType!=t.CurveType.CRSpline){var l=new i;l.type=s.curveType,l.ptStart=this._points.length,s.curveType==t.CurveType.Straight?(l.ptCount=2,this._points.push(new PIXI.Point(s.x,s.y)),this._points.push(new PIXI.Point(h.x,h.y))):s.curveType==t.CurveType.Bezier?(l.ptCount=3,this._points.push(new PIXI.Point(s.x,s.y)),this._points.push(new PIXI.Point(h.x,h.y)),this._points.push(new PIXI.Point(s.control1_x,s.control1_y))):s.curveType==t.CurveType.CubicBezier&&(l.ptCount=4,this._points.push(new PIXI.Point(s.x,s.y)),this._points.push(new PIXI.Point(h.x,h.y)),this._points.push(new PIXI.Point(s.control1_x,s.control1_y)),this._points.push(new PIXI.Point(s.control2_x,s.control2_y))),l.length=t.ToolSet.distance(s.x,s.y,h.x,h.y),this._fullLength+=l.length,this._segments.push(l)}h.curveType!=t.CurveType.CRSpline?r.length>0&&(r.push(new PIXI.Point(h.x,h.y)),this.createSplineSegment()):r.push(new PIXI.Point(h.x,h.y)),s=h}r.length>1&&this.createSplineSegment()}},e.prototype.createSplineSegment=function(){var n=e.helperPoints,o=n.length;n.splice(0,0,n[0]),n.push(n[o]),n.push(n[o]),o+=3;var r=new i;r.type=t.CurveType.CRSpline,r.ptStart=this._points.length,r.ptCount=o,this._points=this._points.concat(n),r.length=0;for(var s=1;s<o;s++)r.length+=t.ToolSet.distance(n[s-1].x,n[s-1].y,n[s].x,n[s].y);this._fullLength+=r.length,this._segments.push(r),n.length=0},e.prototype.clear=function(){this._segments.length=0,this._points.length=0},e.prototype.getPointAt=function(e,i){i?i.x=i.y=0:i=new PIXI.Point,e=t.ToolSet.clamp01(e);var n,o=this._segments.length;if(0==o)return i;if(1==e)return(n=this._segments[o-1]).type==t.CurveType.Straight?(i.x=t.ToolSet.lerp(this._points[n.ptStart].x,this._points[n.ptStart+1].x,e),i.y=t.ToolSet.lerp(this._points[n.ptStart].y,this._points[n.ptStart+1].y,e),i):n.type==t.CurveType.Bezier||n.type==t.CurveType.CubicBezier?this.onBezierCurve(n.ptStart,n.ptCount,e,i):this.onCRSplineCurve(n.ptStart,n.ptCount,e,i);for(var r=e*this._fullLength,s=0;s<o;s++)if((r-=(n=this._segments[s]).length)<0){e=1+r/n.length,n.type==t.CurveType.Straight?(i.x=t.ToolSet.lerp(this._points[n.ptStart].x,this._points[n.ptStart+1].x,e),i.y=t.ToolSet.lerp(this._points[n.ptStart].y,this._points[n.ptStart+1].y,e)):i=n.type==t.CurveType.Bezier||n.type==t.CurveType.CubicBezier?this.onBezierCurve(n.ptStart,n.ptCount,e,i):this.onCRSplineCurve(n.ptStart,n.ptCount,e,i);break}return i},Object.defineProperty(e.prototype,"segmentCount",{get:function(){return this._segments.length},enumerable:!0,configurable:!0}),e.prototype.getAnchorsInSegment=function(t,e){null==e&&(e=new Array);for(var i=this._segments[t],n=0;n<i.ptCount;n++)e.push(new PIXI.Point(this._points[i.ptStart+n].x,this._points[i.ptStart+n].y));return e},e.prototype.getPointsInSegment=function(e,i,n,o,r,s){null==o&&(o=new Array),s&&!isNaN(s)||(s=.1),r&&r.push(i);var a=this._segments[e];if(a.type==t.CurveType.Straight)o.push(new PIXI.Point(t.ToolSet.lerp(this._points[a.ptStart].x,this._points[a.ptStart+1].x,i),t.ToolSet.lerp(this._points[a.ptStart].y,this._points[a.ptStart+1].y,i))),o.push(new PIXI.Point(t.ToolSet.lerp(this._points[a.ptStart].x,this._points[a.ptStart+1].x,n),t.ToolSet.lerp(this._points[a.ptStart].y,this._points[a.ptStart+1].y,n)));else{var h;h=a.type==t.CurveType.Bezier||a.type==t.CurveType.CubicBezier?this.onBezierCurve:this.onCRSplineCurve,o.push(h.call(this,a.ptStart,a.ptCount,i,new PIXI.Point));for(var l=Math.min(a.length*s,50),u=0;u<=l;u++){var c=u/l;c>i&&c<n&&(o.push(h.call(this,a.ptStart,a.ptCount,c,new PIXI.Point)),null!=r&&r.push(c))}o.push(h.call(this,a.ptStart,a.ptCount,n,new PIXI.Point))}return null!=r&&r.push(n),o},e.prototype.getAllPoints=function(t,e,i){null==t&&(t=new Array),i&&!isNaN(i)||(i=.1);for(var n=this._segments.length,o=0;o<n;o++)this.getPointsInSegment(o,0,1,t,e,i);return t},e.prototype.onCRSplineCurve=function(e,i,n,o){var r=Math.floor(n*(i-4))+e,s=this._points[r].x,a=this._points[r].y,h=this._points[r+1].x,l=this._points[r+1].y,u=this._points[r+2].x,c=this._points[r+2].y,p=this._points[r+3].x,_=this._points[r+3].y,d=1==n?1:t.ToolSet.repeat(n*(i-4),1),f=((2-d)*d-1)*d*.5,g=.5*((3*d-5)*d*d+2),y=((-3*d+4)*d+1)*d*.5,m=(d-1)*d*d*.5;return o.x=s*f+h*g+u*y+p*m,o.y=a*f+l*g+c*y+_*m,o},e.prototype.onBezierCurve=function(t,e,i,n){var o=1-i,r=this._points[t].x,s=this._points[t].y,a=this._points[t+1].x,h=this._points[t+1].y,l=this._points[t+2].x,u=this._points[t+2].y;if(4==e){var c=this._points[t+3].x,p=this._points[t+3].y;n.x=o*o*o*r+3*o*o*i*l+3*o*i*i*c+i*i*i*a,n.y=o*o*o*s+3*o*o*i*u+3*o*i*i*p+i*i*i*h}else n.x=o*o*r+2*o*i*l+i*i*a,n.y=o*o*s+2*o*i*u+i*i*h;return n},e.helperPoints=new Array,e}();t.GPath=e;var i=function(){return function(){}}()}(fgui||(fgui={})),function(t){var e;!function(t){t[t.CRSpline=0]="CRSpline",t[t.Bezier=1]="Bezier",t[t.CubicBezier=2]="CubicBezier",t[t.Straight=3]="Straight"}(e=t.CurveType||(t.CurveType={}));var i=function(){function t(){this.x=0,this.y=0,this.control1_x=0,this.control1_y=0,this.control2_x=0,this.control2_y=0,this.curveType=0}return t.newPoint=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=new t;return o.x=e,o.y=i,o.control1_x=0,o.control1_y=0,o.control2_x=0,o.control2_y=0,o.curveType=n,o},t.newBezierPoint=function(i,n,o,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var s=new t;return s.x=i,s.y=n,s.control1_x=o,s.control1_y=r,s.control2_x=0,s.control2_y=0,s.curveType=e.Bezier,s},t.newCubicBezierPoint=function(i,n,o,r,s,a){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0);var h=new t;return h.x=i,h.y=n,h.control1_x=o,h.control1_y=r,h.control2_x=s,h.control2_y=a,h.curveType=e.CubicBezier,h},t.prototype.clone=function(){var e=new t;return e.x=this.x,e.y=this.y,e.control1_x=this.control1_x,e.control1_y=this.control1_y,e.control2_x=this.control2_x,e.control2_y=this.control2_y,e.curveType=this.curveType,e},t}();t.GPathPoint=i}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.to=function(e,i,n){return t.TweenManager.createTween()._to(e,i,n)},e.to2=function(e,i,n,o,r){return t.TweenManager.createTween()._to2(e,i,n,o,r)},e.to3=function(e,i,n,o,r,s,a){return t.TweenManager.createTween()._to3(e,i,n,o,r,s,a)},e.to4=function(e,i,n,o,r,s,a,h,l){return t.TweenManager.createTween()._to4(e,i,n,o,r,s,a,h,l)},e.toColor=function(e,i,n){return t.TweenManager.createTween()._toColor(e,i,n)},e.delayedCall=function(e){return t.TweenManager.createTween().setDelay(e)},e.shake=function(e,i,n,o){return t.TweenManager.createTween()._shake(e,i,n,o)},e.isTweening=function(e,i){return t.TweenManager.isTweening(e,i)},e.kill=function(e,i,n){t.TweenManager.killTweens(e,i,n)},e.getTween=function(e,i){return t.TweenManager.getTween(e,i)},e.catchCallbackExceptions=!0,e}();t.GTween=e}(fgui||(fgui={})),function(t){var e=function(){function e(){this._startValue=new t.TweenValue,this._endValue=new t.TweenValue,this._value=new t.TweenValue,this._deltaValue=new t.TweenValue,this._reset()}return e.prototype.setDelay=function(t){return this._delay=t,this},Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),e.prototype.setDuration=function(t){return this._duration=t,this},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),e.prototype.setBreakpoint=function(t){return this._breakpoint=t,this},e.prototype.setEase=function(t){return this._easeType=t,this},e.prototype.setEasePeriod=function(t){return this._easePeriod=t,this},e.prototype.setEaseOvershootOrAmplitude=function(t){return this._easeOvershootOrAmplitude=t,this},e.prototype.setRepeat=function(t,e){return void 0===e&&(e=!1),this._repeat=t,this._yoyo=e,this},Object.defineProperty(e.prototype,"repeat",{get:function(){return this._repeat},enumerable:!0,configurable:!0}),e.prototype.setTimeScale=function(t){return this._timeScale=t,this},e.prototype.setSnapping=function(t){return this._snapping=t,this},e.prototype.setTarget=function(t,e){return void 0===e&&(e=null),this._target=t,this._propType=e,this},Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e.prototype.setUserData=function(t){return this._userData=t,this},Object.defineProperty(e.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return this._path=t,this},e.prototype.onUpdate=function(t,e){return this._onUpdate=t,this._onUpdateCaller=e,this},e.prototype.onStart=function(t,e){return this._onStart=t,this._onStartCaller=e,this},e.prototype.onComplete=function(t,e){return this._onComplete=t,this._onCompleteCaller=e,this},Object.defineProperty(e.prototype,"startValue",{get:function(){return this._startValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this._endValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaValue",{get:function(){return this._deltaValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalizedTime",{get:function(){return this._normalizedTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return 0!=this._ended},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCompleted",{get:function(){return 1==this._ended},enumerable:!0,configurable:!0}),e.prototype.setPaused=function(t){return this._paused=t,this},e.prototype.seek=function(t){if(!this._killed){if(this._elapsedTime=t,this._elapsedTime<this._delay){if(!this._started)return;this._elapsedTime=this._delay}this.update()}},e.prototype.kill=function(t){void 0===t&&(t=!1),this._killed||(t&&(0==this._ended&&(this._breakpoint>=0?this._elapsedTime=this._delay+this._breakpoint:this._repeat>=0?this._elapsedTime=this._delay+this._duration*(this._repeat+1):this._elapsedTime=this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)},e.prototype._to=function(t,e,i){return this._valueSize=1,this._startValue.x=t,this._endValue.x=e,this._value.x=t,this._duration=i,this},e.prototype._to2=function(t,e,i,n,o){return this._valueSize=2,this._startValue.x=t,this._endValue.x=i,this._startValue.y=e,this._endValue.y=n,this._value.x=t,this._value.y=e,this._duration=o,this},e.prototype._to3=function(t,e,i,n,o,r,s){return this._valueSize=3,this._startValue.x=t,this._endValue.x=n,this._startValue.y=e,this._endValue.y=o,this._startValue.z=i,this._endValue.z=r,this._value.x=t,this._value.y=e,this._value.z=i,this._duration=s,this},e.prototype._to4=function(t,e,i,n,o,r,s,a,h){return this._valueSize=4,this._startValue.x=t,this._endValue.x=o,this._startValue.y=e,this._endValue.y=r,this._startValue.z=i,this._endValue.z=s,this._startValue.w=n,this._endValue.w=a,this._value.x=t,this._value.y=e,this._value.z=i,this._value.w=n,this._duration=h,this},e.prototype._toColor=function(t,e,i){return this._valueSize=4,this._startValue.color=t,this._endValue.color=e,this._value.color=t,this._duration=i,this},e.prototype._shake=function(t,e,i,n){return this._valueSize=5,this._startValue.x=t,this._startValue.y=e,this._startValue.w=i,this._duration=n,this},e.prototype._init=function(){this._delay=0,this._duration=0,this._breakpoint=-1,this._easeType=t.EaseType.QuadOut,this._timeScale=1,this._easePeriod=0,this._easeOvershootOrAmplitude=1.70158,this._snapping=!1,this._repeat=0,this._yoyo=!1,this._valueSize=0,this._started=!1,this._paused=!1,this._killed=!1,this._elapsedTime=0,this._normalizedTime=0,this._ended=0},e.prototype._reset=function(){this._target=null,this._propType=null,this._userData=null,this._path=null,this._onStart=this._onUpdate=this._onComplete=null,this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null},e.prototype._update=function(t){if(1!=this._timeScale&&(t*=this._timeScale),0!=t){if(0!=this._ended)return this.callCompleteCallback(),void(this._killed=!0);this._elapsedTime+=t,this.update(),0!=this._ended&&(this._killed||(this.callCompleteCallback(),this._killed=!0))}},e.prototype.update=function(){if(this._ended=0,0!=this._valueSize){if(!this._started){if(this._elapsedTime<this._delay)return;if(this._started=!0,this.callStartCallback(),this._killed)return}var i=!1,n=this._elapsedTime-this._delay;if(this._breakpoint>=0&&n>=this._breakpoint&&(n=this._breakpoint,this._ended=2),0!=this._repeat){var o=Math.floor(n/this._duration);n-=this._duration*o,this._yoyo&&(i=o%2==1),this._repeat>0&&this._repeat-o<0&&(this._yoyo&&(i=this._repeat%2==1),n=this._duration,this._ended=1)}else n>=this._duration&&(n=this._duration,this._ended=1);if(this._normalizedTime=t.EaseManager.evaluate(this._easeType,i?this._duration-n:n,this._duration,this._easeOvershootOrAmplitude,this._easePeriod),this._value.setZero(),this._deltaValue.setZero(),5==this._valueSize)if(0==this._ended){var r=this._startValue.w*(1-this._normalizedTime),s=r*(Math.random()>.5?1:-1),a=r*(Math.random()>.5?1:-1);this._deltaValue.x=s,this._deltaValue.y=a,this._value.x=this._startValue.x+s,this._value.y=this._startValue.y+a}else this._value.x=this._startValue.x,this._value.y=this._startValue.y;else if(this._path){var h=e.helperPoint;this._path.getPointAt(this._normalizedTime,h),this._snapping&&(h.x=Math.round(h.x),h.y=Math.round(h.y)),this._deltaValue.x=h.x-this._value.x,this._deltaValue.y=h.y-this._value.y,this._value.x=h.x,this._value.y=h.y}else for(var l=0;l<this._valueSize;l++){var u=this._startValue.getField(l),c=u+(this._endValue.getField(l)-u)*this._normalizedTime;this._snapping&&(c=Math.round(c)),this._deltaValue.setField(l,c-this._value.getField(l)),this._value.setField(l,c)}if(null!=this._target&&null!=this._propType)if(this._propType instanceof Function)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else 5==this._valueSize?this._target[this._propType]=this._value.color:this._target[this._propType]=this._value.x;this.callUpdateCallback()}else this._elapsedTime>=this._delay+this._duration&&(this._ended=1)},e.prototype.callStartCallback=function(){if(null!=this._onStart)try{this._onStart.call(this._onStartCaller,this)}catch(t){console.log("FairyGUI: error in start callback > "+t)}},e.prototype.callUpdateCallback=function(){if(null!=this._onUpdate)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(t){console.log("FairyGUI: error in update callback > "+t)}},e.prototype.callCompleteCallback=function(){if(null!=this._onComplete)try{this._onComplete.call(this._onCompleteCaller,this)}catch(t){console.log("FairyGUI: error in complete callback > "+t)}},e.helperPoint=new PIXI.Point,e}();t.GTweener=e}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.createTween=function(){var i;return e._inited||(e._ticker.add(e.update,this,PIXI.UPDATE_PRIORITY.NORMAL),e._ticker.autoStart=!0,e._inited=!0,e._lastTime=Date.now()),(i=e._tweenerPool.length>0?e._tweenerPool.pop():new t.GTweener)._init(),e._activeTweens[e._totalActiveTweens++]=i,e._totalActiveTweens==e._activeTweens.length&&(e._activeTweens.length=e._activeTweens.length+Math.ceil(.5*e._activeTweens.length)),i},e.isTweening=function(t,i){if(null==t)return!1;for(var n=null==i||null==i,o=0;o<e._totalActiveTweens;o++){var r=e._activeTweens[o];if(null!=r&&r.target==t&&!r._killed&&(n||r._propType==i))return!0}return!1},e.killTweens=function(t,i,n){if(null==t)return!1;for(var o=!1,r=e._totalActiveTweens,s=null==n||null==n,a=0;a<r;a++){var h=e._activeTweens[a];null==h||h.target!=t||h._killed||!s&&h._propType!=n||(h.kill(i),o=!0)}return o},e.getTween=function(t,i){if(null==t)return null;for(var n=e._totalActiveTweens,o=null==i||null==i,r=0;r<n;r++){var s=e._activeTweens[r];if(null!=s&&s.target==t&&!s._killed&&(o||s._propType==i))return s}return null},e.update=function(){var i=e._ticker.deltaTime/PIXI.settings.TARGET_FPMS;e._lastTime+=i;for(var n=e._totalActiveTweens,o=-1,r=0;r<n;r++){var s=e._activeTweens[r];null==s?(-1==o&&(o=r),0):s._killed?(s._reset(),e._tweenerPool.push(s),e._activeTweens[r]=null,-1==o&&(o=r),0):(s._target instanceof t.GObject&&s._target.isDisposed?s._killed=!0:s._paused||s._update(i),-1!=o&&(e._activeTweens[o]=s,e._activeTweens[r]=null,o++))}if(o>=0){if(e._totalActiveTweens!=n){var a=n;for(n=e._totalActiveTweens-n,r=0;r<n;r++)e._activeTweens[o++]=e._activeTweens[a++]}e._totalActiveTweens=o}return!1},e._activeTweens=new Array(30),e._tweenerPool=new Array,e._totalActiveTweens=0,e._lastTime=0,e._inited=!1,e}();t.TweenManager=e}(fgui||(fgui={})),function(t){var e=function(){function t(){this.x=this.y=this.z=this.w=0}return Object.defineProperty(t.prototype,"color",{get:function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},set:function(t){this.x=(16711680&t)>>16,this.y=(65280&t)>>8,this.z=255&t,this.w=(4278190080&t)>>24},enumerable:!0,configurable:!0}),t.prototype.getField=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setField=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setZero=function(){this.x=this.y=this.z=this.w=0},t}();t.TweenValue=e}(fgui||(fgui={})),function(t){!function(t){var e=function(){function t(){var e;this._assetGroup=((e={})[t.DEFAULT_GROUP]={},e)}return Object.defineProperty(t,"inst",{get:function(){return t._inst||(t._inst=new t),t._inst},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"assetGroup",{get:function(){return this._assetGroup},enumerable:!0,configurable:!0}),t.prototype.get=function(e){return void 0===e&&(e=t.DEFAULT_GROUP),this._assetGroup[e]},t.prototype.set=function(t,e){if(!t)throw new Error("groupName could not empty");return this.assetGroup[t]=e,this},t.prototype.add=function(t,e){return this.assetGroup[t]=e,this},t.prototype.remove=function(e){return void 0===e&&(e=t.DEFAULT_GROUP),this.assetGroup[e]=null,delete this.assetGroup[e],this},t.prototype.destroyAsset=function(e){void 0===e&&(e=t.DEFAULT_GROUP);var i=this.assetGroup[e];if(i){for(var n in i)this.destroyResource(i,n);return this.assetGroup[e]=null,delete this.assetGroup[e],this}},t.prototype.destroyResource=function(t,e){var i=t[e];if(i){if(i.isComplete||i.abort(),i.children=null,i.data=null,i.texture&&i.texture.destroy(),i.textures)for(var n in i.textures){var o=i.textures[n];o&&o.destroy(),i.textures[n]=void 0,delete i.textures[n]}i.textures=null,i.xhr=null,t[e]=null,delete t[e]}},t.DEFAULT_GROUP="default",t}();t.AssetManager=e;var i=function(t){function i(i,n,o,r){void 0===i&&(i=e.DEFAULT_GROUP),void 0===n&&(n=!0);var s=t.call(this,o,r)||this;return s._groupName=i,s._autoAddToAssetManager=n,s._autoAddToAssetManager&&s.__listenOnceLoadComplete(),s}return __extends(i,t),Object.defineProperty(i.prototype,"groupName",{get:function(){return this._groupName},set:function(t){this._groupName="string"!=typeof t?e.DEFAULT_GROUP:t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoAddToAssetManager",{get:function(){return this._autoAddToAssetManager},set:function(t){t!==this._autoAddToAssetManager&&(this._autoAddToAssetManager=t,t&&this.__listenOnceLoadComplete())},enumerable:!0,configurable:!0}),i.prototype.__listenOnceLoadComplete=function(){this.completeSignal.once(function(){e.inst.add(this._groupName,this.resources)},this)},Object.defineProperty(i.prototype,"completeSignal",{get:function(){return this.onComplete},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"errorSignal",{get:function(){return this.onError},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loadSignal",{get:function(){return this.onLoad},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"startSignal",{get:function(){return this.onStart},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"progressSignal",{get:function(){return this.onProgress},enumerable:!0,configurable:!0}),i.prototype.easyAdd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.add.apply(this,t)},i.prototype.addGroup=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];this.easyAdd(n.name,n.path)}return this},i.prototype.loadAsync=function(){var t=this;return new Promise(function(i){t.completeSignal.once(function(){this._autoAddToAssetManager&&e.inst.add(this._groupName,this.resources),i(this.resources)},t),t.errorSignal.once(function(t,e,n){i(new Error(t))},t),t.load()})},i}(PIXI.Loader);t.AssetLoader=i}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){var e=function(){function e(){this._itemList=new Array,this._objectPool=new Array}return e.prototype.createObject=function(e,i){var n=t.UIPackage.getByName(e);if(!n)throw new Error("package not found: "+e);var o=n.getItemByName(i);if(!o)throw new Error("resource not found: "+i);this.internalCreateObject(o)},e.prototype.createObjectFromURL=function(e){var i=t.UIPackage.getItemByURL(e);if(!i)throw new Error("resource not found: "+e);this.internalCreateObject(i)},e.prototype.cancel=function(){t.GTimer.inst.remove(this.run,this),this._itemList.length=0;var e=this._objectPool.length;if(e>0){for(var i=0;i<e;i++)this._objectPool[i].dispose();this._objectPool.length=0}},e.prototype.internalCreateObject=function(e){this._itemList.length=0,this._objectPool.length=0;var n=new i(e,0);n.childCount=this.collectComponentChildren(e),this._itemList.push(n),this._index=0,t.GTimer.inst.add(1,0,this.run,this)},e.prototype.collectComponentChildren=function(e){var n,o,r,s,a,h,l=e.rawData;l.seek(0,2);var u=l.readShort();for(r=0;r<u;r++){s=l.readShort(),a=l.position,l.seek(a,0);var c=l.readByte(),p=l.readS(),_=l.readS();l.position=a,null!=p?(o=null!=(h=null!=_?t.UIPackage.getById(_):e.owner)?h.getItemById(p):null,n=new i(o,c),null!=o&&o.type==t.PackageItemType.Component&&(n.childCount=this.collectComponentChildren(o))):(n=new i(null,c),c==t.ObjectType.List&&(n.listItemCount=this.collectListChildren(l))),this._itemList.push(n),l.position=a+s}return u},e.prototype.collectListChildren=function(e){e.seek(e.position,8);var n,o,r,s,a,h=0,l=e.readS(),u=e.readShort();for(n=0;n<u;n++)o=e.readShort(),o+=e.position,null==(r=e.readS())&&(r=l),r&&null!=(s=t.UIPackage.getItemByURL(r))&&(a=new i(s,s.objectType),s.type==t.PackageItemType.Component&&(a.childCount=this.collectComponentChildren(s)),this._itemList.push(a),h++),e.position=o;return h},e.prototype.run=function(){for(var e,i,n,o,r=PIXI.Ticker.system.elapsedMS,s=t.UIConfig.frameTimeForAsyncUIConstruction,a=this._itemList.length;this._index<a;){if(null!=(i=this._itemList[this._index]).packageItem)e=t.UIObjectFactory.newObject(i.packageItem),this._objectPool.push(e),t.UIPackage._constructing++,i.packageItem.type==t.PackageItemType.Component?(n=this._objectPool.length-i.childCount-1,e.constructFromResource2(this._objectPool,n),this._objectPool.splice(n,i.childCount)):e.constructFromResource(),t.UIPackage._constructing--;else if(e=t.UIObjectFactory.newObject2(i.type),this._objectPool.push(e),i.type==t.ObjectType.List&&i.listItemCount>0){for(n=this._objectPool.length-i.listItemCount-1,o=0;o<i.listItemCount;o++)e.itemPool.returnObject(this._objectPool[o+n]);this._objectPool.splice(n,i.listItemCount)}if(this._index++,this._index%5==0&&PIXI.Ticker.system.elapsedMS-r>=s)return}t.GTimer.inst.remove(this.run,this);var h=this._objectPool[0];this._itemList.length=0,this._objectPool.length=0,null!=this.callback&&this.callback.call(this.callbackObj,h)},e}();t.AsyncOperation=e;var i=function(){return function(t,e){this.packageItem=t,this.type=e}}()}(fgui||(fgui={})),function(t){!function(t){var e=function(){function t(){}return t.create=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return e?function(){var n=arguments.length>0?[].concat(Array.prototype.slice.call(arguments)).concat(i):[].concat(i);t.apply(e,n)}:t},t}();t.Binder=e}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){var e=function(){function e(t){this.endian=e.BIG_ENDIAN,this.stringTable=null,this.version=0,this._position=0,this._buffer=t,this._uint8Array=new Uint8Array(t)}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._uint8Array.byteLength},enumerable:!0,configurable:!0}),e.prototype.__checkEOF=function(t){if(void 0===t&&(t=1),this._position+t>this._uint8Array.byteLength)throw"END OF BUFFER, length="+this._uint8Array.byteLength+" position="+(this._position+t)},e.prototype.skip=function(t){this.position+=t},e.prototype.readUInt8=function(){this.__checkEOF();var t=this._uint8Array[this._position];return this._position++,t},e.prototype.readUInt16LE=function(){this.__checkEOF(2);var t=this._uint8Array,e=this._position,i=t[e]|t[e+1]<<8;return this._position+=2,i},e.prototype.readUInt16BE=function(){this.__checkEOF(2);var t=this._uint8Array,e=this._position,i=t[e]<<8|t[e+1];return this._position+=2,i},e.prototype.readUInt32LE=function(){this.__checkEOF(4);var t=this._uint8Array,e=this._position,i=(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3];return this._position+=4,i},e.prototype.readUInt32BE=function(){this.__checkEOF(4);var t=this._uint8Array,e=this._position,i=16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3]);return this._position+=4,i},e.prototype.readInt8=function(){this.__checkEOF();var t,e=this._uint8Array,i=this._position;return t=128&e[i]?-1*(255-e[i]+1):e[i],this._position++,t},e.prototype.readInt16LE=function(){this.__checkEOF(2);var t=this._uint8Array,e=this._position,i=t[e]|t[e+1]<<8;return this._position+=2,32768&i?4294901760|i:i},e.prototype.readInt16BE=function(){this.__checkEOF(2);var t=this._uint8Array,e=this._position,i=t[e+1]|t[e]<<8;return this._position+=2,32768&i?4294901760|i:i},e.prototype.readInt32LE=function(){this.__checkEOF(4);var t=this._uint8Array,e=this._position,i=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24;return this._position+=4,i},e.prototype.readInt32BE=function(){this.__checkEOF(4);var t=this._uint8Array,e=this._position,i=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return this._position+=4,i},e.prototype.readFloatLE=function(){this.__checkEOF(4);var e=this._uint8Array,i=this._position,n=t.the3rd.ieee754.read(e,i,!0,23,4);return this._position+=4,n},e.prototype.readFloatBE=function(){this.__checkEOF(4);var e=this._uint8Array,i=this._position,n=t.the3rd.ieee754.read(e,i,!1,23,4);return this._position+=4,n},e.prototype.readDoubleLE=function(){this.__checkEOF(8);var e=this._uint8Array,i=this._position,n=t.the3rd.ieee754.read(e,i,!0,52,8);return this._position+=8,n},e.prototype.readDoubleBE=function(){this.__checkEOF(8);var e=this._uint8Array,i=this._position,n=t.the3rd.ieee754.read(e,i,!1,52,8);return this._position+=8,n},e.prototype.readBool=function(){return 1==this.readByte()},e.prototype.readUnsignedShort=function(){return this.endian==e.BIG_ENDIAN?this.readUInt16BE():this.readUInt16LE()},e.prototype.readByte=function(){return this.readInt8()},e.prototype.readUnsignedByte=function(){return this.readUInt8()},e.prototype.readUnsignedInt=function(){return this.endian==e.BIG_ENDIAN?this.readUInt32BE():this.readUInt32LE()},e.prototype.readInt=function(){return this.endian==e.BIG_ENDIAN?this.readInt32BE():this.readInt32LE()},e.prototype.readShort=function(){return this.endian==e.BIG_ENDIAN?this.readInt16BE():this.readInt16LE()},e.prototype.readFloat=function(){return this.endian==e.BIG_ENDIAN?this.readFloatBE():this.readFloatLE()},e.prototype.decodeCodePointsArray=function(t){var i=t.length;if(i<=e.MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var n="",o=0;o<i;)n+=String.fromCharCode.apply(String,t.slice(o,o+=e.MAX_ARGUMENTS_LENGTH));return n},e.prototype.readUTF=function(){for(var t=this._uint8Array,e=this.readUInt16BE(),i=this._position,n=this._position+e,o=[],r=i;r<n;){var s=t[r],a=null,h=s>239?4:s>223?3:s>191?2:1;if(r+h<=n){var l=void 0,u=void 0,c=void 0,p=void 0;switch(h){case 1:s<128&&(a=s);break;case 2:128==(192&(l=t[r+1]))&&(p=(31&s)<<6|63&l)>127&&(a=p);break;case 3:l=t[r+1],u=t[r+2],128==(192&l)&&128==(192&u)&&(p=(15&s)<<12|(63&l)<<6|63&u)>2047&&(p<55296||p>57343)&&(a=p);break;case 4:l=t[r+1],u=t[r+2],c=t[r+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&(p=(15&s)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&p<1114112&&(a=p)}}null===a?(a=65533,h=1):a>65535&&(a-=65536,o.push(a>>>10&1023|55296),a=56320|1023&a),o.push(a),r+=h}return this._position=n,this.decodeCodePointsArray(o)},e.prototype.readS=function(){var t=this.readUnsignedShort();return 65534==t?null:65533==t?"":this.stringTable[t]},e.prototype.readSArray=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this.readS();return e},e.prototype.writeS=function(t){var e=this.readUnsignedShort();65534!=e&&65533!=e&&(this.stringTable[e]=t)},e.prototype.readColor=function(t){void 0===t&&(t=!1);var e=this.readUnsignedByte(),i=this.readUnsignedByte(),n=this.readUnsignedByte(),o=this.readUnsignedByte();return(t?o<<24:0)+(e<<16)+(i<<8)+n},e.prototype.readChar=function(){var t=this.readUnsignedShort();return String.fromCharCode(t)},e.prototype.readBuffer=function(){var i=this.readUnsignedInt();t.Debug.log("readBuffer",i,this.position);var n=new e(new Uint8Array(this.buffer,this.position,i));return n.stringTable=this.stringTable,n.version=this.version,this.position+=i,n},e.prototype.seek=function(t,e){var i,n=this.position;return this.position=t,e<this.readByte()?(1==this.readByte()?(this.position+=2*e,i=this.readUnsignedShort()):(this.position+=4*e,i=this.readUnsignedInt()),i>0?(this.position=t+i,!0):(this.position=n,!1)):(this.position=n,!1)},e.BIG_ENDIAN="big",e.LITTLE_ENDIAN="little",e.MAX_ARGUMENTS_LENGTH=4096,e}();t.ByteBuffer=e}(fgui||(fgui={})),function(t){!function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this._raw=[],this.h=0,this.s=0,this.c=0,this.b=0,this.setColor(t,e,i,n)}return Object.defineProperty(t.prototype,"hue",{get:function(){return this.h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.s},enumerable:!0,configurable:!0}),t.getMatrix=function(e,i,n,o,r){r||(r=new Array(t.length));var s=new t(e,i,n,o),a=t.LENGTH;if(r&&r.length>=a)for(var h=0;h<a;h++)r[h]=s._raw[h];else r=s._raw;return r},t.prototype.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},t.prototype.reset=function(){return this.copy(t.IDENTITY_MATRIX)},t.prototype.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.prototype.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(this.b=t,t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},t.prototype.adjustContrast=function(e){if(0==e||isNaN(e))return this;var i;this.c=e;return i=(e=this._cleanValue(e,100))<0?1+e/100*1:1*(i=0==(i=e%1)?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[1+(e<<0)]*i)+1,this._multiplyMatrix([i/1,0,0,0,.5*(1-i),0,i/1,0,0,.5*(1-i),0,0,i/1,0,.5*(1-i),0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustSaturation=function(t){if(0==t||isNaN(t))return this;this.s=t;var e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-e)+e,.6094*(1-e),.082*(1-e),0,0,.3086*(1-e),.6094*(1-e)+e,.082*(1-e),0,0,.3086*(1-e),.6094*(1-e),.082*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustHue=function(t){if(0==t||isNaN(t))return this;this.h=t,t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t);return this._multiplyMatrix([.213+.787*e+-.213*i,.715+-.715*e+-.715*i,.072+-.072*e+.928*i,0,0,.213+-.213*e+.143*i,.715+e*(1-.715)+.14*i,.072+-.072*e+-.283*i,0,0,.213+-.213*e+-.787*i,.715+-.715*e+.715*i,.072+.928*e+.072*i,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.concat=function(e){return(e=this._fixMatrix(e)).length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},t.prototype.clone=function(){return(new t).copy(this._raw)},t.prototype.toArray=function(){for(var e=[],i=0,n=t.LENGTH;i<n;i++)e[i]=this._raw[i];return e},t.prototype.copy=function(e){for(var i=t.LENGTH,n=0;n<i;n++)this._raw[n]=e[n];return this},t.prototype._multiplyMatrix=function(t){var e,i,n,o=[];for(e=0;e<5;e++){for(i=0;i<5;i++)o[i]=this._raw[i+5*e];for(i=0;i<5;i++){var r=0;for(n=0;n<5;n++)r+=t[i+5*n]*o[n];this._raw[i+5*e]=r}}},t.prototype._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t.prototype._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,t.helper=new t,t}();t.ColorMatrix=e}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){!function(e){var i=function(){function e(){this.$agent=new t.GLoader,this.$agent.draggable=!0,this.$agent.touchable=!1,this.$agent.setSize(100,100),this.$agent.setPivot(.5,.5,!0),this.$agent.align=t.AlignType.Center,this.$agent.verticalAlign=t.VertAlignType.Middle,this.$agent.sortingOrder=1e6,this.$agent.on("__dragEnd",this.$dragEnd,this)}return Object.defineProperty(e.prototype,"dragAgent",{get:function(){return this.$agent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragging",{get:function(){return null!=this.$agent.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceObject",{get:function(){return this.$sourceObject},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(e,i,n,o){if(void 0===o&&(o=-1),!this.isDragging){this.$sourceObject=e,this.$sourceData=n,this.$agent.url=i,t.GRoot.inst.addChild(this.$agent);var r=t.GRoot.inst.globalToLocal(t.GRoot.globalMouseStatus.mouseX,t.GRoot.globalMouseStatus.mouseY);this.$agent.setXY(r.x,r.y),this.$agent.startDrag(o)}},e.prototype.cancel=function(){null!=this.$agent.parent&&(this.$agent.stopDrag(),t.GRoot.inst.removeChild(this.$agent),this.$sourceData=null)},e.prototype.$dragEnd=function(e){if(this.isDragging){t.GRoot.inst.removeChild(this.$agent);var i=this.$sourceData;this.$sourceData=null;for(var n=t.GRoot.inst.getObjectUnderPoint(e.data.global.x,e.data.global.y);null!=n;){if(n.listenerCount("__dragDrop"))return n.requestFocus(),e.currentTarget=n.displayObject,void n.emit("__dragDrop",e,i);n=n.parent}}},e}();e.DragIndicator=i}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){!function(e){var i=function(){function e(e){this._inited=!1,this._restrictString=null,this._restrictRegex=null,this._focused=!1,this._textField=e,this._input=new t.InputElement(e)}return e.prototype.initialize=function(){this._inited||(this._input._addToStage(),this._input.on("updateText",this.updateText,this),this._input.on("__focusChanged",this.focusHandler,this),this._textField.on(t.InteractiveEvents.Down,this.textFieldDownHandler,this),this._inited=!0)},e.prototype.textFieldDownHandler=function(){this._onFocus()},e.prototype.destroy=function(){this._inited&&(this._input._removeFromStage(),this._textField.off(t.InteractiveEvents.Down,this.textFieldDownHandler,this),t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),this._input.off("updateText",this.updateText,this),this._input.off("__focusChanged",this.focusHandler,this),this._inited=!1)},Object.defineProperty(e.prototype,"text",{get:function(){return this._input.text},set:function(t){this._input.text=t},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){return this._input.setColor(t)},e.prototype.updateText=function(){t.Debug.log("updateText");var e=this._input.text,i=!1;if(null!=this._restrictRegex){var n=e.match(this._restrictRegex);e=n?n.join(""):"",i=!0}i&&this._input.text!=e&&(this._input.text=e),this._textField.text=this._input.text,this._textField.emit("__textChange",this._textField)},e.prototype.onStageDown=function(e){t.GObject.cast(e.currentTarget)!=this._textField&&(this._input._hide(),t.Debug.log("onStageDown -> hide")),this._input._show()},e.prototype.focusHandler=function(e){t.Debug.log("fouces change ",e),"focus"==e?this._focused||(this._focused=!0,this._textField._isTyping=!0,this._textField.alpha=1,this._textField.emit("__focusChanged","focus",this._textField),this._textField.emit("__textFocusIn",this._textField)):"blur"==e&&this._focused&&(this._focused=!1,t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),this._textField._isTyping=!1,this._textField.alpha=1,this._input._onBlur(),this._textField.emit("__focusChanged","blur",this._textField),this._textField.emit("__textFocusOut",this._textField))},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._focused},enumerable:!0,configurable:!0}),e.prototype._getProperty=function(t){return this._inited&&this._input.getAttribute(t)||null},e.prototype._setProperty=function(t,e){this._inited&&this._input.setAttribute(t,e)},Object.defineProperty(e.prototype,"_restrict",{get:function(){return this._restrictString},set:function(t){this._restrictString=t,null!=this._restrictString&&this._restrictString.length>0?this._restrictRegex=new RegExp(this._restrictString):this._restrictRegex=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){t!=this._type&&(this._type=t)},enumerable:!0,configurable:!0}),e.prototype.tryHideInput=function(){!this._textField.visible&&this._input&&this._input._removeFromStage()},e.prototype._updateProperties=function(){if(this.isFocused)return this._input.resetInput(),void this.tryHideInput();this._input.text=this._textField.text,this._input.resetInput(),this.tryHideInput()},e.prototype._onFocus=function(){var e=this;this._textField.visible&&!this._focused?(t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),t.GTimer.inst.callLater(function(){t.GRoot.inst.on(t.InteractiveEvents.Down,e.onStageDown,e)},this),this._input._show()):t.Debug.log("_onFocus invisible or ")},e}();e.InputDelegate=i}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){!function(t){var e=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.parse=function(t){if(t){var e=t.split(",");if(1==e.length){var i=parseInt(e[0]);this.left=this.right=this.top=this.bottom=i}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3])}else this.left=this.right=this.top=this.bottom=0},t.prototype.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}();t.Margin=e}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){!function(t){var e=function(){function t(){}return t.clamp=function(t,e,i){return t<e?t=e:t>i&&(t=i),t},t.clamp01=function(t){return t>1?t=1:t<0&&(t=0),t},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1},t.angleToRadian=function(e){return e*t.RADIAN},t.lerp=function(t,e,i){return t+i*(e-t)},t.RADIAN=Math.PI/180,t}();t.NumberUtil=e}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){var e=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._data=t,this.offsetX=e,this.offsetY=i,this.scaleX=1,this.scaleY=1}return t.prototype.contains=function(t,e){if(t=Math.floor((t/this.scaleX-this.offsetX)*this._data.scale),e=Math.floor((e/this.scaleY-this.offsetY)*this._data.scale),t<0||e<0||t>=this._data.pixelWidth)return!1;var i=e*this._data.pixelWidth+t,n=Math.floor(i/8),o=i%8;return n>=0&&n<this._data.pixels.length&&1==(this._data.pixels[n]>>o&1)},t}();t.PixelHitTest=e;var i=function(){function t(){}return t.prototype.load=function(t){t.readInt(),this.pixelWidth=t.readInt(),this.scale=1/t.readByte();var e=t.readInt();this.pixels=[];for(var i=0;i<e;i++){var n=t.readByte();n<0&&(n+=256),this.pixels[i]=n}},t}();t.PixelHitTestData=i}(fgui||(fgui={})),function(t){!function(t){var e=function(){function t(){}return t.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("\\"))&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("."))?t.substring(0,e):t},t.startsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},t.endsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},t.trim=function(e){return t.trimLeft(t.trimRight(e))},t.trimLeft=function(t){var e,i="";for(e=0;e<t.length&&(" "==(i=t.charAt(e))||"\n"==i||"\r"==i);e++);return t.substr(e)},t.trimRight=function(t){var e,i="";for(e=t.length-1;e>=0&&(" "==(i=t.charAt(e))||"\n"==i||"\r"==i);e--);return t.substring(0,e+1)},t.convertToHtmlColor=function(t,e){var i;void 0===e&&(e=!1),i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),o=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),1==r.length&&(r="0"+r),"#"+i+n+o+r},t.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},t}();t.StringUtil=e}(t.utils||(t.utils={}))}(fgui||(fgui={})),function(t){var e=function(){function t(){this._readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.url=this.onTag_URL,this._handlers.img=this.onTag_IMG,this._handlers.b=this.onTag_Simple,this._handlers.i=this.onTag_Simple,this._handlers.u=this.onTag_Simple,this._handlers.sup=this.onTag_Simple,this._handlers.sub=this.onTag_Simple,this._handlers.color=this.onTag_COLOR,this._handlers.font=this.onTag_FONT,this._handlers.size=this.onTag_SIZE}return t.prototype.onTag_URL=function(t,e,i){return e?"</a>":null!=i?'<a href="'+i+'" target="_blank">':'<a href="'+this.getTagText()+'" target="_blank">'},t.prototype.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},t.prototype.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},t.prototype.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},t.prototype.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},t.prototype.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},t.prototype.getTagText=function(t){void 0===t&&(t=!1);for(var e,i=this._readPos,n="";-1!=(e=this._text.indexOf("[",i));){if(92!=this._text.charCodeAt(e-1)){n+=this._text.substring(i,e);break}n+=this._text.substring(i,e-1),n+="[",i=e+1}return-1==e?null:(t&&(this._readPos=e),n)},t.prototype.parse=function(t,e){void 0===e&&(e=!1),this._text=t;for(var i,n,o,r,s,a,h,l=0,u="";-1!=(i=this._text.indexOf("[",l));)if(i>0&&92==this._text.charCodeAt(i-1))u+=this._text.substring(l,i-1),u+="[",l=i+1;else{if(u+=this._text.substring(l,i),l=i,-1==(i=this._text.indexOf("]",l)))break;o="/"==this._text.charAt(l+1),r=this._text.substring(o?l+2:l+1,i),this._readPos=i+1,s=null,a=null,-1!=(n=r.indexOf("="))&&(s=r.substring(n+1),r=r.substring(0,n)),r=r.toLowerCase(),null!=(h=this._handlers[r])?e||null!=(a=h.call(this,r,o,s))&&(u+=a):u+=this._text.substring(l,this._readPos),l=this._readPos}return l<this._text.length&&(u+=this._text.substr(l)),this._text=null,u},t.inst=new t,t}();t.UBBParser=e}(fgui||(fgui={})),function(t){var e=function(){function e(){}return e.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("\\"))&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("."))?t.substring(0,e):t},e.startsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},e.endsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},e.trim=function(t){return e.trimLeft(e.trimRight(t))},e.trimLeft=function(t){for(var e="",i=0;i<t.length&&(" "==(e=t.charAt(i))||"\n"==e||"\r"==e);i++);return t.substr(i)},e.trimRight=function(t){for(var e="",i=t.length-1;i>=0&&(" "==(e=t.charAt(i))||"\n"==e||"\r"==e);i--);return t.substring(0,i+1)},e.convertToHtmlColor=function(t,e){var i;void 0===e&&(e=!1),i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),o=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),1==r.length&&(r="0"+r),"#"+i+n+o+r},e.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},e.displayObjectToGObject=function(e){for(;null!=e&&!(e instanceof t.UIStage);){if(e.$owner)return t.GObject.cast(e);e=e.parent}return null},e.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},e.parseUBB=function(t){return e.defaultUBBParser.parse(t)},e.clamp=function(t,e,i){return t<e?t=e:t>i&&(t=i),t},e.clamp01=function(t){return t>1?t=1:t<0&&(t=0),t},e.lerp=function(t,e,i){return t+i*(e-t)},e.repeat=function(t,e){return t-Math.floor(t/e)*e},e.distance=function(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))},e.fillPath=function(t,e,i,n){var o=e.length;t.moveTo(e[0]+i,e[1]+n);for(var r=2;r<o;r+=2)t.lineTo(e[r]+i,e[r+1]+n);t.lineTo(e[0]+i,e[1]+n)},e.setColorFilter=function(i,n){var o,r,s=i.$_colorFilter_,a=(s=i.$_colorFilter_,i.filters);if("boolean"==typeof n?(o=s?s.$_color_:null,r=n):(o=16777215==n?null:n,r=!!s&&s.$_grayed_),o||0==o||r){if(s||(s=new PIXI.filters.ColorMatrixFilter,i.$_colorFilter_=s),a)-1==a.indexOf(s)&&a.push(s);else a=[s];i.filters=a,s.$_color_=o,s.$_grayed_=r;var h=s.matrix;if(r)for(var l=0;l<20;l++)h[l]=e.grayScaleMatrix[l];else if(o instanceof Array)t.utils.ColorMatrix.getMatrix(o[0],o[1],o[2],o[3],h);else{for(var u=0;u<20;u++)h[u]=0==u||6==u||12==u||18==u?1:0;h[0]=(n>>16&255)/255,h[6]=(n>>8&255)/255,h[12]=(255&n)/255}s.matrix=h}else if(a&&s){var c=a.indexOf(s);-1!=c&&(a.splice(c,1),a.length>0?i.filters=a:i.filters=null)}},e.defaultUBBParser=new t.UBBParser,e.grayScaleMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],e}();t.ToolSet=e}(fgui||(fgui={})),function(t){!function(e){var i=function(){function t(t){this.nodeName=t.nodeName,this.context=t,this.type=t.nodeType,this.text=this.type==Node.COMMENT_NODE||this.type==Node.TEXT_NODE?this.context.textContent:null}return Object.defineProperty(t.prototype,"children",{get:function(){return this.$children||(this.$children=n.getChildNodes(this)),this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.$attributes||(this.$attributes=n.getNodeAttributes(this)),this.$attributes},enumerable:!0,configurable:!0}),t}();e.XmlNode=i;var n=function(){function e(){}return e.tryParse=function(n,o){void 0===o&&(o="application/xml"),t.Debug.log("XmlParser",n);var r=e.$parser.parseFromString(n,o);return r&&r.childNodes&&r.childNodes.length>=1?new i(r.firstChild):null},e.getXmlRoot=function(t){if(!t||!t.context)throw new Error("Invalid xml node");for(var e=t.context;null!=e.parentNode;)e=e.parentNode;return e==t.context?t:new i(e)},e.getChildNodes=function(t,e){void 0===e&&(e=null);var n=t.context.childNodes,o=[];if(!n||n.length<=0)return o;for(var r=n.length,s=0;s<r;s++){var a=n.item(s);a.nodeType!=Node.TEXT_NODE&&((!e||e&&e.length>0&&a.nodeName.toLowerCase()==e.toLowerCase())&&o.push(new i(a)))}return o},e.getNodeAttributes=function(t){var e=t.context.childNodes,i={};if(!e||e.length<=0)return i;for(var n=e.length,o=0;o<n;o++){var r=e.item(o);i[r.nodeName]=r.nodeValue}return i},e.$parser=new DOMParser,e}();e.XmlParser=n}(t.utils||(t.utils={}))}(fgui||(fgui={}));